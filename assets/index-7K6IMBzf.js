import{g as Ri,r as Q,j as A}from"./index-Dk8Pe-UP.js";import{h as xa,i as nt,e as Bi,u as _a,d as zi}from"./recordStore-B6hAhEJc.js";import{d as Gi}from"./demoData-DANDD5Gv.js";var Mt=function(r){return r!==null&&typeof r!="function"&&isFinite(r.length)},Sa=function(r,t){if(!Mt(r))return r;for(var e=[],a=0;a<r.length;a++){var i=r[a];t(i,a)&&e.push(i)}return e},Xi={}.toString,Pt=function(r,t){return Xi.call(r)==="[object "+t+"]"};const O=function(r){return Pt(r,"Function")};var P=function(r){return r==null};const I=function(r){return Array.isArray?Array.isArray(r):Pt(r,"Array")},V=function(r){var t=typeof r;return r!==null&&t==="object"||t==="function"};function S(r,t){if(r){var e;if(I(r))for(var a=0,i=r.length;a<i&&(e=t(r[a],a),e!==!1);a++);else if(V(r)){for(var n in r)if(r.hasOwnProperty(n)&&(e=t(r[n],n),e===!1))break}}}var Hi=function(r){return typeof r=="object"&&r!==null},se=function(r){if(!Hi(r)||!Pt(r,"Object"))return!1;if(Object.getPrototypeOf(r)===null)return!0;for(var t=r;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(r)===t};const ji=function(r){if(I(r))return r.reduce(function(t,e){return Math.max(t,e)},r[0])},Vi=function(r){if(I(r))return r.reduce(function(t,e){return Math.min(t,e)},r[0])};var qi=function(r){var t=r.filter(function(s){return!isNaN(s)});if(!t.length)return{min:0,max:0};if(I(r[0])){for(var e=[],a=0;a<r.length;a++)e=e.concat(r[a]);t=e}var i=ji(t),n=Vi(t);return{min:n,max:i}};const R=function(r){return Pt(r,"String")};function $i(r,t){t===void 0&&(t=new Map);var e=[];if(Array.isArray(r))for(var a=0,i=r.length;a<i;a++){var n=r[a];t.has(n)||(e.push(n),t.set(n,!0))}return e}function ct(r){if(Mt(r))return r[0]}function tt(r){if(Mt(r)){var t=r;return t[t.length-1]}}var _e=function(r,t){var e=t.toString(),a=e.indexOf(".");if(a===-1)return Math.round(r);var i=e.substr(a+1).length;return i>20&&(i=20),parseFloat(r.toFixed(i))},z=function(r){return Pt(r,"Number")},Wi=Object.values?function(r){return Object.values(r)}:function(r){var t=[];return S(r,function(e,a){O(r)&&a==="prototype"||t.push(e)}),t};const Ca=function(r){return P(r)?"":r.toString()};var Ui=function(r){var t=Ca(r);return t.charAt(0).toLowerCase()+t.substring(1)};function vt(r,t){return!r||!t?r:r.replace(/\\?\{([^{}]+)\}/g,function(e,a){return e.charAt(0)==="\\"?e.slice(1):t[a]===void 0?"":t[a]})}var gt=function(r){var t=Ca(r);return t.charAt(0).toUpperCase()+t.substring(1)},Zi={}.toString,Ki=function(r){return Zi.call(r).replace(/^\[object /,"").replace(/]$/,"")},Ji=function(r){return Pt(r,"Boolean")},Je=function(r){return Pt(r,"Date")},Qi=Object.prototype,tn=function(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||Qi;return r===e};function fr(r,t){for(var e in t)t.hasOwnProperty(e)&&e!=="constructor"&&t[e]!==void 0&&(r[e]=t[e])}function y(r,t,e,a){return t&&fr(r,t),e&&fr(r,e),r}const en=function(r,t){if(!O(r))throw new TypeError("Expected a function");var e=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];var n=t?t.apply(this,a):a[0],s=e.cache;if(s.has(n))return s.get(n);var o=r.apply(this,a);return s.set(n,o),o};return e.cache=new Map,e};var rn=5;function Ma(r,t,e,a){e=e||0,a=a||rn;for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];n!==null&&se(n)?(se(r[i])||(r[i]={}),e<a?Ma(r[i],n,e+1,a):r[i]=t[i]):I(n)?(r[i]=[],r[i]=r[i].concat(n)):n!==void 0&&(r[i]=n)}}var L=function(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var a=0;a<t.length;a+=1)Ma(r,t[a]);return r},Pa=function(r,t){if(!Mt(r))return-1;var e=Array.prototype.indexOf;if(e)return e.call(r,t);for(var a=-1,i=0;i<r.length;i++)if(r[i]===t){a=i;break}return a},an=Object.prototype.hasOwnProperty;function nn(r){if(P(r))return!0;if(Mt(r))return!r.length;var t=Ki(r);if(t==="Map"||t==="Set")return!r.size;if(tn(r))return!Object.keys(r).length;for(var e in r)if(an.call(r,e))return!1;return!0}var sn=function(r,t){if(!Mt(r))return r;for(var e=[],a=0;a<r.length;a++){var i=r[a];e.push(t(i,a))}return e};function wa(r){return P(r)?0:Mt(r)?r.length:Object.keys(r).length}var $t;en(function(r,t){t===void 0&&(t={});var e=t.fontSize,a=t.fontFamily,i=t.fontWeight,n=t.fontStyle,s=t.fontVariant;return $t||($t=document.createElement("canvas").getContext("2d")),$t.font=[n,s,i,e+"px",a].join(" "),$t.measureText(R(r)?r:"").width},function(r,t){return t===void 0&&(t={}),xa([r],Wi(t)).join("")});function on(r){for(var t=[],e=0,a=r.length;e<a;e++)t=t.concat(r[e]);return t}function ln(r,t){for(var e=[],a={},i=0,n=r.length;i<n;i++){var s=r[i],o=s[t];P(o)||(I(o)?S(o,function(l){a[l]||(e.push(l),a[l]=!0)}):a[o]||(e.push(o),a[o]=!0))}return e}function cr(r,t){for(var e=null,a=0,i=r.length;a<i;a++){var n=r[a],s=n[t];if(!P(s)){I(s)?e=s[0]:e=s;break}}return e}function hn(r,t){if(!t)return{0:r};for(var e=function(h){for(var u="_",f=0,c=t.length;f<c;f++)u+=h[t[f]]&&h[t[f]].toString();return u},a={},i=0,n=r.length;i<n;i++){var s=r[i],o=e(s);a[o]?a[o].push(s):a[o]=[s]}return a}function un(r,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return[r];var a=hn(r,t),i=[];if(t.length===1&&e[t[0]]){var n=e[t[0]];S(n,function(o){o="_"+o,i.push(a[o])})}else for(var s in a)i.push(a[s]);return i}function Qe(r,t){if(r){var e=r.indexOf(t);e!==-1&&r.splice(e,1)}}function ba(r){if(!r.length)return{min:0,max:0};var t=Math.max.apply(null,r),e=Math.min.apply(null,r);return{min:e,max:t}}var fn=function(){var r=!1;try{var t=Object.defineProperty({},"passive",{get(){r=!0}});window.addEventListener("e",null,t)}catch{}return r}(),Ta=fn?{passive:!0}:!1;typeof wx=="object"&&wx.getSystemInfoSync;typeof my=="object"&&my.getSystemInfoSync;function cn(r){return!r||typeof r!="object"?!1:r.nodeType===1&&r.nodeName?!0:!!r.isCanvasElement}function vn(){return window&&window.devicePixelRatio||1}function oe(r,t){return r.currentStyle?r.currentStyle[t]:document.defaultView.getComputedStyle(r,null).getPropertyValue(t)}function Da(r){var t=oe(r,"width");return t==="auto"&&(t=r.offsetWidth),parseFloat(t)}function Ia(r){var t=oe(r,"height");return t==="auto"&&(t=r.offsetHeight),parseFloat(t)}function gn(r){return r?document.getElementById(r):null}function vr(r,t){var e=t.get("el");if(!e)return r;var{top:a,left:i}=e.getBoundingClientRect(),n=parseFloat(oe(e,"padding-left")),s=parseFloat(oe(e,"padding-top")),o=r.x-i-n,l=r.y-a-s;return{x:o,y:l}}function dn(r,t,e){r.addEventListener(t,e,Ta)}function pn(r,t,e){r.removeEventListener(t,e,Ta)}function gr(r,t){var e=t.get("landscape");if(!e)return r;if(O(e))return e(r,t);var a=t.get("height"),i=r.y,n=a-r.x;return{x:i,y:n}}function Rt(r,t){var e=r.touches;if(!e){var a=vr({x:r.clientX,y:r.clientY},t);return[gr(a,t)]}e.length||(e=r.changedTouches||[]);for(var i=[],n=0,s=e.length;n<s;n++){var o=e[n],{x:l,y:h,clientX:u,clientY:f}=o,c=void 0;z(l)||z(h)?c={x:l,y:h}:c=vr({x:u,y:f},t),i.push(gr(c,t))}return i}function Aa(r,t){var e=t.get("canvas"),a=Rt(r,e),i=a[0]||{};return{type:r.type,chart:t,native:r,x:i.x,y:i.y}}function dr(r,t,e){return e||(e=document.createElement("canvas").getContext("2d")),e.font=t||"12px sans-serif",e.measureText(r)}function W(r){var t,e,a,i;return z(r)||R(r)?t=a=i=e=r:I(r)&&(t=r[0],e=P(r[1])?r[0]:r[1],a=P(r[2])?r[0]:r[2],i=P(r[3])?e:r[3]),[t,e,a,i]}function Xe(r,t){return r===void 0?!0:typeof r=="string"?r.indexOf(t)!==-1:!1}function re(r){return R(r)&&(r.indexOf("T")>0?r=new Date(r).getTime():r=new Date(r.replace(/-/gi,"/")).getTime()),Je(r)&&(r=r.getTime()),r}var pr="#E8E8E8",mn="#808080",mt={label:{fill:mn,fontSize:10},line:{stroke:pr,lineWidth:1},grid:{type:"line",stroke:pr,lineWidth:1,lineDash:[2]},tickLine:null,labelOffset:7.5},yn={fontFamily:'"Helvetica Neue", "San Francisco", Helvetica, Tahoma, Arial, "PingFang SC", "Hiragino Sans GB", "Heiti SC", "Microsoft YaHei", sans-serif',defaultColor:"#1890FF",pixelRatio:1,padding:"auto",appendPadding:15,colors:["#1890FF","#2FC25B","#FACC14","#223273","#8543E0","#13C2C2","#3436C7","#F04864"],shapes:{line:["line","dash"],point:["circle","hollowCircle"]},sizes:[4,10],axis:{common:mt,bottom:y({},mt,{grid:null}),left:y({},mt,{line:null}),right:y({},mt,{line:null}),circle:y({},mt,{line:null}),radius:y({},mt,{labelOffset:4})},shape:{line:{lineWidth:2,lineJoin:"round",lineCap:"round"},point:{lineWidth:0,size:3},area:{fillOpacity:.1}},_defaultAxis:mt};const it={general:{title:"这是一个图表，",withTitle:"这是一个关于“{title}”的图表。"},coord:{cartesian:"X轴是{xLabel}Y轴是{yLabel}"},scale:{linear:"数值型，数据最小值为{min}，最大值为{max}；",cat:"分类型, 分类类型有：{values}；",timeCat:"时间型，时间范围从{start}到{end}；"},geometry:{prefix:"共有{count}种分类组成，",oneData:"第{index}类是{name}，数据是{values};",partData:"第{index}类是{name}，共有{count}项数据，前{part}项是{values};",allData:"第{index}类是{name}，有{count}项数据，分别是{values};"},legend:{prefix:"图例分类有："}};var T={version:"3.8.13",scales:{},widthRatio:{column:1/2,rose:.999999,multiplePie:3/4},lineDash:[4,4],lang:it};T.setTheme=function(r){L(T,r)};T.setTheme(yn);var He="afterinit",xn="beforerender",_n="afterrender",Sn="beforedatachange",Gt="afterdatachange",je="_aftersizechange",Cn="_aftergeominit",Mn="beforegeomdraw",Pn="aftergeomdraw",wn="clear",bn="clearinner",Tn="repaint";class tr{constructor(){this.__events={}}on(t,e){if(!(!t||!e)){var a=this.__events[t]||[];a.push(e),this.__events[t]=a}}emit(t,e){var a=this;if(V(t)&&(e=t,t=e&&e.type),!!t){var i=this.__events[t];!i||!i.length||i.forEach(function(n){n.call(a,e)})}}off(t,e){var a=this.__events,i=a[t];if(!(!i||!i.length)){if(!e){delete a[t];return}for(var n=0,s=i.length;n<s;n++)i[n]===e&&(i.splice(n,1),n--)}}}let Ea=class extends tr{getDefaultCfg(){return{}}constructor(t){super();var e={},a=this.getDefaultCfg();this._attrs=e,y(e,a,t)}get(t){return this._attrs[t]}set(t,e){this._attrs[t]=e}destroy(){this._attrs={},this.destroyed=!0}};class Dn{constructor(t){y(this,t),this._init()}_init(){var t=this,e=t.start,a=t.end,i=Math.min(e.x,a.x),n=Math.max(e.x,a.x),s=Math.min(e.y,a.y),o=Math.max(e.y,a.y);this.tl={x:i,y:s},this.tr={x:n,y:s},this.bl={x:i,y:o},this.br={x:n,y:o},this.width=n-i,this.height=o-s}reset(t,e){this.start=t,this.end=e,this._init()}isInRange(t,e){V(t)&&(e=t.y,t=t.x);var a=this.tl,i=this.br;return a.x<=t&&t<=i.x&&a.y<=e&&e<=i.y}}var B={generateDefault(){return[1,0,0,1,0,0]},isChanged(r){return r[0]!==1||r[1]!==0||r[2]!==0||r[3]!==1||r[4]!==0||r[5]!==0},multiply(r,t){var e=r[0]*t[0]+r[2]*t[1],a=r[1]*t[0]+r[3]*t[1],i=r[0]*t[2]+r[2]*t[3],n=r[1]*t[2]+r[3]*t[3],s=r[0]*t[4]+r[2]*t[5]+r[4],o=r[1]*t[4]+r[3]*t[5]+r[5];return[e,a,i,n,s,o]},scale(r,t,e){return r[0]=t[0]*e[0],r[1]=t[1]*e[0],r[2]=t[2]*e[1],r[3]=t[3]*e[1],r[4]=t[4],r[5]=t[5],r},rotate(r,t,e){var a=Math.cos(e),i=Math.sin(e),n=t[0]*a+t[2]*i,s=t[1]*a+t[3]*i,o=t[0]*-i+t[2]*a,l=t[1]*-i+t[3]*a;return r[0]=n,r[1]=s,r[2]=o,r[3]=l,r[4]=t[4],r[5]=t[5],r},translate(r,t,e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4]+t[0]*e[0]+t[2]*e[1],r[5]=t[5]+t[1]*e[0]+t[3]*e[1],r},transform(r,t){for(var e=[].concat(r),a=0,i=t.length;a<i;a++){var n=t[a];switch(n[0]){case"t":B.translate(e,e,[n[1],n[2]]);break;case"s":B.scale(e,e,[n[1],n[2]]);break;case"r":B.rotate(e,e,n[1]);break}}return e}};const D={create(){return[0,0]},length(r){var t=r[0],e=r[1];return Math.sqrt(t*t+e*e)},normalize(r,t){var e=this.length(t);return e===0?(r[0]=0,r[1]=0):(r[0]=t[0]/e,r[1]=t[1]/e),r},add(r,t,e){return r[0]=t[0]+e[0],r[1]=t[1]+e[1],r},sub(r,t,e){return r[0]=t[0]-e[0],r[1]=t[1]-e[1],r},scale(r,t,e){return r[0]=t[0]*e,r[1]=t[1]*e,r},dot(r,t){return r[0]*t[0]+r[1]*t[1]},direction(r,t){return r[0]*t[1]-t[0]*r[1]},angle(r,t){var e=this.dot(r,t)/(this.length(r)*this.length(t));return Math.acos(e)},angleTo(r,t,e){var a=this.angle(r,t),i=this.direction(r,t)>=0;return e?i?Math.PI*2-a:a:i?a:Math.PI*2-a},zero(r){return r[0]===0&&r[1]===0},distance(r,t){var e=t[0]-r[0],a=t[1]-r[1];return Math.sqrt(e*e+a*a)},clone(r){return[r[0],r[1]]},min(r,t,e){return r[0]=Math.min(t[0],e[0]),r[1]=Math.min(t[1],e[1]),r},max(r,t,e){return r[0]=Math.max(t[0],e[0]),r[1]=Math.max(t[1],e[1]),r},transformMat2d(r,t,e){var a=t[0],i=t[1];return r[0]=e[0]*a+e[2]*i+e[4],r[1]=e[1]*a+e[3]*i+e[5],r}};var In=[1,0,0,1,0,0];let At=class{_initDefaultCfg(){}constructor(t){this._initDefaultCfg(),y(this,t);var e,a;this.plot?(e=this.plot.bl,a=this.plot.tr,this.start=e,this.end=a):(e=this.start,a=this.end),this.init(e,a)}_scale(t,e){var a=this.matrix,i=this.center;B.translate(a,a,[i.x,i.y]),B.scale(a,a,[t,e]),B.translate(a,a,[-i.x,-i.y])}init(t,e){this.matrix=[].concat(In),this.center={x:(e.x-t.x)/2+t.x,y:(e.y-t.y)/2+t.y},this.scale&&this._scale(this.scale[0],this.scale[1])}convertPoint(t){var{x:e,y:a}=this._convertPoint(t);if(!B.isChanged(this.matrix))return{x:e,y:a};var i=[e,a];return D.transformMat2d(i,i,this.matrix),{x:i[0],y:i[1]}}invertPoint(t){return this._invertPoint(t)}_convertPoint(t){return t}_invertPoint(t){return t}reset(t){this.plot=t;var{bl:e,tr:a}=t;this.start=e,this.end=a,this.init(e,a)}};class ka extends At{_initDefaultCfg(){this.type="cartesian",this.transposed=!1,this.isRect=!0}init(t,e){super.init(t,e),this.x={start:t.x,end:e.x},this.y={start:t.y,end:e.y}}_convertPoint(t){var e=this,a=e.transposed,i=a?"y":"x",n=a?"x":"y",s=e.x,o=e.y;return{x:s.start+(s.end-s.start)*t[i],y:o.start+(o.end-o.start)*t[n]}}_invertPoint(t){var e=this,a=e.transposed,i=a?"y":"x",n=a?"x":"y",s=e.x,o=e.y,l={};return l[i]=(t.x-s.start)/(s.end-s.start),l[n]=(t.y-o.start)/(o.end-o.start),l}}At.Cartesian=ka;At.Rect=ka;function mr(r,t){return R(t)?t:r.invert(r.scale(t))}class de{constructor(t){var e=this;this.type="base",this.name=null,this.method=null,this.values=[],this.scales=[],this.linear=null;var a=null,i=this.callback;if(t.callback){var n=t.callback;a=function(){for(var o=arguments.length,l=new Array(o),h=0;h<o;h++)l[h]=arguments[h];var u=n(...l);return P(u)&&(u=i.apply(e,l)),u}}y(this,t),a&&y(this,{callback:a})}_getAttrValue(t,e){var a=this.values;if(t.isCategory&&!this.linear){var i=t.translate(e);return a[i%a.length]}var n=t.scale(e);return this.getLinearValue(n)}getLinearValue(t){var e=this.values,a=e.length-1,i=Math.floor(a*t),n=a*t-i,s=e[i],o=i===a?s:e[i+1],l=s+(o-s)*n;return l}callback(t){var e=this,a=e.scales[0],i=null;return a.type==="identity"?i=a.value:i=e._getAttrValue(a,t),i}getNames(){for(var t=this.scales,e=this.names,a=Math.min(t.length,e.length),i=[],n=0;n<a;n++)i.push(e[n]);return i}getFields(){var t=this.scales,e=[];return S(t,function(a){e.push(a.field)}),e}getScale(t){var e=this.scales,a=this.names,i=a.indexOf(t);return e[i]}mapping(){for(var t=this.scales,e=this.callback,a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];var s=i;if(e){for(var o=0,l=i.length;o<l;o++)i[o]=this._toOriginParam(i[o],t[o]);s=e.apply(this,i)}return s=[].concat(s),s}_toOriginParam(t,e){var a=t;if(!e.isLinear)if(I(t)){a=[];for(var i=0,n=t.length;i<n;i++)a.push(mr(e,t[i]))}else a=mr(e,t);return a}}class An extends de{constructor(t){super(t),this.names=["x","y"],this.type="position"}mapping(t,e){var a=this.scales,i=this.coord,n=a[0],s=a[1],o,l,h;if(P(t)||P(e))return[];if(I(e)&&I(t)){o=[],l=[];for(var u=0,f=0,c=t.length,g=e.length;u<c&&f<g;u++,f++)h=i.convertPoint({x:n.scale(t[u]),y:s.scale(e[f])}),o.push(h.x),l.push(h.y)}else if(I(e))t=n.scale(t),l=[],S(e,function(d){d=s.scale(d),h=i.convertPoint({x:t,y:d}),o&&o!==h.x?(I(o)||(o=[o]),o.push(h.x)):o=h.x,l.push(h.y)});else if(I(t))e=s.scale(e),o=[],S(t,function(d){d=n.scale(d),h=i.convertPoint({x:d,y:e}),l&&l!==h.y?(I(l)||(l=[l]),l.push(h.y)):l=h.y,o.push(h.x)});else{t=n.scale(t),e=s.scale(e);var v=i.convertPoint({x:t,y:e});o=v.x,l=v.y}return[o,l]}}let En=class extends de{constructor(t){super(t),this.names=["shape"],this.type="shape",this.gradient=null}getLinearValue(t){var e=this.values,a=Math.round((e.length-1)*t);return e[a]}};class kn extends de{constructor(t){super(t),this.names=["size"],this.type="size",this.gradient=null}}function Se(r,t,e,a){var i=r[a]+(t[a]-r[a])*e;return i}function Na(r){return"#"+Ce(r[0])+Ce(r[1])+Ce(r[2])}function Ce(r){return r=Math.round(r),r=r.toString(16),r.length===1&&(r="0"+r),r}function Nn(r,t){var e=r.length-1,a=Math.floor(e*t),i=e*t-a,n=r[a],s=a===e?n:r[a+1],o=Na([Se(n,s,i,0),Se(n,s,i,1),Se(n,s,i,2)]);return o}function On(r){var t=[];return t.push(parseInt(r.substr(1,2),16)),t.push(parseInt(r.substr(3,2),16)),t.push(parseInt(r.substr(5,2),16)),t}var Wt={black:"#000000",blue:"#0000ff",grey:"#808080",green:"#008000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",red:"#ff0000",white:"#ffffff",yellow:"#ffff00"};function Yn(r){if(Wt[r])return Wt[r];if(r[0]==="#"){if(r.length===7)return r;var t=r.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,i,n,s){return"#"+i+i+n+n+s+s});return Wt[r]=t,t}var e=r.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return e.shift(),e=Na(e),Wt[r]=e,e}function Fn(r){var t=[];return R(r)&&(r=r.split("-")),S(r,function(e){e.indexOf("#")===-1&&(e=Yn(e)),t.push(On(e))}),function(e){return Nn(t,e)}}class Ln extends de{constructor(t){super(t),this.names=["color"],this.type="color",this.gradient=null,R(this.values)&&(this.linear=!0)}getLinearValue(t){var e=this.gradient;if(!e){var a=this.values;e=Fn(a),this.gradient=e}return e(t)}}const Rn=Object.freeze(Object.defineProperty({__proto__:null,Color:Ln,Position:An,Shape:En,Size:kn},Symbol.toStringTag,{value:"Module"}));var Y={},Bn={_coord:null,draw(r,t){this.drawShape&&this.drawShape(r,t)},setCoord(r){this._coord=r},parsePoint(r){var t=this._coord;return t.isPolar&&(r.x===1&&(r.x=.9999999),r.y===1&&(r.y=.9999999)),t.convertPoint(r)},parsePoints(r){if(!r)return!1;var t=this,e=[];return r.forEach(function(a){e.push(t.parsePoint(a))}),e}},zn={defaultShapeType:null,setCoord(r){this._coord=r},getShape(r){var t=this;I(r)&&(r=r[0]);var e=t[r]||t[t.defaultShapeType];return e._coord=t._coord,e},getShapePoints(r,t){var e=this.getShape(r),a=e.getPoints||e.getShapePoints||this.getDefaultPoints,i=a(t);return i},getDefaultPoints(){return[]},drawShape(r,t,e){var a=this.getShape(r);return t.color||(t.color=T.colors[0]),a.draw(t,e)}};Y.registerFactory=function(r,t){var e=gt(r),a=y({},zn,t);return Y[e]=a,a.name=r,a};Y.registerShape=function(r,t,e){var a=gt(r),i=Y[a],n=y({},Bn,e);return i[t]=n,n};Y.registShape=Y.registerShape;Y.getShapeFactory=function(r){var t=this;r=r||"point";var e=gt(r);return t[e]};var Me,yr;function Gn(){if(yr)return Me;yr=1;function r(e,a){for(var i in a)a.hasOwnProperty(i)&&i!=="constructor"&&a[i]!==void 0&&(e[i]=a[i])}var t=function(a,i,n,s){return i&&r(a,i),n&&r(a,n),s&&r(a,s),a};return Me=t,Me}var Pe,xr;function pe(){if(xr)return Pe;xr=1;var r=Gn(),t=function(){var e=a.prototype;e._initDefaultCfg=function(){this.adjustNames=["x","y"]};function a(i){this._initDefaultCfg(),r(this,i)}return e.processAdjust=function(){},a}();return Pe=t,Pe}var Xn=pe();const _r=Ri(Xn);function Sr(r){var{type:t,values:e}=r;if(t==="linear")return vt(it.scale.linear,r);if(t==="cat")return vt(it.scale.cat,{values:e.slice(0,10).join(" ")});if(t==="timeCat"){var a=r.getText(e[0]),i=r.getText(e[e.length-1]);return vt(it.scale.timeCat,{start:a,end:i})}return""}function Hn(r,t,e){var{type:a}=r;return it.coord[a]?vt(it.coord[a],{xLabel:Sr(t),yLabel:Sr(e)}):""}function Cr(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,a)}return e}function Mr(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Cr(Object(e),!0).forEach(function(a){jn(r,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Cr(Object(e)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(e,a))})}return r}function jn(r,t,e){return t=Vn(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Vn(r){var t=qn(r,"string");return typeof t=="symbol"?t:String(t)}function qn(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var a=e.call(r,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var $n=["color","size","shape"],rt="_origin",Ut="_originY";function Pr(r){return I(r)?r:R(r)?r.split("*"):[r]}class H extends Ea{getDefaultCfg(){return{type:null,data:null,attrs:{},scales:{},container:null,styleOptions:null,chart:null,shapeType:"",generatePoints:!1,attrOptions:{},sortable:!1,startOnZero:!0,visible:!0,connectNulls:!1,ignoreEmptyGroup:!1,isInit:!1}}init(){var t=this,e=t.get("isInit");e||(t._initAttrs(),t._processData(),t.set("isInit",!0))}_getGroupScales(){var t=this,e=[];return S($n,function(a){var i=t.getAttr(a);if(i){var n=i.scales;S(n,function(s){s&&s.isCategory&&e.indexOf(s)===-1&&e.push(s)})}}),e}_groupData(t){var e=this,a=e.get("colDefs"),i=e._getGroupScales();if(i.length){var n={},s=[];return S(i,function(o){var l=o.field;s.push(l),a&&a[l]&&a[l].values&&(n[o.field]=a[l].values)}),un(t,s,n)}return[t]}_setAttrOptions(t,e){var a=this.get("attrOptions");a[t]=e;var i=this.get("attrs");Object.keys(i).length&&this._createAttr(t,e)}_createAttrOption(t,e,a,i){var n={};n.field=e,a?O(a)?n.callback=a:n.values=a:n.values=i,this._setAttrOptions(t,n)}_createAttr(t,e){var a=this,i=a.get("attrs"),n=a.get("coord"),s=gt(t),o=Pr(e.field);t==="position"&&(e.coord=n);for(var l=[],h=0,u=o.length;h<u;h++){var f=o[h],c=a._createScale(f);l.push(c)}if(t==="position"){var g=l[1];n.type==="polar"&&n.transposed&&a.hasAdjust("stack")&&g.values.length&&g.change({nice:!1,min:0,max:Math.max.apply(null,g.values)})}e.scales=l;var v=new Rn[s](e);return i[t]=v,v}_initAttrs(){var t=this,e=t.get("attrOptions");for(var a in e)e.hasOwnProperty(a)&&this._createAttr(a,e[a])}_createScale(t){var e=this.get("scales"),a=e[t];return a||(a=this.get("chart").createScale(t),e[t]=a),a}_processData(){var t=this,e=this.get("data"),a=[],i=this._groupData(e);if(this.get("ignoreEmptyGroup")){var n=this.getYScale();i=i.filter(function(u){return u.some(function(f){return typeof f[n.field]<"u"})})}for(var s=0,o=i.length;s<o;s++){var l=i[s],h=t._saveOrigin(l);this.hasAdjust("dodge")&&t._numberic(h),a.push(h)}return t.get("adjust")&&t._adjustData(a),t.get("sortable")&&t._sort(a),t.emit("afterprocessdata",{dataArray:a}),t.set("mappingData",a),t.set("dataArray",a),a}_saveOrigin(t){for(var e=[],a=0,i=t.length;a<i;a++){var n=t[a],s={};for(var o in n)s[o]=n[o];s[rt]=n,e.push(s)}return e}_numberic(t){for(var e=this.getAttr("position"),a=e.scales,i=0,n=t.length;i<n;i++)for(var s=t[i],o=Math.min(2,a.length),l=0;l<o;l++){var h=a[l];if(h.isCategory){var u=h.field;s[u]=h.translate(s[u])}}}_adjustData(t){var e=this,a=e.get("adjust");if(a){var i=gt(a.type);if(!_r[i])throw new Error("not support such adjust : "+a);var n=e.getXScale(),s=e.getYScale(),o=y({xField:n.field,yField:s.field},a),l=new _r[i](o);l.processAdjust(t),i==="Stack"&&e._updateStackRange(s.field,s,t)}}_updateStackRange(t,e,a){for(var i=on(a),n=e.min,s=e.max,o=0,l=i.length;o<l;o++){var h=i[o],u=Math.min.apply(null,h[t]),f=Math.max.apply(null,h[t]);u<n&&(n=u),f>s&&(s=f)}(n<e.min||s>e.max)&&e.change({min:n,max:s})}_sort(t){var e=this,a=e.getXScale(),{field:i,type:n}=a;n!=="identity"&&a.values.length>1&&S(t,function(s){s.sort(function(o,l){return n==="timeCat"?re(o[rt][i])-re(l[rt][i]):a.translate(o[rt][i])-a.translate(l[rt][i])})}),e.set("hasSorted",!0),e.set("dataArray",t)}paint(){var t=this,e=t.get("mappingData"),a=[],i=t.getShapeFactory();i.setCoord(t.get("coord")),t._beforeMapping(e);for(var n=0,s=e.length;n<s;n++){var o=e[n];if(o.length){var l=t._mapping(o);a.push(l),t.draw(l,i)}}t.set("dataArray",a),this.generateAria()}getShapeFactory(){var t=this.get("shapeFactory");if(!t){var e=this.get("shapeType");t=Y.getShapeFactory(e),this.set("shapeFactory",t)}return t}_mapping(t){var e=this,a=e.get("attrs"),i=e.getYScale().field,n={},s=new Array(t.length);for(var o in a)if(a.hasOwnProperty(o))for(var l=a[o],h=l.names,u=l.scales,f=0,c=t.length;f<c;f++){var g=t[f],v=Mr(Mr({},g),s[f]);if(v[Ut]=g[i],l.type==="position")for(var d=e._getAttrValues(l,g),p=0,m=d.length;p<m;p++){var x=d[p],C=h[p];v[C]=I(x)&&x.length===1?x[0]:x}else{var _=h[0],M=u[0].field,w=g[M],E="".concat(_).concat(w),b=n[E];b||(b=e._getAttrValues(l,g),n[E]=b),v[_]=b[0]}s[f]=v}return s}_getAttrValues(t,e){for(var a=t.scales,i=[],n=0,s=a.length;n<s;n++){var o=a[n],l=o.field;o.type==="identity"?i.push(o.value):i.push(e[l])}var h=t.mapping(...i);return h}getAttrValue(t,e){var a=this.getAttr(t),i=null;if(a){var n=this._getAttrValues(a,e);i=n[0]}return i}_beforeMapping(t){var e=this;e.get("generatePoints")&&e._generatePoints(t)}isInCircle(){var t=this.get("coord");return t&&t.isPolar}getCallbackCfg(t,e,a){if(!t)return e;var i={},n=t.map(function(s){return a[s]});return S(e,function(s,o){O(s)?i[o]=s.apply(null,n):i[o]=s}),i}getDrawCfg(t){var e=this,a=e.isInCircle(),i={origin:t,x:t.x,y:t.y,color:t.color,size:t.size,shape:t.shape,isInCircle:a,opacity:t.opacity},n=e.get("styleOptions");return n&&n.style&&(i.style=e.getCallbackCfg(n.fields,n.style,t[rt])),e.get("generatePoints")&&(i.points=t.points,i.nextPoints=t.nextPoints),a&&(i.center=e.get("coord").center),i}draw(t,e){var a=this,i=a.get("container"),n=a.getYScale();S(t,function(s,o){if(!(n&&P(s._origin[n.field]))){s.index=o;var l=a.getDrawCfg(s),h=s.shape;a.drawShape(h,s,l,i,e)}})}drawShape(t,e,a,i,n){var s=n.drawShape(t,a,i);s&&S([].concat(s),function(o){o.set("origin",e)})}_generatePoints(t){var e=this,a=e.getShapeFactory(),i=e.getAttr("shape");S(t,function(n){for(var s=0,o=n.length;s<o;s++){var l=n[s],h=e.createShapePointsCfg(l),u=i?e._getAttrValues(i,l):null,f=a.getShapePoints(u,h);l.points=f}}),S(t,function(n,s){var o=t[s+1];o&&(n[0].nextPoints=o[0].points)})}generateAria(){var t=this.get("container"),e=t.get("aria");if(e){var a=[],i=this.get("coord"),n=this.getXScale(),s=this.getYScale(),o=Hn(i,n,s);a.push(o);var{prefix:l,oneData:h,partData:u,allData:f}=it.geometry,c=this.get("dataArray"),g=c.length,v=this._getGroupScales()[0];if(v){var d=vt(l,{count:g});a.push(d),S(c,function(p,m){var x=p.length;if(x){var C=p[0]._origin;if(x===1)a.push(vt(h,{index:m+1,count:x,name:C[v.field],values:C[s.field]}));else{var _=x>5?u:f,M=p.slice(0,5).map(function(w){var{_origin:E}=w,b=n.getText(E[n.field]),F=s.getText(E[s.field]);return"".concat(b,":").concat(F)});a.push(vt(_,{index:m+1,count:x,part:3,name:C[v.field],values:M.join(" ")}))}}})}t.set("ariaLabel",a.join(""))}}createShapePointsCfg(t){var e=this.getXScale(),a=this.getYScale(),i=this._normalizeValues(t[e.field],e),n;return a?n=this._normalizeValues(t[a.field],a):n=t.y?t.y:.1,{x:i,y:n,y0:a?a.scale(this.getYMinValue()):void 0}}getYMinValue(){var t=this.getYScale(),{min:e,max:a}=t,i;return this.get("startOnZero")?a<=0&&e<=0?i=a:i=e>=0?e:0:i=e,i}_normalizeValues(t,e){var a=[];if(I(t))for(var i=0,n=t.length;i<n;i++){var s=t[i];a.push(e.scale(s))}else a=e.scale(t);return a}getAttr(t){return this.get("attrs")[t]}getXScale(){return this.getAttr("position").scales[0]}getYScale(){return this.getAttr("position").scales[1]}hasAdjust(t){return this.get("adjust")&&this.get("adjust").type===t}_getSnap(t,e,a){var i=0,n,s=this.getYScale().field;if(this.hasAdjust("stack")&&t.field===s){n=[],a.forEach(function(u){n.push(u[Ut])});for(var o=n.length;i<o&&!(n[0][0]>e);i++){if(n[n.length-1][1]<=e){i=n.length-1;break}if(n[i][0]<=e&&n[i][1]>e)break}}else{n=t.values,n.sort(function(u,f){return u-f});for(var l=n.length;i<l&&!(l<=1||(n[0]+n[1])/2>e||(n[i-1]+n[i])/2<=e&&(n[i+1]+n[i])/2>e);i++)if((n[n.length-2]+n[n.length-1])/2<=e){i=n.length-1;break}}var h=n[i];return h}getSnapRecords(t){var e=this,a=e.get("coord"),i=e.getXScale(),n=e.getYScale(),s=i.field,o=e.get("dataArray");this.get("hasSorted")||this._sort(o);var l=[],h=a.invertPoint(t),u=h.x;if(e.isInCircle()&&!a.transposed&&u>(1+i.rangeMax())/2&&(u=i.rangeMin()),i.isCategory){var f=i.rangeMin(),c=i.rangeMax();u<f&&(u=f),u>c&&(u=c)}var g=i.invert(u);i.isCategory||(g=e._getSnap(i,g));var v=[];if(o.forEach(function(p){p.forEach(function(m){var x=P(m[rt])?m[s]:m[rt][s];e._isEqual(x,g,i)&&v.push(m)})}),this.hasAdjust("stack")&&a.isPolar&&a.transposed){if(u>=0&&u<=1){var d=n.invert(h.y);d=e._getSnap(n,d,v),v.forEach(function(p){(I(d)?p[Ut].toString()===d.toString():p[Ut]===d)&&l.push(p)})}}else l=v;return l}getRecords(t){var e=this,a=this.getXScale(),i=this.get("dataArray"),n=a.field;return i.map(function(s){for(var o=s.length,l=o-1;l>=0;l--){var h=s[l],u=P(h[rt])?h[n]:h[rt][n];if(e._isEqual(u,t,a))return h}return null})}_isEqual(t,e,a){return a.type==="timeCat"?re(t)===e:e===t}position(t){return this._setAttrOptions("position",{field:t}),this}color(t,e){return this._createAttrOption("color",t,e,T.colors),this}size(t,e){return this._createAttrOption("size",t,e,T.sizes),this}shape(t,e){var a=this.get("type"),i=T.shapes[a]||[];return this._createAttrOption("shape",t,e,i),this}style(t,e){var a=this.get("styleOptions");a||(a={},this.set("styleOptions",a)),V(t)&&(e=t,t=null);var i;return t&&(i=Pr(t)),a.fields=i,a.style=e,this}adjust(t){return R(t)&&(t={type:t}),this.set("adjust",t),this}animate(t){return this.set("animateCfg",t),this}changeData(t){this.set("data",t),this.set("scales",{}),this.get("isInit")&&(this.set("isInit",!1),this.init())}clearInner(){var t=this.get("container");t&&t.clear()}reset(){this.set("isInit",!1),this.set("attrs",{}),this.set("attrOptions",{}),this.set("adjust",null),this.clearInner()}clear(){this.clearInner()}destroy(){this.set("isInit",!1),this.clear(),super.destroy()}_display(t){this.set("visible",t);var e=this.get("container"),a=e.get("canvas");e.set("visible",t),a.draw()}show(){this._display(!0)}hide(){this._display(!1)}}var Oa={};function Ya(r){return Oa[r]}function q(r,t){Oa[r]=t}var pt=function(){function r(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}return r.prototype.translate=function(t){return t},r.prototype.change=function(t){y(this.__cfg__,t),this.init()},r.prototype.clone=function(){return this.constructor(this.__cfg__)},r.prototype.getTicks=function(){var t=this;return sn(this.ticks,function(e,a){return V(e)?e:{text:t.getText(e,a),tickValue:e,value:t.scale(e)}})},r.prototype.getText=function(t,e){var a=this.formatter,i=a?a(t,e):t;return P(i)||!O(i.toString)?"":i.toString()},r.prototype.getConfig=function(t){return this.__cfg__[t]},r.prototype.init=function(){y(this,this.__cfg__),this.setDomain(),nn(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},r.prototype.initCfg=function(){},r.prototype.setDomain=function(){},r.prototype.calculateTicks=function(){var t=this.tickMethod,e=[];if(R(t)){var a=Ya(t);if(!a)throw new Error("There is no method to to calculate ticks!");e=a(this)}else O(t)&&(e=t(this));return e},r.prototype.rangeMin=function(){return this.range[0]},r.prototype.rangeMax=function(){return this.range[1]},r.prototype.calcPercent=function(t,e,a){return z(t)?(t-e)/(a-e):NaN},r.prototype.calcValue=function(t,e,a){return e+t*(a-e)},r}(),er=function(r){nt(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return t.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},t.prototype.translate=function(e){this.buildIndexMap();var a=this.translateIndexMap.get(e);return a===void 0&&(a=z(e)?e:NaN),a},t.prototype.scale=function(e){var a=this.translate(e),i=this.calcPercent(a,this.min,this.max);return this.calcValue(i,this.rangeMin(),this.rangeMax())},t.prototype.invert=function(e){var a=this.max-this.min,i=this.calcPercent(e,this.rangeMin(),this.rangeMax()),n=Math.round(a*i)+this.min;return n<this.min||n>this.max?NaN:this.values[n]},t.prototype.getText=function(e){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];var n=e;return z(e)&&!this.values.includes(e)&&(n=this.values[n]),r.prototype.getText.apply(this,xa([n],a))},t.prototype.initCfg=function(){this.tickMethod="cat"},t.prototype.setDomain=function(){if(P(this.getConfig("min"))&&(this.min=0),P(this.getConfig("max"))){var e=this.values.length;this.max=e>1?e-1:e}this.translateIndexMap&&(this.translateIndexMap=void 0)},t}(pt),Fa=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,ut="\\d\\d?",ht="\\d\\d",Wn="\\d{3}",Un="\\d{4}",Xt="[^\\s]+",La=/\[([^]*?)\]/gm;function Ra(r,t){for(var e=[],a=0,i=r.length;a<i;a++)e.push(r[a].substr(0,t));return e}var wr=function(r){return function(t,e){var a=e[r].map(function(n){return n.toLowerCase()}),i=a.indexOf(t.toLowerCase());return i>-1?i:null}};function dt(r){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var a=0,i=t;a<i.length;a++){var n=i[a];for(var s in n)r[s]=n[s]}return r}var Ba=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],za=["January","February","March","April","May","June","July","August","September","October","November","December"],Zn=Ra(za,3),Kn=Ra(Ba,3),rr={dayNamesShort:Kn,dayNames:Ba,monthNamesShort:Zn,monthNames:za,amPm:["am","pm"],DoFn:function(r){return r+["th","st","nd","rd"][r%10>3?0:(r-r%10!==10?1:0)*r%10]}},le=dt({},rr),Ga=function(r){return le=dt(le,r)},br=function(r){return r.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},X=function(r,t){for(t===void 0&&(t=2),r=String(r);r.length<t;)r="0"+r;return r},Jn={D:function(r){return String(r.getDate())},DD:function(r){return X(r.getDate())},Do:function(r,t){return t.DoFn(r.getDate())},d:function(r){return String(r.getDay())},dd:function(r){return X(r.getDay())},ddd:function(r,t){return t.dayNamesShort[r.getDay()]},dddd:function(r,t){return t.dayNames[r.getDay()]},M:function(r){return String(r.getMonth()+1)},MM:function(r){return X(r.getMonth()+1)},MMM:function(r,t){return t.monthNamesShort[r.getMonth()]},MMMM:function(r,t){return t.monthNames[r.getMonth()]},YY:function(r){return X(String(r.getFullYear()),4).substr(2)},YYYY:function(r){return X(r.getFullYear(),4)},h:function(r){return String(r.getHours()%12||12)},hh:function(r){return X(r.getHours()%12||12)},H:function(r){return String(r.getHours())},HH:function(r){return X(r.getHours())},m:function(r){return String(r.getMinutes())},mm:function(r){return X(r.getMinutes())},s:function(r){return String(r.getSeconds())},ss:function(r){return X(r.getSeconds())},S:function(r){return String(Math.round(r.getMilliseconds()/100))},SS:function(r){return X(Math.round(r.getMilliseconds()/10),2)},SSS:function(r){return X(r.getMilliseconds(),3)},a:function(r,t){return r.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(r,t){return r.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(r){var t=r.getTimezoneOffset();return(t>0?"-":"+")+X(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)},Z:function(r){var t=r.getTimezoneOffset();return(t>0?"-":"+")+X(Math.floor(Math.abs(t)/60),2)+":"+X(Math.abs(t)%60,2)}},Tr=function(r){return+r-1},Dr=[null,ut],Ir=[null,Xt],Ar=["isPm",Xt,function(r,t){var e=r.toLowerCase();return e===t.amPm[0]?0:e===t.amPm[1]?1:null}],Er=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(r){var t=(r+"").match(/([+-]|\d\d)/gi);if(t){var e=+t[1]*60+parseInt(t[2],10);return t[0]==="+"?e:-e}return 0}],Qn={D:["day",ut],DD:["day",ht],Do:["day",ut+Xt,function(r){return parseInt(r,10)}],M:["month",ut,Tr],MM:["month",ht,Tr],YY:["year",ht,function(r){var t=new Date,e=+(""+t.getFullYear()).substr(0,2);return+(""+(+r>68?e-1:e)+r)}],h:["hour",ut,void 0,"isPm"],hh:["hour",ht,void 0,"isPm"],H:["hour",ut],HH:["hour",ht],m:["minute",ut],mm:["minute",ht],s:["second",ut],ss:["second",ht],YYYY:["year",Un],S:["millisecond","\\d",function(r){return+r*100}],SS:["millisecond",ht,function(r){return+r*10}],SSS:["millisecond",Wn],d:Dr,dd:Dr,ddd:Ir,dddd:Ir,MMM:["month",Xt,wr("monthNamesShort")],MMMM:["month",Xt,wr("monthNames")],a:Ar,A:Ar,ZZ:Er,Z:Er},he={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Xa=function(r){return dt(he,r)},Ha=function(r,t,e){if(t===void 0&&(t=he.default),e===void 0&&(e={}),typeof r=="number"&&(r=new Date(r)),Object.prototype.toString.call(r)!=="[object Date]"||isNaN(r.getTime()))throw new Error("Invalid Date pass to format");t=he[t]||t;var a=[];t=t.replace(La,function(n,s){return a.push(s),"@@@"});var i=dt(dt({},le),e);return t=t.replace(Fa,function(n){return Jn[n](r,i)}),t.replace(/@@@/g,function(){return a.shift()})};function ja(r,t,e){if(e===void 0&&(e={}),typeof t!="string")throw new Error("Invalid format in fecha parse");if(t=he[t]||t,r.length>1e3)return null;var a=new Date,i={year:a.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},n=[],s=[],o=t.replace(La,function(_,M){return s.push(br(M)),"@@@"}),l={},h={};o=br(o).replace(Fa,function(_){var M=Qn[_],w=M[0],E=M[1],b=M[3];if(l[w])throw new Error("Invalid format. "+w+" specified twice in format");return l[w]=!0,b&&(h[b]=!0),n.push(M),"("+E+")"}),Object.keys(h).forEach(function(_){if(!l[_])throw new Error("Invalid format. "+_+" is required in specified format")}),o=o.replace(/@@@/g,function(){return s.shift()});var u=r.match(new RegExp(o,"i"));if(!u)return null;for(var f=dt(dt({},le),e),c=1;c<u.length;c++){var g=n[c-1],v=g[0],d=g[2],p=d?d(u[c],f):+u[c];if(p==null)return null;i[v]=p}i.isPm===1&&i.hour!=null&&+i.hour!=12?i.hour=+i.hour+12:i.isPm===0&&+i.hour==12&&(i.hour=0);var m;if(i.timezoneOffset==null){m=new Date(i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond);for(var x=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],c=0,C=x.length;c<C;c++)if(l[x[c][0]]&&i[x[c][0]]!==m[x[c][1]]())return null}else if(m=new Date(Date.UTC(i.year,i.month,i.day,i.hour,i.minute-i.timezoneOffset,i.second,i.millisecond)),i.month>11||i.month<0||i.day>31||i.day<1||i.hour>23||i.hour<0||i.minute>59||i.minute<0||i.second>59||i.second<0)return null;return m}var Va={format:Ha,parse:ja,defaultI18n:rr,setGlobalDateI18n:Ga,setGlobalDateMasks:Xa};const ts=Object.freeze(Object.defineProperty({__proto__:null,assign:dt,default:Va,defaultI18n:rr,format:Ha,parse:ja,setGlobalDateI18n:Ga,setGlobalDateMasks:Xa},Symbol.toStringTag,{value:"Module"}));function es(r){return function(t,e,a,i){for(var n=P(a)?0:a,s=P(i)?t.length:i;n<s;){var o=n+s>>>1;r(t[o])>e?s=o:n=o+1}return n}}var kr="format";function qa(r,t){var e=ts[kr]||Va[kr];return e(r,t)}function ue(r){return R(r)&&(r.indexOf("T")>0?r=new Date(r).getTime():r=new Date(r.replace(/-/gi,"/")).getTime()),Je(r)&&(r=r.getTime()),r}var J=1e3,St=60*J,Ct=60*St,ot=24*Ct,Ht=ot*31,Nr=ot*365,Yt=[["HH:mm:ss",J],["HH:mm:ss",J*10],["HH:mm:ss",J*30],["HH:mm",St],["HH:mm",St*10],["HH:mm",St*30],["HH",Ct],["HH",Ct*6],["HH",Ct*12],["YYYY-MM-DD",ot],["YYYY-MM-DD",ot*4],["YYYY-WW",ot*7],["YYYY-MM",Ht],["YYYY-MM",Ht*4],["YYYY-MM",Ht*6],["YYYY",ot*380]];function rs(r,t,e){var a=(t-r)/e,i=es(function(s){return s[1]})(Yt,a)-1,n=Yt[i];return i<0?n=Yt[0]:i>=Yt.length&&(n=tt(Yt)),n}var as=function(r){nt(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="timeCat",e}return t.prototype.translate=function(e){e=ue(e);var a=this.values.indexOf(e);return a===-1&&(z(e)&&e<this.values.length?a=e:a=NaN),a},t.prototype.getText=function(e,a){var i=this.translate(e);if(i>-1){var n=this.values[i],s=this.formatter;return n=s?s(n,a):qa(n,this.mask),n}return e},t.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},t.prototype.setDomain=function(){var e=this.values;S(e,function(a,i){e[i]=ue(a)}),e.sort(function(a,i){return a-i}),r.prototype.setDomain.call(this)},t}(er),me=function(r){nt(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.isContinuous=!0,e}return t.prototype.scale=function(e){if(P(e))return NaN;var a=this.rangeMin(),i=this.rangeMax(),n=this.max,s=this.min;if(n===s)return a;var o=this.getScalePercent(e);return a+o*(i-a)},t.prototype.init=function(){r.prototype.init.call(this);var e=this.ticks,a=ct(e),i=tt(e);a<this.min&&(this.min=a),i>this.max&&(this.max=i),P(this.minLimit)||(this.min=a),P(this.maxLimit)||(this.max=i)},t.prototype.setDomain=function(){var e=qi(this.values),a=e.min,i=e.max;P(this.min)&&(this.min=a),P(this.max)&&(this.max=i),this.min>this.max&&(this.min=a,this.max=i)},t.prototype.calculateTicks=function(){var e=this,a=r.prototype.calculateTicks.call(this);return this.nice||(a=Sa(a,function(i){return i>=e.min&&i<=e.max})),a},t.prototype.getScalePercent=function(e){var a=this.max,i=this.min;return(e-i)/(a-i)},t.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},t}(pt),$a=function(r){nt(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return t.prototype.invert=function(e){var a=this.getInvertPercent(e);return this.min+a*(this.max-this.min)},t.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},t}(me);function ft(r,t){var e=Math.E,a;return t>=0?a=Math.pow(e,Math.log(t)/r):a=Math.pow(e,Math.log(-t)/r)*-1,a}function $(r,t){return r===1?1:Math.log(t)/Math.log(r)}function Wa(r,t,e){P(e)&&(e=Math.max.apply(null,r));var a=e;return S(r,function(i){i>0&&i<a&&(a=i)}),a===e&&(a=e/t),a>1&&(a=1),a}var is=function(r){nt(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="log",e}return t.prototype.invert=function(e){var a=this.base,i=$(a,this.max),n=this.rangeMin(),s=this.rangeMax()-n,o,l=this.positiveMin;if(l){if(e===0)return 0;o=$(a,l/a);var h=1/(i-o)*s;if(e<h)return e/h*l}else o=$(a,this.min);var u=(e-n)/s,f=u*(i-o)+o;return Math.pow(a,f)},t.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},t.prototype.setDomain=function(){r.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");e===0&&(this.positiveMin=Wa(this.values,this.base,this.max))},t.prototype.getScalePercent=function(e){var a=this.max,i=this.min;if(a===i||e<=0)return 0;var n=this.base,s=this.positiveMin;s&&(i=s*1/n);var o;return e<s?o=e/s/($(n,a)-$(n,i)):o=($(n,e)-$(n,i))/($(n,a)-$(n,i)),o},t}(me),ns=function(r){nt(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="pow",e}return t.prototype.invert=function(e){var a=this.getInvertPercent(e),i=this.exponent,n=ft(i,this.max),s=ft(i,this.min),o=a*(n-s)+s,l=o>=0?1:-1;return Math.pow(o,i)*l},t.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},t.prototype.getScalePercent=function(e){var a=this.max,i=this.min;if(a===i)return 0;var n=this.exponent,s=(ft(n,e)-ft(n,i))/(ft(n,a)-ft(n,i));return s},t}(me),ss=function(r){nt(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="time",e}return t.prototype.getText=function(e,a){var i=this.translate(e),n=this.formatter;return n?n(i,a):qa(i,this.mask)},t.prototype.scale=function(e){var a=e;return(R(a)||Je(a))&&(a=this.translate(a)),r.prototype.scale.call(this,a)},t.prototype.translate=function(e){return ue(e)},t.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},t.prototype.setDomain=function(){var e=this.values,a=this.getConfig("min"),i=this.getConfig("max");if((!P(a)||!z(a))&&(this.min=this.translate(this.min)),(!P(i)||!z(i))&&(this.max=this.translate(this.max)),e&&e.length){var n=[],s=1/0,o=s,l=0;S(e,function(h){var u=ue(h);if(isNaN(u))throw new TypeError("Invalid Time: "+h+" in time scale!");s>u?(o=s,s=u):o>u&&(o=u),l<u&&(l=u),n.push(u)}),e.length>1&&(this.minTickInterval=o-s),P(a)&&(this.min=s),P(i)&&(this.max=l)}},t}($a),Ua=function(r){nt(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="quantize",e}return t.prototype.invert=function(e){var a=this.ticks,i=a.length,n=this.getInvertPercent(e),s=Math.floor(n*(i-1));if(s>=i-1)return tt(a);if(s<0)return ct(a);var o=a[s],l=a[s+1],h=s/(i-1),u=(s+1)/(i-1);return o+(n-h)/(u-h)*(l-o)},t.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},t.prototype.calculateTicks=function(){var e=r.prototype.calculateTicks.call(this);return this.nice||(tt(e)!==this.max&&e.push(this.max),ct(e)!==this.min&&e.unshift(this.min)),e},t.prototype.getScalePercent=function(e){var a=this.ticks;if(e<ct(a))return 0;if(e>tt(a))return 1;var i=0;return S(a,function(n,s){if(e>=n)i=s;else return!1}),i/(a.length-1)},t}(me),os=function(r){nt(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="quantile",e}return t.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},t}(Ua),Za={};function Et(r){return Za[r]}function st(r,t){if(Et(r))throw new Error("type '"+r+"' existed.");Za[r]=t}var ls=function(r){nt(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return t.prototype.calculateTicks=function(){return this.values},t.prototype.scale=function(e){return this.values[0]!==e&&z(e)?e:this.range[0]},t.prototype.invert=function(e){var a=this.range;return e<a[0]||e>a[1]?NaN:this.values[0]},t}(pt);function Ka(r){var t=r.values,e=r.tickInterval,a=r.tickCount,i=r.showLast;if(z(e)){var n=Sa(t,function(v,d){return d%e===0}),s=tt(t);return i&&tt(n)!==s&&n.push(s),n}var o=t.length,l=r.min,h=r.max;if(P(l)&&(l=0),P(h)&&(h=t.length-1),!z(a)||a>=o)return t.slice(l,h+1);if(a<=0||h<=0)return[];for(var u=a===1?o:Math.floor(o/(a-1)),f=[],c=l,g=0;g<a&&!(c>=h);g++)c=Math.min(l+g*u,h),g===a-1&&i?f.push(t[h]):f.push(t[c]);return f}function hs(r){var t=r.min,e=r.max,a=r.nice,i=r.tickCount,n=new us;return n.domain([t,e]),a&&n.nice(i),n.ticks(i)}var we=5,Or=Math.sqrt(50),Yr=Math.sqrt(10),Fr=Math.sqrt(2),us=function(){function r(){this._domain=[0,1]}return r.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},r.prototype.nice=function(t){var e,a;t===void 0&&(t=we);var i=this._domain.slice(),n=0,s=this._domain.length-1,o=this._domain[n],l=this._domain[s],h;return l<o&&(e=[l,o],o=e[0],l=e[1],a=[s,n],n=a[0],s=a[1]),h=ae(o,l,t),h>0?(o=Math.floor(o/h)*h,l=Math.ceil(l/h)*h,h=ae(o,l,t)):h<0&&(o=Math.ceil(o*h)/h,l=Math.floor(l*h)/h,h=ae(o,l,t)),h>0?(i[n]=Math.floor(o/h)*h,i[s]=Math.ceil(l/h)*h,this.domain(i)):h<0&&(i[n]=Math.ceil(o*h)/h,i[s]=Math.floor(l*h)/h,this.domain(i)),this},r.prototype.ticks=function(t){return t===void 0&&(t=we),fs(this._domain[0],this._domain[this._domain.length-1],t||we)},r}();function fs(r,t,e){var a,i=-1,n,s,o;if(t=+t,r=+r,e=+e,r===t&&e>0)return[r];if((a=t<r)&&(n=r,r=t,t=n),(o=ae(r,t,e))===0||!isFinite(o))return[];if(o>0)for(r=Math.ceil(r/o),t=Math.floor(t/o),s=new Array(n=Math.ceil(t-r+1));++i<n;)s[i]=(r+i)*o;else for(r=Math.floor(r*o),t=Math.ceil(t*o),s=new Array(n=Math.ceil(r-t+1));++i<n;)s[i]=(r-i)/o;return a&&s.reverse(),s}function ae(r,t,e){var a=(t-r)/Math.max(0,e),i=Math.floor(Math.log(a)/Math.LN10),n=a/Math.pow(10,i);return i>=0?(n>=Or?10:n>=Yr?5:n>=Fr?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(n>=Or?10:n>=Yr?5:n>=Fr?2:1)}function Lr(r,t,e){var a;return e==="ceil"?a=Math.ceil(r/t):e==="floor"?a=Math.floor(r/t):a=Math.round(r/t),a*t}function ar(r,t,e){var a=Lr(r,e,"floor"),i=Lr(t,e,"ceil");a=_e(a,e),i=_e(i,e);for(var n=[],s=Math.max((i-a)/(Math.pow(2,12)-1),e),o=a;o<=i;o=o+s){var l=_e(o,s);n.push(l)}return{min:a,max:i,ticks:n}}function ir(r,t,e){var a,i=r.minLimit,n=r.maxLimit,s=r.min,o=r.max,l=r.tickCount,h=l===void 0?5:l,u=P(i)?P(t)?s:t:i,f=P(n)?P(e)?o:e:n;if(u>f&&(a=[u,f],f=a[0],u=a[1]),h<=2)return[u,f];for(var c=(f-u)/(h-1),g=[],v=0;v<h;v++)g.push(u+c*v);return g}function cs(r){var t=r.min,e=r.max,a=r.tickInterval,i=r.minLimit,n=r.maxLimit,s=hs(r);return!P(i)||!P(n)?ir(r,ct(s),tt(s)):a?ar(t,e,a).ticks:s}function xt(r){return Math.abs(r)<1e-15?r:parseFloat(r.toFixed(15))}var vs=[1,5,2,2.5,4,3],Rr=Number.EPSILON*100;function gs(r,t){return(r%t+t)%t}function ds(r){return Math.round(r*1e12)/1e12}function ps(r,t,e,a,i,n){var s=wa(t),o=Pa(t,r),l=0,h=gs(a,n);return(h<Rr||n-h<Rr)&&a<=0&&i>=0&&(l=1),1-o/(s-1)-e+l}function ms(r,t,e){var a=wa(t),i=Pa(t,r),n=1;return 1-i/(a-1)-e+n}function ys(r,t,e,a,i,n){var s=(r-1)/(n-i),o=(t-1)/(Math.max(n,a)-Math.min(e,i));return 2-Math.max(s/o,o/s)}function xs(r,t){return r>=t?2-(r-1)/(t-1):1}function _s(r,t,e,a){var i=t-r;return 1-.5*(Math.pow(t-a,2)+Math.pow(r-e,2))/Math.pow(.1*i,2)}function Ss(r,t,e){var a=t-r;if(e>a){var i=(e-a)/2;return 1-Math.pow(i,2)/Math.pow(.1*a,2)}return 1}function Cs(){return 1}function Ms(r,t,e,a,i,n){e===void 0&&(e=5),a===void 0&&(a=!0),i===void 0&&(i=vs),n===void 0&&(n=[.25,.2,.5,.05]);var s=e<0?0:Math.round(e);if(Number.isNaN(r)||Number.isNaN(t)||typeof r!="number"||typeof t!="number"||!s)return{min:0,max:0,ticks:[]};if(t-r<1e-15||s===1)return{min:r,max:t,ticks:[r]};if(t-r>1e148){var o=e||5,l=(t-r)/o;return{min:r,max:t,ticks:Array(o).fill(null).map(function(ur,Li){return xt(r+l*Li)})}}for(var h={score:-2,lmin:0,lmax:0,lstep:0},u=1;u<1/0;){for(var f=0;f<i.length;f+=1){var c=i[f],g=ms(c,i,u);if(n[0]*g+n[1]+n[2]+n[3]<h.score){u=1/0;break}for(var v=2;v<1/0;){var d=xs(v,s);if(n[0]*g+n[1]+n[2]*d+n[3]<h.score)break;for(var p=(t-r)/(v+1)/u/c,m=Math.ceil(Math.log10(p));m<1/0;){var x=u*c*Math.pow(10,m),C=Ss(r,t,x*(v-1));if(n[0]*g+n[1]*C+n[2]*d+n[3]<h.score)break;var _=Math.floor(t/x)*u-(v-1)*u,M=Math.ceil(r/x)*u;if(_<=M)for(var o=M-_,w=0;w<=o;w+=1){var E=_+w,b=E*(x/u),F=b+x*(v-1),j=x,lt=ps(c,i,u,b,F,j),U=_s(r,t,b,F),Z=ys(v,s,r,t,b,F),K=Cs(),wt=n[0]*lt+n[1]*U+n[2]*Z+n[3]*K;wt>h.score&&(!a||b<=r&&F>=t)&&(h.lmin=b,h.lmax=F,h.lstep=j,h.score=wt)}m+=1}v+=1}}u+=1}var kt=xt(h.lmax),Nt=xt(h.lmin),Ot=xt(h.lstep),bt=Math.floor(ds((kt-Nt)/Ot))+1,et=new Array(bt);et[0]=xt(Nt);for(var f=1;f<bt;f++)et[f]=xt(et[f-1]+Ot);return{min:Math.min(r,ct(et)),max:Math.max(t,tt(et)),ticks:et}}function Ps(r){var t=r.min,e=r.max,a=r.tickCount,i=r.nice,n=r.tickInterval,s=r.minLimit,o=r.maxLimit,l=Ms(t,e,a,i).ticks;return!P(s)||!P(o)?ir(r,ct(l),tt(l)):n?ar(t,e,n).ticks:l}function ws(r){var t=r.base,e=r.tickCount,a=r.min,i=r.max,n=r.values,s,o=$(t,i);if(a>0)s=Math.floor($(t,a));else{var l=Wa(n,t,i);s=Math.floor($(t,l))}for(var h=o-s,u=Math.ceil(h/e),f=[],c=s;c<o+u;c=c+u)f.push(Math.pow(t,c));return a<=0&&f.unshift(0),f}function Ja(r,t,e){if(e===void 0&&(e=5),r===t)return{max:t,min:r,ticks:[r]};var a=e<0?0:Math.round(e);if(a===0)return{max:t,min:r,ticks:[]};var i=1.5,n=.5+1.5*i,s=t-r,o=s/a,l=Math.pow(10,Math.floor(Math.log10(o))),h=l;2*l-o<i*(o-h)&&(h=2*l,5*l-o<n*(o-h)&&(h=5*l,10*l-o<i*(o-h)&&(h=10*l)));for(var u=Math.ceil(t/h),f=Math.floor(r/h),c=Math.max(u*h,t),g=Math.min(f*h,r),v=Math.floor((c-g)/h)+1,d=new Array(v),p=0;p<v;p++)d[p]=xt(g+p*h);return{min:g,max:c,ticks:d}}function bs(r){var t=r.exponent,e=r.tickCount,a=Math.ceil(ft(t,r.max)),i=Math.floor(ft(t,r.min)),n=Ja(i,a,e).ticks;return n.map(function(s){var o=s>=0?1:-1;return Math.pow(s,t)*o})}function Ts(r,t){var e=r.length*t;return t===1?r[r.length-1]:t===0?r[0]:e%1!==0?r[Math.ceil(e)-1]:r.length%2===0?(r[e-1]+r[e])/2:r[e]}function Ds(r){var t=r.tickCount,e=r.values;if(!e||!e.length)return[];for(var a=e.slice().sort(function(o,l){return o-l}),i=[],n=0;n<t;n++){var s=n/(t-1);i.push(Ts(a,s))}return i}function Is(r){var t=r.min,e=r.max,a=r.tickCount,i=r.tickInterval,n=r.minLimit,s=r.maxLimit,o=Ja(t,e,a).ticks;return!P(n)||!P(s)?ir(r,ct(o),tt(o)):i?ar(t,e,i).ticks:o}function As(r){var t=r.min,e=r.max,a=r.minTickInterval,i=r.tickInterval,n=r.tickCount;if(i)n=Math.ceil((e-t)/i);else{i=rs(t,e,n)[1];var s=(e-t)/i,o=s/n;o>1&&(i=i*Math.ceil(o)),a&&i<a&&(i=a)}i=Math.max(Math.floor((e-t)/(Math.pow(2,12)-1)),i);for(var l=[],h=t;h<e+i;h+=i)l.push(h);return l}function Es(r){var t=Ka(Bi({showLast:!0},r));return t}function fe(r){return new Date(r).getFullYear()}function ks(r){return new Date(r,0,1).getTime()}function Ve(r){return new Date(r).getMonth()}function Ns(r,t){var e=fe(r),a=fe(t),i=Ve(r),n=Ve(t);return(a-e)*12+(n-i)%12}function Os(r,t){return new Date(r,t,1).getTime()}function Ys(r,t){return Math.ceil((t-r)/ot)}function Fs(r,t){return Math.ceil((t-r)/Ct)}function Ls(r,t){return Math.ceil((t-r)/(60*1e3))}function Rs(r){var t=r.min,e=r.max,a=r.minTickInterval,i=r.tickCount,n=r.tickInterval,s=[];n||(n=(e-t)/i,a&&n<a&&(n=a)),n=Math.max(Math.floor((e-t)/(Math.pow(2,12)-1)),n);var o=fe(t);if(n>Nr)for(var l=fe(e),h=Math.ceil(n/Nr),u=o;u<=l+h;u=u+h)s.push(ks(u));else if(n>Ht)for(var f=Math.ceil(n/Ht),c=Ve(t),g=Ns(t,e),u=0;u<=g+f;u=u+f)s.push(Os(o,u+c));else if(n>ot)for(var v=new Date(t),d=v.getFullYear(),p=v.getMonth(),m=v.getDate(),x=Math.ceil(n/ot),C=Ys(t,e),u=0;u<C+x;u=u+x)s.push(new Date(d,p,m+u).getTime());else if(n>Ct)for(var v=new Date(t),d=v.getFullYear(),p=v.getMonth(),x=v.getDate(),_=v.getHours(),M=Math.ceil(n/Ct),w=Fs(t,e),u=0;u<=w+M;u=u+M)s.push(new Date(d,p,x,_+u).getTime());else if(n>St)for(var E=Ls(t,e),b=Math.ceil(n/St),u=0;u<=E+b;u=u+b)s.push(t+u*St);else{var F=n;F<J&&(F=J);for(var j=Math.floor(t/J)*J,lt=Math.ceil((e-t)/J),U=Math.ceil(F/J),u=0;u<lt+U;u=u+U)s.push(j+u*J)}return s.length>=512&&console.warn("Notice: current ticks length("+s.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+n+") is too small, increase the value to solve the problem!"),s}q("cat",Ka);q("time-cat",Es);q("wilkinson-extended",Ps);q("r-pretty",Is);q("time",As);q("time-pretty",Rs);q("log",ws);q("pow",bs);q("quantile",Ds);q("d3-linear",cs);st("cat",er);st("category",er);st("identity",ls);st("linear",$a);st("log",is);st("pow",ns);st("time",ss);st("timeCat",as);st("quantize",Ua);st("quantile",os);const Qa=function(r){var{values:t,tickCount:e}=r;if(!e||t.length<=1)return t;for(var a=parseInt(t.length/(e-1))||1,i=[],n=0;n<t.length;n=n+a)i.push(t[n]);var s=t[t.length-1];return i[i.length-1]!==s&&(i.length>=e?i[i.length-1]=s:i.push(s)),i};var _t=[1,1.2,1.5,2,2.2,2.4,2.5,3,4,5,6,7.5,8,10],Bs=5;const zs=function(r){var{tickCount:t,tickInterval:e}=r||{},{min:a,max:i}=r||{};a=isNaN(a)?0:a,i=isNaN(i)?0:i;var n=t&&t>=2?t:Bs,s=e||Xs({tickCount:n,max:i,min:a}),o=Math.floor(a/s)*s;if(e){var l=Math.abs(Math.ceil((i-o)/e))+1;n=Math.max(n,l)}var h=[],u=0,f=qe(s);if(a<0&&i>0&&n===2)return[ie(o,f),ie(Math.ceil(i/s)*s,f)];for(;u<n;)h.push(ie(o+u*s,f)),u++;return h};var Gs=12;function Br(r){r=Math.abs(r);var t=1;if(r===0)return t;if(r<1){for(var e=0;r<1;)t=t/10,r=r*10,e++;return t.toString().length>Gs&&(t=parseFloat(t.toFixed(e))),t}for(;r>10;)t=t*10,r=r/10;return t}function Xs(r){var{tickCount:t,min:e,max:a}=r;if(e===a)return 1*Br(a);for(var i=(a-e)/(t-1),n=Br(i),s=i/n,o=a/n,l=e/n,h=0,u=0;u<_t.length;u++){var f=_t[u];if(s<=f){h=u;break}}var c=e<0&&a>0&&t===2?_t[h]:ti(h,t,l,o),g=qe(c)+qe(n);return ie(c*n,g)}function ti(r,t,e,a){for(var i=!1,n=_t[r],s=r;s<_t.length;s++)if(Hs({interval:_t[s],tickCount:t,max:a,min:e})){n=_t[s],i=!0;break}return i?n:10*ti(0,t,e/10,a/10)}function Hs(r){var{interval:t,tickCount:e,max:a,min:i}=r,n=Math.floor(i/t)*t;return n+(e-1)*t>=a}function qe(r){var t=r.toString(),e=t.indexOf("."),a=t.indexOf("e-"),i=a>=0?parseInt(t.substr(a+2),10):t.substr(e+1).length;return i>20&&(i=20),i}function ie(r,t){return parseFloat(r.toFixed(t))}var js=Et("linear"),Vs=Et("identity"),ei=Et("category"),qs=Et("timeCat");q("cat",Qa);q("time-cat",Qa);q("wilkinson-extended",zs);pt.Linear=js;pt.Identity=Vs;pt.Category=ei;pt.Cat=ei;pt.TimeCat=qs;function $s(r){if(!r.isPolar)return!1;var t=r.startAngle,e=r.endAngle;return!(!P(t)&&!P(e)&&e-t<Math.PI*2)}function zr(r){Object.keys(r).forEach(function(t){delete r[t]})}class Ws{constructor(t){this.defs={},this.scales={},y(this,t)}setFieldDef(t,e){var{defs:a}=this;V(t)?y(a,t):a[t]=e,this.updateScales()}_getDef(t){var e=this.defs,a=null;return(T.scales[t]||e[t])&&(a=y({},T.scales[t]),S(e[t],function(i,n){P(i)?delete a[n]:a[n]=i})),a}_getDefaultType(t,e,a){if(a&&a.type)return a.type;var i="linear",n=cr(e,t);return I(n)&&(n=n[0]),R(n)&&(i="cat"),i}_getScaleDef(t,e,a,i){var n;i&&i.values?n=i.values:n=ln(a,e);var s={field:e,values:n};if(t!=="cat"&&t!=="timeCat"){if(!i||!(i.min&&i.max)){var{min:o,max:l}=ba(n);s.min=o,s.max=l,s.nice=!0}}else s.isRounding=!1;return s}_adjustRange(t,e){var{range:a,values:i}=e;if(t==="linear"||a||!i)return e;var n=i.length;if(n===1)e.range=[.5,1];else{var{chart:s}=this,o=s.get("coord"),l=T.widthRatio.multiplePie,h=0;$s(o)?o.transposed?(h=1/n*l,e.range=[h/2,1-h/2]):e.range=[0,1-1/n]:(h=1/n*.5,e.range=[h,1-h])}return e}_getScaleCfg(t,e){var a=this,i=a._getDef(t);if(!e||!e.length)return i&&i.type?(i.field=t,{type:i.type,cfg:i}):{type:"identity",cfg:{value:t,field:t.toString(),values:[t]}};var n=e[0],s=n[t];if(s===null&&(s=cr(e,t)),z(t)||P(s)&&!i)return{type:"identity",cfg:{value:t,field:t.toString(),values:[t]}};var o=a._getDefaultType(t,e,i),l=a._getScaleDef(o,t,e,i);return i&&y(l,i),l=this._adjustRange(o,l),{type:o,cfg:l}}createScale(t,e){var{scales:a}=this,{type:i,cfg:n}=this._getScaleCfg(t,e),s=a[t];if(s&&s.type===i)return s.change(n),s;var o=Et(i),l=new o(n);return a[t]=l,l}_updateScale(t){var{field:e}=t,a=this.chart._getScaleData(e),{cfg:i}=this._getScaleCfg(e,a);t.change(i)}updateScales(){var t=this,{scales:e}=this;S(e,function(a){t._updateScale(a)})}adjustStartZero(t){var{defs:e}=this,{field:a,min:i,max:n}=t;e[a]&&e[a].min||(i>0?t.change({min:0}):n<0&&t.change({max:0}))}clear(){zr(this.defs),zr(this.scales),this.data=null}}class qt{_initDefaultCfg(){this.ticks=[],this.tickLine={},this.offsetFactor=1,this.frontContainer=null,this.backContainer=null,this.gridPoints=[]}constructor(t){this._initDefaultCfg(),y(this,t),this.draw()}draw(){var{line:t,tickLine:e,label:a,grid:i}=this;i&&this.drawGrid(i),e&&this.drawTicks(e),t&&this.drawLine(t),a&&this.drawLabels()}drawTicks(t){var e=this,a=e.ticks,i=t.length,n=e.getContainer(t.top);S(a,function(s){var o=e.getOffsetPoint(s.value),l=e.getSidePoint(o,i),h=n.addShape("line",{className:"axis-tick",attrs:y({x1:o.x,y1:o.y,x2:l.x,y2:l.y},t)});h._id=e._id+"-ticks"})}drawLabels(){var t=this,e=t.labelOffset,a=t.labels;S(a,function(i){var n=t.getContainer(i.get("top")),s=t.getOffsetPoint(i.get("value")),{x:o,y:l}=t.getSidePoint(s,e);i.attr(y({x:o,y:l},t.getTextAlignInfo(s,e),i.get("textStyle"))),i._id=t._id+"-"+i.attr("text"),n.add(i)})}drawLine(){}drawGrid(t){var e=this,{gridPoints:a,ticks:i}=e,n=t,s=a.length;S(a,function(o,l){if(O(t)){var h=i[l]||{},u=t(h.text,l,s);n=u?y({},T._defaultAxis.grid,u):null}if(n){var f=n.type,c=o.points,g=e.getContainer(n.top),v;if(f==="arc"){var{center:d,startAngle:p,endAngle:m}=e,x=D.length([c[0].x-d.x,c[0].y-d.y]);v=g.addShape("Arc",{className:"axis-grid",attrs:y({x:d.x,y:d.y,startAngle:p,endAngle:m,r:x},n)})}else v=g.addShape("Polyline",{className:"axis-grid",attrs:y({points:c},n)});v._id=o._id}})}getOffsetPoint(){}getAxisVector(){}getOffsetVector(t,e){var a=this,i=a.getAxisVector(t),n=D.normalize([],i),s=a.offsetFactor,o=[n[1]*-1*s,n[0]*s];return D.scale([],o,e)}getSidePoint(t,e){var a=this,i=a.getOffsetVector(t,e);return{x:t.x+i[0],y:t.y+i[1]}}getTextAlignInfo(t,e){var a=this,i=a.getOffsetVector(t,e),n,s;return i[0]>0?n="left":i[0]<0?n="right":n="center",i[1]>0?s="top":i[1]<0?s="bottom":s="middle",{textAlign:n,textBaseline:s}}getContainer(t){var{frontContainer:e,backContainer:a}=this;return t?e:a}}let Us=class extends qt{_initDefaultCfg(){super._initDefaultCfg(),this.start=null,this.end=null}getOffsetPoint(t){var{start:e,end:a}=this;return{x:e.x+(a.x-e.x)*t,y:e.y+(a.y-e.y)*t}}getAxisVector(){var{start:t,end:e}=this;return[e.x-t.x,e.y-t.y]}drawLine(t){var e=this.getContainer(t.top),{start:a,end:i}=this;e.addShape("line",{className:"axis-line",attrs:y({x1:a.x,y1:a.y,x2:i.x,y2:i.y},t)})}};qt.Line=Us;function Zs(r){var t=r.slice(0);if(t.length>0){var e=t[0],a=t[t.length-1];e.value!==0&&t.unshift({value:0}),a.value!==1&&t.push({value:1})}return t}class Ks{constructor(t){this.axisCfg={},this.frontPlot=null,this.backPlot=null,this.axes={},y(this,t)}_isHide(t){var e=this.axisCfg;return!e||e[t]===!1}_getLinePosition(t,e,a,i){var n="",s=t.field,o=this.axisCfg;return o[s]&&o[s].position?n=o[s].position:e==="x"?n=i?"left":"bottom":e==="y"&&(n=a?"right":"left",i&&(n="bottom")),n}_getLineCfg(t,e,a){var i,n,s=1;return e==="x"?(i={x:0,y:0},n={x:1,y:0}):a==="right"?(i={x:1,y:0},n={x:1,y:1}):(i={x:0,y:0},n={x:0,y:1},s=-1),t.transposed&&(s*=-1),{offsetFactor:s,start:t.convertPoint(i),end:t.convertPoint(n)}}_getCircleCfg(t){return{startAngle:t.startAngle,endAngle:t.endAngle,center:t.center,radius:t.circleRadius}}_getRadiusCfg(t){var e=t.transposed,a,i;return e?(a={x:0,y:0},i={x:1,y:0}):(a={x:0,y:0},i={x:0,y:1}),{offsetFactor:-1,start:t.convertPoint(a),end:t.convertPoint(i)}}_getAxisCfg(t,e,a,i,n){var s=this,o=this,l=this.axisCfg,h=e.getTicks(),u=L({ticks:h,frontContainer:this.frontPlot,backContainer:this.backPlot},n,l[e.field]),f=[],c=u.label,g=h.length,v=0,d=0,p=c;return S(h,function(m,x){if(O(c)){var C=c(m.text,x,g);p=C?y({},T._defaultAxis.label,C):null}if(p){var _={};p.textAlign&&(_.textAlign=p.textAlign),p.textBaseline&&(_.textBaseline=p.textBaseline);var M=p.top?s.frontPlot:s.backPlot,w=M.addShape("text",{className:"axis-label",aria:!1,attrs:y({x:0,y:0,text:m.text,fontFamily:o.chart.get("canvas").get("fontFamily")},p),value:m.value,textStyle:_,top:p.top,context:o.chart.get("canvas").get("context")});f.push(w);var{width:E,height:b}=w.getBBox();v=Math.max(v,E),d=Math.max(d,b)}}),u.labels=f,u.maxWidth=v,u.maxHeight=d,u}_createAxis(t,e,a,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",s=this,o=t.type,l=t.transposed,h,u,f;if(o==="cartesian"||o==="rect"){var c=s._getLinePosition(e,i,n,l);f=T.axis[c],f.position=c,h="Line",u=c}else i==="x"&&!l||i==="y"&&l?(f=T.axis.circle,h="Circle",u="circle"):(f=T.axis.radius,h="Line",u="radius");var g=s._getAxisCfg(t,e,a,i,f);g.type=h,g.dimType=i,g.verticalScale=a,g.index=n,this.axes[u]=g}createAxis(t,e,a){var i=this;e&&!i._isHide(e.field)&&i._createAxis(t,e,a[0],"x"),S(a,function(M,w){i._isHide(M.field)||i._createAxis(t,M,e,"y",w)});var n=this.axes,s=i.chart;if(s._isAutoPadding()){var o=W(s.get("padding")),l=W(s.get("appendPadding")),h=s.get("legendRange")||{top:0,right:0,bottom:0,left:0},u=[o[0]==="auto"?h.top+l[0]*2:o[0],o[1]==="auto"?h.right+l[1]:o[1],o[2]==="auto"?h.bottom+l[2]:o[2],o[3]==="auto"?h.left+l[3]:o[3]];if(t.isPolar){var f=n.circle;if(f){var{maxHeight:c,maxWidth:g,labelOffset:v}=f;u[0]+=c+v,u[1]+=g+v,u[2]+=c+v,u[3]+=g+v}}else{if(n.right&&o[1]==="auto"){var{maxWidth:d,labelOffset:p}=n.right;u[1]+=d+p}if(n.left&&o[3]==="auto"){var{maxWidth:m,labelOffset:x}=n.left;u[3]+=m+x}if(n.bottom&&o[2]==="auto"){var{maxHeight:C,labelOffset:_}=n.bottom;u[2]+=C+_}}s.set("_padding",u),s._updateLayout(u)}S(n,function(M){var{type:w,grid:E,verticalScale:b,ticks:F,dimType:j,position:lt,index:U}=M,Z;if(t.isPolar?w==="Line"?Z=i._getRadiusCfg(t):w==="Circle"&&(Z=i._getCircleCfg(t)):Z=i._getLineCfg(t,j,lt),E&&b){var K=[],wt=Zs(b.getTicks());S(F,function(kt){var Nt=[];S(wt,function(Ot){var bt=j==="x"?kt.value:Ot.value,et=j==="x"?Ot.value:kt.value;if(bt>=0&&bt<=1&&et>=0&&et<=1){var ur=t.convertPoint({x:bt,y:et});Nt.push(ur)}}),K.push({points:Nt,_id:"axis-"+j+U+"-grid-"+kt.tickValue})}),M.gridPoints=K,t.isPolar&&(M.center=t.center,M.startAngle=t.startAngle,M.endAngle=t.endAngle)}Z._id="axis-"+j,P(U)||(Z._id="axis-"+j+U),new qt[w](y(M,Z))})}clear(){this.axes={},this.frontPlot.clear(),this.backPlot.clear()}}function Ft(r,t,e){return t=Js(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Js(r){var t=Qs(r,"string");return typeof t=="symbol"?t:String(t)}function Qs(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var a=e.call(r,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var Gr=function(t,e){var a=e.x-t.x,i=e.y-t.y;return Math.abs(a)>Math.abs(i)?a>0?"right":"left":i>0?"down":"up"},Zt=function(t,e){var a=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return Math.sqrt(a*a+i*i)},to=function(t,e){var a=t.x+(e.x-t.x)/2,i=t.y+(e.y-t.y)/2;return{x:a,y:i}},Xr=250;class eo{constructor(t){var e=this,{canvas:a,el:i}=t;Ft(this,"_click",function(n){var s=Rt(n,e.canvas);n.points=s,e.emitEvent("click",n)}),Ft(this,"_start",function(n){var s=Rt(n,e.canvas);s&&(n.points=s,e.emitEvent("touchstart",n),e.reset(),e.startTime=Date.now(),e.startPoints=s,s.length>1?(e.startDistance=Zt(s[0],s[1]),e.center=to(s[0],s[1])):e.pressTimeout=setTimeout(function(){var o="press",l="none";n.direction=l,e.emitStart(o,n),e.emitEvent(o,n),e.eventType=o,e.direction=l},Xr))}),Ft(this,"_move",function(n){var s=Rt(n,e.canvas);if(s){e.clearPressTimeout(),n.points=s,e.emitEvent("touchmove",n);var o=e.startPoints;if(o)if(s.length>1){var l=e.startDistance,h=Zt(s[0],s[1]);n.zoom=h/l,n.center=e.center,e.emitStart("pinch",n),e.emitEvent("pinch",n)}else{var u=s[0].x-o[0].x,f=s[0].y-o[0].y,c=e.direction||Gr(o[0],s[0]);e.direction=c;var g=e.getEventType(s);n.direction=c,n.deltaX=u,n.deltaY=f,e.emitStart(g,n),e.emitEvent(g,n);var v=e.lastMoveTime,d=Date.now();d-v>0&&(e.prevMoveTime=v,e.prevMovePoints=e.lastMovePoints,e.lastMoveTime=d,e.lastMovePoints=s)}}}),Ft(this,"_end",function(n){var s=Rt(n,e.canvas);n.points=s,e.emitEnd(n),e.emitEvent("touchend",n);var o=e.lastMoveTime,l=Date.now();if(l-o<100){var h=e.prevMoveTime||e.startTime,u=o-h;if(u>0){var f=e.prevMovePoints||e.startPoints,c=e.lastMovePoints,g=Zt(f[0],c[0])/u;g>.3&&(n.velocity=g,n.direction=Gr(f[0],c[0]),e.emitEvent("swipe",n))}}e.reset();var v=n.touches;v&&v.length>0&&e._start(n)}),Ft(this,"_cancel",function(n){e.emitEvent("touchcancel",n),e.reset()}),this.canvas=a,this.delegateEvent(i),this.processEvent={}}delegateEvent(t){t.addEventListener("click",this._click),t.addEventListener("touchstart",this._start),t.addEventListener("touchmove",this._move),t.addEventListener("touchend",this._end),t.addEventListener("touchcancel",this._cancel)}emitEvent(t,e){var a=this.canvas;a.emit(t,e)}getEventType(t){var{eventType:e,canvas:a,startTime:i,startPoints:n}=this;if(e)return e;var s,o=a.__events.pan;if(!o||!o.length)s="press";else{var l=Date.now();l-i>Xr&&Zt(n[0],t[0])<10?s="press":s="pan"}return this.eventType=s,s}enable(t){this.processEvent[t]=!0}isProcess(t){return this.processEvent[t]}emitStart(t,e){this.isProcess(t)||(this.enable(t),this.emitEvent("".concat(t,"start"),e))}emitEnd(t){var e=this,a=this.processEvent;Object.keys(a).forEach(function(i){e.emitEvent("".concat(i,"end"),t),delete a[i]})}clearPressTimeout(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=0)}reset(){this.clearPressTimeout(),this.startTime=0,this.startPoints=null,this.startDistance=0,this.direction=null,this.eventType=null,this.pinch=!1,this.prevMoveTime=0,this.prevMovePoints=null,this.lastMoveTime=0,this.lastMovePoints=null}}class ro extends tr{constructor(t){super(),this.context=t,this.width=0,this.height=0,this.style={},this.currentStyle={},this.attrs={},this.isCanvasElement=!0}getContext(){return this.context}getBoundingClientRect(){var t=this.width,e=this.height;return{top:0,right:t,bottom:e,left:0}}setAttribute(t,e){this.attrs[t]=e}addEventListener(t,e){this.on(t,e)}removeEventListener(t,e){this.off(t,e)}dispatchEvent(t,e){this.emit(t,e)}}function ao(r){if(!r||r.nodeType!==1||!r.nodeName||r.nodeName.toLowerCase()!=="canvas")return!1;var t=!1;try{r.addEventListener("eventTest",function(){t=!0}),r.dispatchEvent(new Event("eventTest"))}catch{t=!1}return t}const io={create(r){return r?ao(r.canvas)?r.canvas:new ro(r):null}};function no(r,t){return(r%t+t)%t}function ri(r,t){S(r,function(e){e=e.split(":"),t.addColorStop(Number(e[0]),e[1])})}function so(r,t,e){var a=r.split(" "),i=a[0].slice(2,a[0].length-1);i=no(parseFloat(i)*Math.PI/180,Math.PI*2);var n=a.slice(1),{minX:s,minY:o,maxX:l,maxY:h}=t.getBBox(),u,f;i>=0&&i<.5*Math.PI?(u={x:s,y:o},f={x:l,y:h}):.5*Math.PI<=i&&i<Math.PI?(u={x:l,y:o},f={x:s,y:h}):Math.PI<=i&&i<1.5*Math.PI?(u={x:l,y:h},f={x:s,y:o}):(u={x:s,y:h},f={x:l,y:o});var c=Math.tan(i),g=c*c,v=(f.x-u.x+c*(f.y-u.y))/(g+1)+u.x,d=c*(f.x-u.x+c*(f.y-u.y))/(g+1)+u.y,p=e.createLinearGradient(u.x,u.y,v,d);return ri(n,p),p}function oo(r,t,e){var a=r.split(" "),i=a[0].slice(2,a[0].length-1);i=i.split(",");var n=parseFloat(i[0]),s=parseFloat(i[1]),o=parseFloat(i[2]),l=a.slice(1);if(o===0){var h=l[l.length-1];return h.split(":")[1]}var{width:u,height:f,minX:c,minY:g}=t.getBBox(),v=Math.sqrt(u*u+f*f)/2,d=e.createRadialGradient(c+u*n,g+f*s,o*v,c+u/2,g+f/2,v);return ri(l,d),d}function lo(r,t,e){if(r[1]==="(")try{var a=r[0];if(a==="l")return so(r,t,e);if(a==="r")return oo(r,t,e)}catch(i){console.error("error in parsing gradient string, please check if there are any extra whitespaces."),console.error(i)}return r}var ho={stroke:"strokeStyle",fill:"fillStyle",opacity:"globalAlpha"},uo=["fillStyle","font","globalAlpha","lineCap","lineWidth","lineJoin","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","lineDash","shadow"],fo=["circle","sector","polygon","rect","polyline"];class ai{_initProperties(){this._attrs={zIndex:0,visible:!0,destroyed:!1}}constructor(t){this._initProperties(),y(this._attrs,t);var e=this._attrs.attrs;e&&this.initAttrs(e),this.initTransform()}get(t){return this._attrs[t]}set(t,e){this._attrs[t]=e}isGroup(){return this.get("isGroup")}isShape(){return this.get("isShape")}initAttrs(t){this.attr(y(this.getDefaultAttrs(),t))}getDefaultAttrs(){return{}}_setAttr(t,e){var a=this._attrs.attrs;if(t==="clip")e=this._setAttrClip(e);else{var i=ho[t];i&&(a[i]=e)}a[t]=e}_getAttr(t){return this._attrs.attrs[t]}_setAttrClip(t){return t&&fo.indexOf(t._attrs.type)>-1?(t.get("canvas")===null&&(t=Object.assign({},t)),t.set("parent",this.get("parent")),t.set("context",this.get("context")),t):null}attr(t,e){var a=this;if(a.get("destroyed"))return null;var i=arguments.length;if(i===0)return a._attrs.attrs;if(V(t)){this._attrs.bbox=null;for(var n in t)a._setAttr(n,t[n]);return a._afterAttrsSet&&a._afterAttrsSet(),a}return i===2?(this._attrs.bbox=null,a._setAttr(t,e),a._afterAttrsSet&&a._afterAttrsSet(),a):a._getAttr(t)}getParent(){return this.get("parent")}draw(t){this.get("destroyed")||this.get("visible")&&(this.setContext(t),this.drawInner(t),this.restoreContext(t))}setContext(t){var e=this._attrs.attrs.clip;t.save(),e&&(e.resetTransform(t),e.createPath(t),t.clip()),this.resetContext(t),this.resetTransform(t)}restoreContext(t){t.restore()}resetContext(t){var e=this._attrs.attrs;for(var a in e)if(uo.indexOf(a)>-1){var i=e[a];(a==="fillStyle"||a==="strokeStyle")&&i&&(i=lo(i,this,t)),a==="lineDash"&&t.setLineDash&&I(i)?t.setLineDash(i):t[a]=i}}hasFill(){return this.get("canFill")&&this._attrs.attrs.fillStyle}hasStroke(){return this.get("canStroke")&&this._attrs.attrs.strokeStyle}drawInner(){}show(){return this.set("visible",!0),this}hide(){return this.set("visible",!1),this}isVisible(){return this.get("visible")}getAriaLabel(){var{destroyed:t,visible:e,isShape:a,aria:i}=this._attrs;if(!(t||!e||a&&!i))return this._getAriaLabel()}_getAriaLabel(){return this._attrs.ariaLabel}_removeFromParent(){var t=this.get("parent");if(t){var e=t.get("children");Qe(e,this)}return this}remove(t){t?this.destroy():this._removeFromParent()}destroy(){var t=this.get("destroyed");if(t)return null;this._removeFromParent(),this._attrs={},this.set("destroyed",!0)}getBBox(){return{minX:0,maxX:0,minY:0,maxY:0,width:0,height:0}}initTransform(){var t=this._attrs.attrs||{};t.matrix||(t.matrix=[1,0,0,1,0,0]),this._attrs.attrs=t}getMatrix(){return this._attrs.attrs.matrix}setMatrix(t){this._attrs.attrs.matrix=[t[0],t[1],t[2],t[3],t[4],t[5]]}transform(t){var e=this._attrs.attrs.matrix;return this._attrs.attrs.matrix=B.transform(e,t),this}setTransform(t){return this._attrs.attrs.matrix=[1,0,0,1,0,0],this.transform(t)}translate(t,e){var a=this._attrs.attrs.matrix;B.translate(a,a,[t,e])}rotate(t){var e=this._attrs.attrs.matrix;B.rotate(e,e,t)}scale(t,e){var a=this._attrs.attrs.matrix;B.scale(a,a,[t,e])}moveTo(t,e){var a=this._attrs.x||0,i=this._attrs.y||0;this.translate(t-a,e-i),this.set("x",t),this.set("y",e)}apply(t){var e=this._attrs.attrs.matrix;return D.transformMat2d(t,t,e),this}resetTransform(t){var e=this._attrs.attrs.matrix;B.isChanged(e)&&t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}isDestroyed(){return this.get("destroyed")}}class N extends ai{_initProperties(){this._attrs={zIndex:0,visible:!0,destroyed:!1,isShape:!0,attrs:{}}}getType(){return this._attrs.type}drawInner(t){var e=this,a=e.get("attrs");e.createPath(t);var i=t.globalAlpha;if(e.hasFill()){var n=a.fillOpacity;!P(n)&&n!==1?(t.globalAlpha=n,t.fill(),t.globalAlpha=i):t.fill()}if(e.hasStroke()){var s=a.lineWidth;if(s>0){var o=a.strokeOpacity;!P(o)&&o!==1&&(t.globalAlpha=o),t.stroke()}}}getBBox(){var t=this._attrs.bbox;return t||(t=this.calculateBox(),t&&(t.x=t.minX,t.y=t.minY,t.width=t.maxX-t.minX,t.height=t.maxY-t.minY),this._attrs.bbox=t),t}calculateBox(){return null}createPath(){}}function co(r,t,e){if(r=W(r),!r[0]&&!r[1]&&!r[2]&&!r[3])return r;var a=Math.max(r[0]+r[1],r[2]+r[3]),i=Math.max(r[0]+r[3],r[1]+r[2]),n=Math.min(t/a,e/i);return n<1?r.map(function(s){return s*n}):r}let nr=class extends N{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="rect"}getDefaultAttrs(){return{x:0,y:0,width:0,height:0,radius:0,lineWidth:0}}createRadiusPath(t,e,a,i,n,s){s=co(s,i,n),t.moveTo(e+s[0],a),t.lineTo(e+i-s[1],a),t.arc(e+i-s[1],a+s[1],s[1],-Math.PI/2,0,!1),t.lineTo(e+i,a+n-s[2]),t.arc(e+i-s[2],a+n-s[2],s[2],0,Math.PI/2,!1),t.lineTo(e+s[3],a+n),t.arc(e+s[3],a+n-s[3],s[3],Math.PI/2,Math.PI,!1),t.lineTo(e,a+s[0]),t.arc(e+s[0],a+s[0],s[0],Math.PI,Math.PI*3/2,!1),t.closePath()}createPath(t){var e=this,a=e.get("attrs"),{x:i,y:n,width:s,height:o,radius:l}=a;t.beginPath(),!l||!(s*o)?t.rect(i,n,s,o):this.createRadiusPath(t,i,n,s,o,l)}calculateBox(){var t=this.get("attrs"),{x:e,y:a,width:i,height:n}=t;return{minX:e,minY:a,maxX:e+i,maxY:a+n}}};var be={};class vo extends nr{_initProperties(){super._initProperties(),this._attrs.canFill=!1,this._attrs.canStroke=!1,this._attrs.loading=!1,this._attrs.image=null,this._attrs.type="image"}draw(t){var e=this;if(!this.get("loading")){var a=this.get("image");if(a){super.draw(t);return}var i=this.get("attrs"),{src:n}=i;if(n&&window.Image){var s=this.get("cacheImage");if(s&&be[n]){this.set("image",be[n]),this.draw(t);return}this.set("loading",!0);var o=new Image;o.crossOrigin="",o.onload=function(){e.set("loading",!1),e.set("image",o),e.draw(t)},o.src=n,s&&(be[n]=o)}}}createPath(t){var e=this.get("image");this.drawImage(t,e)}drawImage(t,e){var{attrs:a,destroyed:i}=this._attrs;if(!i){var{x:n,y:s,width:o,height:l,sx:h,sy:u,swidth:f,sheight:c,radius:g,fillOpacity:v}=a;g&&(t.save(),this.createRadiusPath(t,n,s,o,l,g),t.clip());var d=t.globalAlpha;P(v)||(t.globalAlpha=v),!P(h)&&!P(u)&&!P(f)&&!P(c)?t.drawImage(e,h,u,f,c,n,s,o,l):t.drawImage(e,n,s,o,l),t.globalAlpha=d,g&&t.restore()}}}let go=class extends N{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="circle"}getDefaultAttrs(){return{x:0,y:0,r:0,lineWidth:0}}createPath(t){var e=this.get("attrs"),{x:a,y:i,r:n}=e;t.beginPath(),t.arc(a,i,n,0,Math.PI*2,!1),t.closePath()}calculateBox(){var t=this.get("attrs"),{x:e,y:a,r:i}=t;return{minX:e-i,maxX:e+i,minY:a-i,maxY:a+i}}};var Kt=D.create(),Jt=D.create(),Qt=D.create();function po(r,t,e,a,i){var n=Hr(i,r.x,t.x,e.x,a.x),s=Hr(i,r.y,t.y,e.y,a.y);return{x:n,y:s}}function Hr(r,t,e,a,i){var n=r*r,s=n*r;return t+(-t*3+r*(3*t-t*r))*r+(3*e+r*(-6*e+e*3*r))*r+(a*3-a*3*r)*n+i*s}function mo(r){for(var t=1/0,e=-1/0,a=1/0,i=-1/0,n={x:r[0],y:r[1]},s={x:r[2],y:r[3]},o={x:r[4],y:r[5]},l={x:r[6],y:r[7]},h=0;h<100;h++){var u=po(n,s,o,l,h/100);u.x<t&&(t=u.x),u.x>e&&(e=u.x),u.y<a&&(a=u.y),u.y>i&&(i=u.y)}return{minX:t,minY:a,maxX:e,maxY:i}}function ce(r,t){if(r.length!==0){for(var e=r[0],a=e.x,i=e.x,n=e.y,s=e.y,o=r.length,l=1;l<o;l++)e=r[l],a=Math.min(a,e.x),i=Math.max(i,e.x),n=Math.min(n,e.y),s=Math.max(s,e.y);return t=t/2||0,{minX:a-t,minY:n-t,maxX:i+t,maxY:s+t}}}function yo(r,t,e,a,i){return i=i/2||0,{minX:Math.min(r,e)-i,minY:Math.min(t,a)-i,maxX:Math.max(r,e)+i,maxY:Math.max(t,a)+i}}function $e(r,t,e,a,i,n){var s=Math.abs(a-i);if(s%(Math.PI*2)<1e-4&&s>1e-4)return{minX:r-e,minY:t-e,maxX:r+e,maxY:t+e};Kt[0]=Math.cos(a)*e+r,Kt[1]=Math.sin(a)*e+t,Jt[0]=Math.cos(i)*e+r,Jt[1]=Math.sin(i)*e+t;var o=[0,0],l=[0,0];if(D.min(o,Kt,Jt),D.max(l,Kt,Jt),a=a%(Math.PI*2),a<0&&(a=a+Math.PI*2),i=i%(Math.PI*2),i<0&&(i=i+Math.PI*2),a>i&&!n?i+=Math.PI*2:a<i&&n&&(a+=Math.PI*2),n){var h=i;i=a,a=h}for(var u=0;u<i;u+=Math.PI/2)u>a&&(Qt[0]=Math.cos(u)*e+r,Qt[1]=Math.sin(u)*e+t,D.min(o,Qt,o),D.max(l,Qt,l));return{minX:o[0],minY:o[1],maxX:l[0],maxY:l[1]}}function xo(r,t){for(var e=1/0,a=-1/0,i=1/0,n=-1/0,s=0,o=r.length;s<o;s++){var l=mo(r[s]);l.minX<e&&(e=l.minX),l.maxX>a&&(a=l.maxX),l.minY<i&&(i=l.minY),l.maxY>n&&(n=l.maxY)}return t=t/2||0,{minX:e-t,minY:i-t,maxX:a+t,maxY:n+t}}let _o=class extends N{_initProperties(){super._initProperties(),this._attrs.canStroke=!0,this._attrs.type="line"}getDefaultAttrs(){return{x1:0,y1:0,x2:0,y2:0,lineWidth:1}}createPath(t){var e=this.get("attrs"),{x1:a,y1:i,x2:n,y2:s}=e;t.beginPath(),t.moveTo(a,i),t.lineTo(n,s)}calculateBox(){var t=this.get("attrs"),{x1:e,y1:a,x2:i,y2:n,lineWidth:s}=t;return yo(e,a,i,n,s)}},So=class extends N{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="polygon"}getDefaultAttrs(){return{points:null,lineWidth:0}}createPath(t){var e=this,a=e.get("attrs"),i=a.points;t.beginPath();for(var n=0,s=i.length;n<s;n++){var o=i[n];n===0?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y)}t.closePath()}calculateBox(){var t=this.get("attrs"),{points:e}=t;return ce(e)}};function te(r){return[r.x,r.y]}function Co(r,t,e,a){var i=[],n,s,o=!!a,l,h,u,f,c,g;if(o){for(l=[1/0,1/0],h=[-1/0,-1/0],g=0,c=r.length;g<c;g++)u=te(r[g]),D.min(l,l,u),D.max(h,h,u);D.min(l,l,a[0]),D.max(h,h,a[1])}for(g=0,f=r.length;g<f;g++){if(u=te(r[g]),g===0||g===f-1){i.push([u[0],u[1]]);continue}else n=te(r[g-1]),s=te(r[g+1]);var v=D.sub([],s,n);D.scale(v,v,t);var d=D.distance(u,n),p=D.distance(u,s),m=d+p;m!==0&&(d/=m,p/=m);var x=D.scale([],v,-d),C=D.scale([],v,p),_=D.add([],u,x),M=D.add([],u,C);o&&(D.max(_,_,l),D.min(_,_,h),D.max(M,M,l),D.min(M,M,h)),i.push([_[0],_[1]]),i.push([M[0],M[1]])}return i}function ve(r,t,e){for(var a=!1,i=Co(r,.4,a,e),n=r.length,s=[],o,l,h,u=0;u<n-1;u++)o=i[u*2],l=i[u*2+1],h=r[u+1],s.push(["C",o[0],o[1],l[0],l[1],h.x,h.y]);return s}function jr(r){for(var t=[],e=0,a=r.length;e<a;e++){var i=r[e];!isNaN(i.x)&&!isNaN(i.y)&&t.push(i)}return t}class Mo extends N{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="polyline"}getDefaultAttrs(){return{points:null,lineWidth:1,smooth:!1}}createPath(t){var e=this,a=e.get("attrs"),{points:i,smooth:n}=a,s=jr(i);if(t.beginPath(),s.length)if(t.moveTo(s[0].x,s[0].y),n)for(var o=[[0,0],[1,1]],l=ve(s,!1,o),h=0,u=l.length;h<u;h++){var f=l[h];t.bezierCurveTo(f[1],f[2],f[3],f[4],f[5],f[6])}else{var c,g;for(c=1,g=s.length-1;c<g;c++)t.lineTo(s[c].x,s[c].y);t.lineTo(s[g].x,s[g].y)}}calculateBox(){var t=this.get("attrs"),{points:e,smooth:a,lineWidth:i}=t,n=jr(e);if(n.length<=1)return ce(n,i);if(a){for(var s=[],o=[[0,0],[1,1]],l=ve(n,!1,o),h=0,u=l.length;h<u;h++){var f=l[h];if(h===0)s.push([n[0].x,n[0].y,f[1],f[2],f[3],f[4],f[5],f[6]]);else{var c=l[h-1];s.push([c[5],c[6],f[1],f[2],f[3],f[4],f[5],f[6]])}}return xo(s,i)}return ce(n,i)}}let Po=class extends N{_initProperties(){super._initProperties(),this._attrs.canStroke=!0,this._attrs.canFill=!0,this._attrs.type="arc"}getDefaultAttrs(){return{x:0,y:0,r:0,startAngle:0,endAngle:Math.PI*2,anticlockwise:!1,lineWidth:1}}createPath(t){var e=this.get("attrs"),{x:a,y:i,r:n,startAngle:s,endAngle:o,anticlockwise:l}=e;t.beginPath(),s!==o&&t.arc(a,i,n,s,o,l)}calculateBox(){var t=this.get("attrs"),{x:e,y:a,r:i,startAngle:n,endAngle:s,anticlockwise:o}=t;return $e(e,a,i,n,s,o)}};class wo extends N{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="sector"}getDefaultAttrs(){return{x:0,y:0,lineWidth:0,r:0,r0:0,startAngle:0,endAngle:Math.PI*2,anticlockwise:!1}}createPath(t){var e=this.get("attrs"),{x:a,y:i,startAngle:n,endAngle:s,r:o,r0:l,anticlockwise:h}=e;t.beginPath();var u=Math.cos(n),f=Math.sin(n);t.moveTo(u*l+a,f*l+i),t.lineTo(u*o+a,f*o+i),(Math.abs(s-n)>1e-4||n===0&&s<0)&&(t.arc(a,i,o,n,s,h),t.lineTo(Math.cos(s)*l+a,Math.sin(s)*l+i),l!==0&&t.arc(a,i,l,s,n,!h)),t.closePath()}calculateBox(){var t=this.get("attrs"),{x:e,y:a,r:i,r0:n,startAngle:s,endAngle:o,anticlockwise:l}=t,h=$e(e,a,i,s,o,l),u=$e(e,a,n,s,o,l);return{minX:Math.min(h.minX,u.minX),minY:Math.min(h.minY,u.minY),maxX:Math.max(h.maxX,u.maxX),maxY:Math.max(h.maxY,u.maxY)}}}var bo={calcRotatedBox(r){var{width:t,height:e,rotate:a}=r,i=Math.abs(a);return{width:Math.abs(t*Math.cos(i)+e*Math.sin(i)),height:Math.abs(e*Math.cos(i)+t*Math.sin(i))}}},Te=0,ee={},To=5e3;let Do=class extends N{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="text"}getDefaultAttrs(){return{lineWidth:0,lineCount:1,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom",lineHeight:null,textArr:null}}_getFontStyle(){var t=this._attrs.attrs,{fontSize:e,fontFamily:a,fontWeight:i,fontStyle:n,fontVariant:s}=t;return"".concat(n," ").concat(s," ").concat(i," ").concat(e,"px ").concat(a)}_afterAttrsSet(){var t=this._attrs.attrs;if(t.font=this._getFontStyle(),t.text){var e=t.text,a=null,i=1;R(e)&&e.indexOf(`
`)!==-1&&(a=e.split(`
`),i=a.length),t.lineCount=i,t.textArr=a}this.set("attrs",t)}_getTextHeight(){var t=this._attrs.attrs;if(t.height)return t.height;var e=t.lineCount,a=t.fontSize*1;if(e>1){var i=this._getSpaceingY();return a*e+i*(e-1)}return a}_getSpaceingY(){var t=this._attrs.attrs,e=t.lineHeight,a=t.fontSize*1;return e?e-a:a*.14}drawInner(t){var e=this,a=e._attrs.attrs,i=a.text,n=a.x,s=a.y;if(!(P(i)||isNaN(n)||isNaN(s))){var o=a.textArr,l=a.fontSize*1,h=e._getSpaceingY();a.rotate&&(t.translate(n,s),t.rotate(a.rotate),n=0,s=0);var u=a.textBaseline,f;o&&(f=e._getTextHeight());var c;if(e.hasFill()){var g=a.fillOpacity;if(!P(g)&&g!==1&&(t.globalAlpha=g),o)for(var v=0,d=o.length;v<d;v++){var p=o[v];c=s+v*(h+l)-f+l,u==="middle"&&(c+=f-l-(f-l)/2),u==="top"&&(c+=f-l),t.fillText(p,n,c)}else t.fillText(i,n,s)}if(e.hasStroke())if(o)for(var m=0,x=o.length;m<x;m++){var C=o[m];c=s+m*(h+l)-f+l,u==="middle"&&(c+=f-l-(f-l)/2),u==="top"&&(c+=f-l),t.strokeText(C,n,c)}else t.strokeText(i,n,s)}}_getAriaLabel(){return this._attrs.attrs.text}calculateBox(){var t=this,e=t._attrs.attrs,{x:a,y:i,textAlign:n,textBaseline:s}=e,o=t._getTextWidth();if(!o)return{minX:a,minY:i,maxX:a,maxY:i};var l=t._getTextHeight();if(e.rotate){var h=bo.calcRotatedBox({width:o,height:l,rotate:e.rotate});o=h.width,l=h.height}var u={x:a,y:i-l};return n&&(n==="end"||n==="right"?u.x-=o:n==="center"&&(u.x-=o/2)),s&&(s==="top"?u.y+=l:s==="middle"&&(u.y+=l/2)),{minX:u.x,minY:u.y,maxX:u.x+o,maxY:u.y+l}}_getTextWidth(){var t=this._attrs.attrs;if(t.width)return t.width;var e=t.text,a=this.get("context");if(!P(e)){var i=t.font,n=t.textArr,s=e+""+i;if(ee[s])return ee[s];var o=0;if(n)for(var l=0,h=n.length;l<h;l++){var u=n[l];o=Math.max(o,dr(u,i,a).width)}else o=dr(e,i,a).width;return Te>To&&(Te=0,ee={}),Te++,ee[s]=o,o}}};class Io extends N{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.createPath=null,this._attrs.type="custom"}createPath(t){var e=this.get("createPath");e&&e.call(this,t)}calculateBox(){var t=this.get("calculateBox");return t&&t.call(this)}}var Ao={circle(r,t,e,a){a.arc(r,t,e,0,Math.PI*2,!1)},square(r,t,e,a){a.moveTo(r-e,t-e),a.lineTo(r+e,t-e),a.lineTo(r+e,t+e),a.lineTo(r-e,t+e),a.closePath()}};class Eo extends N{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="marker"}getDefaultAttrs(){return{x:0,y:0,lineWidth:0}}createPath(t){var e=this.get("attrs"),{x:a,y:i,radius:n}=e,s=e.symbol||"circle",o;O(s)?o=s:o=Ao[s],t.beginPath(),o(a,i,n,t,this)}calculateBox(){var t=this.get("attrs"),{x:e,y:a,radius:i}=t;return{minX:e-i,minY:a-i,maxX:e+i,maxY:a+i}}}N.Rect=nr;N.Image=vo;N.Circle=go;N.Line=_o;N.Polygon=So;N.Polyline=Mo;N.Arc=Po;N.Sector=wo;N.Text=Do;N.Custom=Io;N.Marker=Eo;var Vr={},We="_INDEX";function ko(r){return function(t,e){var a=r(t,e);return a===0?t[We]-e[We]:a}}const ii={getGroupClass(){},getChildren(){return this.get("children")},addShape(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=Vr[r];e||(e=gt(r),Vr[r]=e);var a=new N[e](t);return this.add(a),a},addGroup(r){var t=this.getGroupClass(),e=new t(r);return this.add(e),e},contain(r){var t=this.get("children");return t.indexOf(r)>-1},sort(){for(var r=this.get("children"),t=0,e=r.length;t<e;t++){var a=r[t];a[We]=t}return r.sort(ko(function(i,n){return i.get("zIndex")-n.get("zIndex")})),this},drawChildren(r){for(var t=this.get("children"),e=0,a=t.length;e<a;e++){var i=t[e];i.draw(r)}return this},clear(){for(var r=this.get("children");r.length!==0;)r[r.length-1].remove(!0);return this},add(r){var t=this,e=t.get("children");I(r)||(r=[r]);for(var a=0,i=r.length;a<i;a++){var n=r[a],s=n.get("parent");if(s){var o=s.get("children");Qe(o,n)}t._setEvn(n),e.push(n)}return t},_setEvn(r){var t=this,{context:e,canvas:a,aria:i}=t._attrs,{isGroup:n,type:s}=r._attrs;r._attrs.parent=t,r._attrs.context=e,r._attrs.canvas=a,i&&r._attrs.aria!==!1&&(r._attrs.aria=i),s==="text"&&a&&a.get("fontFamily")&&(r._attrs.attrs.fontFamily=r._attrs.attrs.fontFamily||a.get("fontFamily"));var o=r._attrs.attrs.clip;if(o&&(o._attrs.parent=t,o._attrs.context=e,o._attrs.canvas=a),n)for(var l=r._attrs.children,h=0,u=l.length;h<u;h++)r._setEvn(l[h])},_getAriaLabel(){var{aria:r,ariaLabel:t,children:e}=this._attrs;if(r){var a=[];if(e&&e.length)for(var i=0,n=e.length;i<n;i++){var s=e[i].getAriaLabel();s&&a.push(s)}var o=a.join(" ");return t&&o?"".concat(t," ").concat(o," "):t||o}}};class Vt extends nr{_initProperties(){this._attrs={type:"group",zIndex:0,visible:!0,destroyed:!1,isGroup:!0,canFill:!0,canStroke:!0,attrs:{},children:[]}}getBBox(){for(var t=this,e=1/0,a=-1/0,i=1/0,n=-1/0,s=t.get("children"),o=0,l=s.length;o<l;o++){var h=s[o];if(h.get("visible")){var u=h.getBBox();if(!u)continue;var f=[u.minX,u.minY],c=[u.minX,u.maxY],g=[u.maxX,u.minY],v=[u.maxX,u.maxY],d=h.attr("matrix");D.transformMat2d(f,f,d),D.transformMat2d(c,c,d),D.transformMat2d(g,g,d),D.transformMat2d(v,v,d),e=Math.min(f[0],c[0],g[0],v[0],e),a=Math.max(f[0],c[0],g[0],v[0],a),i=Math.min(f[1],c[1],g[1],v[1],i),n=Math.max(f[1],c[1],g[1],v[1],n)}}return{minX:e,minY:i,maxX:a,maxY:n,x:e,y:i,width:a-e,height:n-i}}createPath(t){var e=this.get("attrs");!e.fillStyle&&!e.strokeStyle||super.createPath(t)}drawInner(t){super.drawInner(t),this.drawChildren(t)}destroy(){this.get("destroyed")||(this.clear(),super.destroy())}}y(Vt.prototype,ii,{getGroupClass(){return Vt}});var Ue=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame:function(r){return setTimeout(r,16)};class ni extends tr{get(t){return this._attrs[t]}set(t,e){this._attrs[t]=e}constructor(t){super();var{title:e}=t,a=e?vt(it.general.withTitle,{title:e}):it.general.title;this._attrs=y({type:"canvas",children:[],ariaLabel:a},t),this._initPixelRatio(),this._initCanvas()}_initPixelRatio(){var t=this.get("pixelRatio");t||this.set("pixelRatio",vn())}beforeDraw(){var t=this._attrs.context,e=this._attrs.el;t&&t.clearRect&&t.clearRect(0,0,e.width,e.height)}_initCanvas(){var t=this,e=t.get("el"),a=t.get("context");if(!e&&!a)throw new Error("Please specify the id, el or context of the chart!");var i;e?i=R(e)?gn(e):e:i=io.create(a),a&&i&&!i.getContext&&(i.getContext=function(){return a});var n=t.get("width");n||(n=Da(i));var s=t.get("height");s||(s=Ia(i)),t.set("canvas",this),t.set("el",i),t.set("context",a||i.getContext("2d")),t.changeSize(n,s);var o=new eo({canvas:this,el:i});t.set("eventController",o)}changeSize(t,e){var a=this.get("pixelRatio"),i=this.get("el");if(i.style&&(i.style.width=t+"px",i.style.height=e+"px"),cn(i)&&(i.width=t*a,i.height=e*a,a!==1)){var n=this.get("context");n.scale(a,a)}this.set("width",t),this.set("height",e)}getWidth(){var t=this.get("pixelRatio"),e=this.get("width");return e*t}getHeight(){var t=this.get("pixelRatio"),e=this.get("height");return e*t}getPointByClient(t,e){var a=this.get("el"),i=a.getBoundingClientRect(),n=i.right-i.left,s=i.bottom-i.top;return{x:(t-i.left)*(a.width/n),y:(e-i.top)*(a.height/s)}}_beginDraw(){this._attrs.toDraw=!0}_endDraw(){this._attrs.toDraw=!1}draw(){var t=this;function e(){t.set("animateHandler",Ue(function(){t.set("animateHandler",void 0),t.get("toDraw")&&e()})),t.beforeDraw();try{var a=t._attrs.context;t.drawChildren(a),a.draw&&a.draw(),t.setAriaLabel()}catch(i){console.warn("error in draw canvas, detail as:"),console.warn(i),t._endDraw()}t._endDraw()}t.get("destroyed")||(t.get("animateHandler")?this._beginDraw():e())}setAriaLabel(){var{el:t}=this._attrs,e=this._getAriaLabel();e&&t.setAttribute&&t.setAttribute("aria-label",e)}destroy(){if(!this.get("destroyed")){var t=this.get("el");t.width=0,t.height=0,this.clear(),this._attrs={},this.set("destroyed",!0)}}isDestroyed(){return this.get("destroyed")}}y(ni.prototype,ii,{getGroupClass(){return Vt}});var No={};function Oo(r){var t=No[r];return t||{Canvas:ni,Group:Vt,Shape:N}}function Yo(r){var{renderer:t}=r,e=Oo(t);return new e.Canvas(r)}function si(r){var t=r.start,e=r.end,a=e.x-t.x,i=Math.abs(e.y-t.y),n=10,s;if(r.isPolar){var{circleRadius:o,center:l,startAngle:h,endAngle:u}=r;s=new N.Sector({attrs:{x:l.x,y:l.y,r:o,r0:0,startAngle:h,endAngle:u}})}else s=new N.Rect({attrs:{x:t.x,y:e.y-n,width:a,height:i+2*n}});return s.isClip=!0,s}function qr(r,t){var{x:e,y:a}=r,{tl:i,tr:n,br:s}=t;return e>=i.x&&e<=n.x&&a>=i.y&&a<=s.y}function $r(r,t){return r-t}function Fo(r,t){var e=!1;return S(r,function(a){var i=[].concat(a.values),n=[].concat(t.values);if(a.type===t.type&&a.field===t.field&&i.sort($r).toString()===n.sort($r).toString()){e=!0;return}}),e}class k extends Ea{static initPlugins(){return{_plugins:[],_cacheId:0,register(t){var e=this._plugins;[].concat(t).forEach(function(a){e.indexOf(a)===-1&&e.push(a)}),this._cacheId++},unregister(t){var e=this._plugins;[].concat(t).forEach(function(a){var i=e.indexOf(a);i!==-1&&e.splice(i,1)}),this._cacheId++},clear(){this._plugins=[],this._cacheId++},count(){return this._plugins.length},getAll(){return this._plugins},notify(t,e,a){var i=this.descriptors(t),n=i.length,s,o,l,h,u;for(s=0;s<n;++s)if(o=i[s],l=o.plugin,u=l[e],typeof u=="function"&&(h=[t].concat(a||[]),u.apply(l,h)===!1))return!1;return!0},descriptors(t){var e=t._plugins||(t._plugins={});if(e.id===this._cacheId)return e.descriptors;var a=[],i=[];return this._plugins.concat(t&&t.get("plugins")||[]).forEach(function(n){var s=a.indexOf(n);s===-1&&(a.push(n),i.push({plugin:n}))}),e.descriptors=i,e.id=this._cacheId,i}}}getDefaultCfg(){return{id:null,renderer:"canvas",rendered:!1,padding:T.padding,data:null,scales:{},geoms:[],colDefs:null,pixelRatio:T.pixelRatio,filters:null,appendPadding:T.appendPadding}}_syncYScales(){var t=this.get("syncY");if(t){var e=this.get("geoms"),a=[],i=[],n=[];S(e,function(s){var o=s.getYScale();o.isLinear&&(a.push(o),i.push(o.min),n.push(o.max))}),i=Math.min.apply(null,i),n=Math.max.apply(null,n),S(a,function(s){s.change({min:i}),s.change({max:n})})}}_getFieldsForLegend(){var t=[],e=this.get("geoms");return S(e,function(a){var i=a.get("attrOptions"),n=i.color;if(n&&n.field&&R(n.field)){var s=n.field.split("*");S(s,function(o){t.indexOf(o)===-1&&t.push(o)})}}),t}_getScaleData(t){var e=this.get("data"),a=this.get("filteredData");if(a.length){var i=this._getFieldsForLegend();i.indexOf(t)===-1&&(e=a)}return e}_adjustScale(){for(var t=this,e=t.get("scaleController"),a=this.get("geoms"),i=0;i<a.length;i++){var n=a[i];if(n.get("type")==="interval"){var s=n.getYScale();e.adjustStartZero(s)}}}_removeGeoms(){for(var t=this.get("geoms");t.length>0;){var e=t.shift();e.destroy()}}_clearGeoms(){for(var t=this.get("geoms"),e=0,a=t.length;e<a;e++){var i=t[e];i.clear()}}_clearInner(){this._clearGeoms(),k.plugins.notify(this,"clearInner"),this.emit(bn),this.get("axisController")&&this.get("axisController").clear()}_initFilteredData(){var t=this.get("filters"),e=this.get("data")||[];t&&(e=e.filter(function(a){var i=!0;return S(t,function(n,s){if(n&&(i=n(a[s],a),!i))return!1}),i})),this.set("filteredData",e)}_changeGeomsData(){for(var t=this.get("geoms"),e=this.get("filteredData"),a=0,i=t.length;a<i;a++){var n=t[a];n.changeData(e)}}_initGeom(t){if(!t.get("isInit")){var e=this.get("coord"),a=this.get("filteredData"),i=this.get("colDefs"),n=this.get("middlePlot");t.set("chart",this),t.set("container",n.addGroup()),t.set("data",a),t.set("coord",e),t.set("colDefs",i),t.init(),this.emit(Cn,t)}}_initGeoms(){for(var t=this.get("geoms"),e=0,a=t.length;e<a;e++)this._initGeom(t[e])}_initCoord(){var t=this.get("plotRange"),e=y({type:"cartesian"},this.get("coordCfg"),{plot:t}),a=e.type,i=At[gt(a)],n=new i(e);this.set("coord",n)}_initLayout(){var t=this.get("_padding");t||(t=this.get("margin")||this.get("padding"),t=W(t));var e=t[0]==="auto"?0:t[0],a=t[1]==="auto"?0:t[1],i=t[2]==="auto"?0:t[2],n=t[3]==="auto"?0:t[3],s=this.get("width"),o=this.get("height"),l={x:n,y:e},h={x:s-a,y:o-i},u=this.get("plot");if(u){u.reset(l,h);return}var f=new Dn({start:l,end:h});this.set("plotRange",f),this.set("plot",f)}_initCanvas(){var t=this;try{var e=Yo({renderer:t.get("renderer"),el:t.get("el")||t.get("id"),context:t.get("context"),pixelRatio:t.get("pixelRatio"),width:t.get("width"),height:t.get("height"),fontFamily:T.fontFamily,aria:t.get("aria"),title:t.get("title"),landscape:t.get("landscape")});t.set("canvas",e),t.set("el",e.get("el")),t.set("width",e.get("width")),t.set("height",e.get("height"))}catch(a){throw a}k.plugins.notify(t,"afterCanvasInit")}_initLayers(){var t=this.get("canvas");this.set("backPlot",t.addGroup()),this.set("middlePlot",t.addGroup({zIndex:10})),this.set("frontPlot",t.addGroup({zIndex:20}))}_initEvents(){var t=this;this.on(Gt,function(){t._initFilteredData(),t._changeGeomsData()}),this.on(je,function(){t._initLayout();var e=t.get("coord");e&&e.reset(t.get("plot"))})}_initScaleController(){var t=new Ws({chart:this});this.set("colDefs",t.defs),this.set("scales",t.scales),this.set("scaleController",t)}_clearScaleController(){var t=this.get("scaleController");t.clear()}_init(){var t=this;t._initCanvas(),t._initLayout(),t._initLayers(),t._initEvents(),t._initScaleController(),t.set("axisController",new Ks({frontPlot:t.get("frontPlot").addGroup({className:"axisContainer"}),backPlot:t.get("backPlot").addGroup({className:"axisContainer"}),chart:t})),k.plugins.notify(t,"init")}constructor(t){super(t);var e=this;S(H,function(a,i){var n=Ui(i);e[n]=function(s){var o=new a(s);return e.addGeom(o),o}}),e._init()}init(){this._initFilteredData(),this._initCoord(),k.plugins.notify(this,"beforeGeomInit"),this._initGeoms(),this._syncYScales(),this._adjustScale(),this.emit(He)}source(t,e){return this.set("data",t),e&&this.scale(e),this}scale(t,e){var a=this.get("scaleController");return a.setFieldDef(t,e),this}axis(t,e){var a=this.get("axisController");return t?(a.axisCfg=a.axisCfg||{},a.axisCfg[t]=e):a.axisCfg=null,this}coord(t,e){var a;return V(t)?a=t:(a=e||{},a.type=t||"cartesian"),this.set("coordCfg",a),this}filter(t,e){var a=this.get("filters")||{};a[t]=e,this.set("filters",a),this.get("rendered")&&this.emit(Gt,this.get("data"))}render(){var t=this.get("rendered"),e=this.get("canvas"),a=this.get("geoms");t?(this._initGeoms(),this._adjustScale()):(this.init(),this.set("rendered",!0)),this.emit(xn),k.plugins.notify(this,"beforeGeomDraw"),this._renderAxis();var i=this.get("middlePlot");if(this.get("limitInPlot")&&!i.attr("clip")){var n=this.get("coord"),s=si(n);s.set("canvas",i.get("canvas")),i.attr("clip",s)}this.emit(Mn);for(var o=0,l=a.length;o<l;o++){var h=a[o];h.paint()}return this.emit(Pn),k.plugins.notify(this,"afterGeomDraw"),e.sort(),this.get("frontPlot").sort(),k.plugins.notify(this,"beforeCanvasDraw"),e.draw(),this.emit(_n),this}clear(){k.plugins.notify(this,"clear"),this.emit(wn),this._clearInner(),this._removeGeoms(),this._clearScaleController(),this.set("legendItems",null),this.set("filters",null),this.set("isUpdate",!1),this.set("_padding",null),this.set("rendered",!1);var t=this.get("canvas");return t.draw(),this}repaint(){var t=this.get("rendered");t&&(this.set("isUpdate",!0),this.set("legendItems",null),k.plugins.notify(this,"repaint"),this._clearInner(),this.emit(Tn),this.render())}changeData(t){this.emit(Sn,t),this.set("data",t),k.plugins.notify(this,"changeData"),this.emit(Gt,t),this.set("_padding",null),this.repaint()}changeSize(t,e){t?this.set("width",t):t=this.get("width"),e?this.set("height",e):e=this.get("height");var a=this.get("canvas");return a.changeSize(t,e),this.emit(je,{width:t,height:e}),this.repaint(),this}destroy(){this.clear();var t=this.get("canvas");t.destroy(),k.plugins.notify(this,"afterCanvasDestroyed"),this._interactions&&S(this._interactions,function(e){e.destroy()}),super.destroy()}getPosition(t){for(var e=this,a=e.get("coord"),i=e.getXScale(),n=i.field,s=e.getYScales(),o=s[0],l=o.field,h=0,u=s.length;h<u;h++){var f=s[h],c=f.field;if(t[c]){o=f,l=c;break}}var g=i.scale(t[n]),v=o.scale(t[l]);return a.convertPoint({x:g,y:v})}getRecord(t){var e=this,a=e.get("coord"),i=e.getXScale(),n=e.getYScales()[0],s=a.invertPoint(t),o={};return o[i.field]=i.invert(s.x),o[n.field]=n.invert(s.y),o}getSnapRecords(t){var e=this.get("geoms")[0],a=[];return e&&(a=e.getSnapRecords(t)),a}createScale(t){var e=this._getScaleData(t),a=this.get("scaleController");return a.createScale(t,e)}addGeom(t){var e=this.get("geoms");e.push(t)}getXScale(){var t=this,e=t.get("geoms"),a=e[0].getXScale();return a}getYScales(){var t=this.get("geoms"),e=[];return S(t,function(a){var i=a.getYScale();e.indexOf(i)===-1&&e.push(i)}),e}getLegendItems(){if(this.get("legendItems"))return this.get("legendItems");var t={},e=[],a=this.get("geoms");return S(a,function(i){var n=i.getAttr("color");if(n){var s=n.getScale("color");if(s.isCategory&&!Fo(e,s)){e.push(s);var o=s.field,l=s.getTicks(),h=[];S(l,function(u){var f=u.text,c=f,g=u.value,v=s.invert(g),d=n.mapping(v).join("")||T.defaultColor,p={fill:d,radius:3,symbol:"circle",stroke:"#fff"};h.push({name:c,dataValue:v,checked:!0,marker:p})}),t[o]=h}}}),this.set("legendItems",t),t}registerPlugins(t){var e=this,a=e.get("plugins")||[];I(a)||(a=[a]),[].concat(t).forEach(function(i){a.indexOf(i)===-1&&(i.init&&i.init(e),a.push(i))}),k.plugins._cacheId++,e.set("plugins",a)}_renderAxis(){var t=this.get("axisController"),e=this.getXScale(),a=this.getYScales(),i=this.get("coord");k.plugins.notify(this,"beforeRenderAxis"),t.createAxis(i,e,a)}_isAutoPadding(){if(this.get("_padding"))return!1;var t=this.get("padding");return I(t)?t.indexOf("auto")!==-1:t==="auto"}_updateLayout(t){var e=this.get("width"),a=this.get("height"),i={x:t[3],y:t[0]},n={x:e-t[1],y:a-t[2]},s=this.get("plot"),o=this.get("coord");s.reset(i,n),o.reset(s)}landscape(t){var e=this.get("canvas");e.set("landscape",t)}}k.plugins=k.initPlugins();T.version;function oi(r){var t=[],e=r.x,a=r.y;return a=I(a)?a:[a],a.forEach(function(i,n){var s={x:I(e)?e[n]:e,y:i};t.push(s)}),t}function li(r,t,e){if(!r.length)return[];var a=[],i=[],n;return S(r,function(s){n=s._origin?s._origin[t]:s[t],e?P(n)||i.push(s):I(n)&&P(n[0])||P(n)?i.length&&(a.push(i),i=[]):i.push(s)}),i.length&&a.push(i),a}var Lo=["circle","hollowCircle","rect"];Y.registerFactory("point",{defaultShapeType:"circle",getDefaultPoints(r){return oi(r)}});function Ro(r){var t={lineWidth:0,stroke:r.color,fill:r.color};return r.size&&(t.size=r.size),y(t,r.style),y({},T.shape.point,t)}function Bo(r,t,e){if(r.size!==0){var a=Ro(r),i=a.r||a.size,n=r.x,s=I(r.y)?r.y:[r.y];e==="hollowCircle"&&(a.lineWidth=1,a.fill=null);for(var o=0,l=s.length;o<l;o++)return e==="rect"?t.addShape("Rect",{className:"point",attrs:y({x:n-i,y:s[o]-i,width:i*2,height:i*2},a)}):t.addShape("Circle",{className:"point",attrs:y({x:n,y:s[o],r:i},a)})}}S(Lo,function(r){Y.registerShape("point",r,{draw(t,e){return Bo(t,e,r)}})});let zo=class extends H{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="point",t.shapeType="point",t.generatePoints=!1,t}draw(t,e){var a=this,i=a.get("container");S(t,function(n){var s=n.shape,o=a.getDrawCfg(n);if(I(n.y)){var l=a.hasAdjust("stack");S(n.y,function(h,u){o.y=h,(!l||u!==0)&&a.drawShape(s,n,o,i,e)})}else P(n.y)||a.drawShape(s,n,o,i,e)})}};H.Point=zo;Y.registerFactory("line",{defaultShapeType:"line"});function Go(r){var t={strokeStyle:r.color};return r.size>=0&&(t.lineWidth=r.size),y(t,r.style),y({},T.shape.line,t)}function Xo(r,t,e,a){var i=r.points;if(i.length&&I(i[0].y)){for(var n=[],s=[],o=0,l=i.length;o<l;o++){var h=i[o],u=oi(h);s.push(u[0]),n.push(u[1])}if(r.isInCircle&&(n.push(n[0]),s.push(s[0])),r.isStack)return t.addShape("Polyline",{className:"line",attrs:y({points:n,smooth:a},e)});var f=t.addShape("Polyline",{className:"line",attrs:y({points:n,smooth:a},e)}),c=t.addShape("Polyline",{className:"line",attrs:y({points:s,smooth:a},e)});return[f,c]}return r.isInCircle&&i.push(i[0]),t.addShape("Polyline",{className:"line",attrs:y({points:i,smooth:a},e)})}var Ho=["line","smooth","dash"];S(Ho,function(r){Y.registerShape("line",r,{draw(t,e){var a=r==="smooth",i=Go(t);return r==="dash"&&(i.lineDash=T.lineDash),Xo(t,e,i,a)}})});class hi extends H{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="path",t.shapeType="line",t}getDrawCfg(t){var e=super.getDrawCfg(t);return e.isStack=this.hasAdjust("stack"),e}draw(t,e){var a=this,i=a.get("container"),n=a.getYScale(),s=a.get("connectNulls"),o=li(t,n.field,s),l=this.getDrawCfg(t[0]);l.origin=t,S(o,function(h,u){l.splitedIndex=u,l.points=h,a.drawShape(l.shape,t[0],l,i,e)})}}H.Path=hi;let jo=class extends hi{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="line",t.sortable=!0,t}};H.Line=jo;function Wr(r,t){return Math.abs(r-t)<1e-5}function Ur(r){return!isNaN(r)&&!P(r)}function Zr(r){for(var t=[],e=0,a=r.length;e<a;e++){var i=r[e];Ur(i.x)&&Ur(i.y)&&t.push(i)}return t}function Vo(r,t){var e=!0;return S(r,function(a){if(!Wr(a.x,t.x)||!Wr(a.y,t.y))return e=!1,!1}),e}function qo(r,t,e,a,i){var n,s=r.concat(t);return i?n=e.addShape("Custom",{className:"area",attrs:y({points:s},a),createPath(o){var l=[[0,0],[1,1]],h=Zr(this._attrs.attrs.points),u=h.length,f=h.slice(0,u/2),c=h.slice(u/2,u),g=ve(f,!1,l);o.beginPath(),o.moveTo(f[0].x,f[0].y);for(var v=0,d=g.length;v<d;v++){var p=g[v];o.bezierCurveTo(p[1],p[2],p[3],p[4],p[5],p[6])}if(c.length){var m=ve(c,!1,l);o.lineTo(c[0].x,c[0].y);for(var x=0,C=m.length;x<C;x++){var _=m[x];o.bezierCurveTo(_[1],_[2],_[3],_[4],_[5],_[6])}}o.closePath()},calculateBox(){var o=Zr(this._attrs.attrs.points);return ce(o)}}):n=e.addShape("Polyline",{className:"area",attrs:y({points:s},a)}),n}function $o(r,t,e){var a=this,i=r.points,n=[],s=[];S(i,function(l){s.push(l[0]),n.push(l[1])});var o=y({fillStyle:r.color},T.shape.area,r.style);return s.reverse(),n=a.parsePoints(n),s=a.parsePoints(s),r.isInCircle&&(n.push(n[0]),s.unshift(s[s.length-1]),Vo(s,r.center)&&(s=[])),qo(n,s,t,o,e)}Y.registerFactory("area",{defaultShapeType:"area",getDefaultPoints(r){var t=r.x,e=r.y,a=r.y0;e=I(e)?e:[a,e];var i=[];return i.push({x:t,y:e[0]},{x:t,y:e[1]}),i}});var Wo=["area","smooth"];S(Wo,function(r){Y.registerShape("area",r,{draw(t,e){var a=r==="smooth";return $o.call(this,t,e,a)}})});class Uo extends H{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="area",t.shapeType="area",t.generatePoints=!0,t.sortable=!0,t}draw(t,e){var a=this,i=a.get("container"),n=this.getDrawCfg(t[0]),s=a.getYScale(),o=a.get("connectNulls"),l=li(t,s.field,o);n.origin=t,S(l,function(h,u){n.splitedIndex=u;var f=h.map(function(c){return c.points});n.points=f,a.drawShape(n.shape,t[0],n,i,e)})}}H.Area=Uo;var ui={initEvent(){var r=this,t=this.get("chart");t&&t.on(je,function(){r.set("_width",null)})},getDefaultSize(){var r=this.get("defaultSize");if(!r){var t=this.get("coord"),e=this.getXScale(),a=this.get("dataArray"),i=$i(e.values),n=i.length,s=e.range,o=1/n,l=1;t&&t.isPolar?t.transposed&&n>1?l=T.widthRatio.multiplePie:l=T.widthRatio.rose:(e.isLinear&&(o*=s[1]-s[0]),l=T.widthRatio.column),o*=l,this.hasAdjust("dodge")&&(o=o/a.length),r=o,this.set("defaultSize",r)}return r},getDimWidth(r){var t=this.get("coord"),e=t.convertPoint({x:0,y:0}),a=t.convertPoint({x:r==="x"?1:0,y:r==="x"?0:1}),i=0;return e&&a&&(i=Math.sqrt(Math.pow(a.x-e.x,2)+Math.pow(a.y-e.y,2))),i},_getWidth(){var r=this.get("_width");if(!r){var t=this.get("coord");t&&t.isPolar&&!t.transposed?r=(t.endAngle-t.startAngle)*t.circleRadius:r=this.getDimWidth("x"),this.set("_width",r)}return r},_toNormalizedSize(r){var t=this._getWidth();return r/t},_toCoordSize(r){var t=this._getWidth();return t*r},getNormalizedSize(r){var t=this.getAttrValue("size",r);return P(t)?t=this.getDefaultSize():t=this._toNormalizedSize(t),t},getSize(r){var t=this.getAttrValue("size",r);if(P(t)){var e=this.getDefaultSize();t=this._toCoordSize(e)}return t}};function fi(r){var{x:t,y:e,y0:a,size:i}=r,n=a,s=e;I(e)&&(s=e[1],n=e[0]);var o,l;return I(t)?(o=t[0],l=t[1]):(o=t-i/2,l=t+i/2),[{x:o,y:n},{x:o,y:s},{x:l,y:s},{x:l,y:n}]}function Zo(r){for(var t=[],e=[],a=0,i=r.length;a<i;a++){var n=r[a];t.push(n.x),e.push(n.y)}var s=Math.min.apply(null,t),o=Math.min.apply(null,e),l=Math.max.apply(null,t),h=Math.max.apply(null,e);return{x:s,y:o,width:l-s,height:h-o}}function Ko(r,t){var e=(r.x-t.x)/2+t.x,a=(r.y-t.y)/2+t.y;return{x:e,y:a}}Y.registerFactory("interval",{defaultShapeType:"rect",getDefaultPoints(r){return fi(r)}});Y.registerShape("interval","rect",{draw(r,t){var e=this.parsePoints(r.points),a=y({fill:r.color},T.shape.interval,r.style);if(r.isInCircle){var i=e.slice(0);this._coord.transposed&&(i=[e[0],e[3],e[2],e[1]]);var{x:n,y:s}=r.center,o=[1,0],l=[i[0].x-n,i[0].y-s],h=[i[1].x-n,i[1].y-s],u=[i[2].x-n,i[2].y-s],f=D.angleTo(o,h),c=D.angleTo(o,u),g=D.length(l),v=D.length(h);return f>=1.5*Math.PI&&(f=f-2*Math.PI),c>=1.5*Math.PI&&(c=c-2*Math.PI),t.addShape("Sector",{className:"interval",attrs:y({x:n,y:s,r:v,r0:g,startAngle:f,endAngle:c},a)})}var d=Zo(e);return t.addShape("rect",{className:"interval",attrs:y(d,a)})}});["pyramid","funnel"].forEach(function(r){Y.registerShape("interval",r,{getPoints(t){return t.size=t.size*2,fi(t)},draw(t,e){var a=this.parsePoints(t.points),i=this.parsePoints(t.nextPoints),n=null;i?n=[a[0],a[1],i[1],i[0]]:(n=[a[0],a[1]],r==="pyramid"?n.push(Ko(a[2],a[3])):n.push(a[2],a[3]));var s=y({fill:t.color,points:n},T.shape.interval,t.style);return e.addShape("polygon",{className:"interval",attrs:s})}})});class Jo extends H{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="interval",t.shapeType="interval",t.generatePoints=!0,t}constructor(t){super(t),y(this,ui)}init(){super.init(),this.initEvent()}createShapePointsCfg(t){var e=super.createShapePointsCfg(t);return e.size=this.getNormalizedSize(t),e}clearInner(){super.clearInner(),this.set("defaultSize",null)}}H.Interval=Jo;Y.registerFactory("polygon",{defaultShapeType:"polygon",getDefaultPoints(r){for(var t=[],{x:e,y:a}=r,i=0,n=e.length;i<n;i++)t.push({x:e[i],y:a[i]});return t}});Y.registerShape("polygon","polygon",{draw(r,t){var e=this.parsePoints(r.points),a=y({fill:r.color,points:e},r.style);return t.addShape("Polygon",{className:"polygon",attrs:a})}});class Qo extends H{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}createShapePointsCfg(t){var e=super.createShapePointsCfg(t),a=this,i=e.x,n=e.y,s;if(!(I(i)&&I(n))){var o=a.getXScale(),l=a.getYScale(),h=o.values?o.values.length:o.ticks.length,u=l.values?l.values.length:l.ticks.length,f=.5*1/h,c=.5*1/u;o.isCategory&&l.isCategory?(i=[i-f,i-f,i+f,i+f],n=[n-c,n+c,n+c,n-c]):I(i)?(s=i,i=[s[0],s[0],s[1],s[1]],n=[n-c/2,n+c/2,n+c/2,n-c/2]):I(n)&&(s=n,n=[s[0],s[1],s[1],s[0]],i=[i-f/2,i-f/2,i+f/2,i+f/2]),e.x=i,e.y=n}return e}}H.Polygon=Qo;function tl(r){var t=r.sort(function(n,s){return n<s?1:-1}),e=t.length;if(e<4)for(var a=t[e-1],i=0;i<4-e;i++)t.push(a);return t}function el(r,t,e){var a=tl(t),i=[{x:r,y:a[0]},{x:r,y:a[1]},{x:r-e/2,y:a[2]},{x:r-e/2,y:a[1]},{x:r+e/2,y:a[1]},{x:r+e/2,y:a[2]},{x:r,y:a[2]},{x:r,y:a[3]}];return i}Y.registerFactory("schema",{});Y.registerShape("schema","candle",{getPoints(r){return el(r.x,r.y,r.size)},draw(r,t){var e=this.parsePoints(r.points),a=y({stroke:r.color,fill:r.color,lineWidth:1},r.style);return t.addShape("Custom",{className:"schema",attrs:a,createPath(i){i.beginPath(),i.moveTo(e[0].x,e[0].y),i.lineTo(e[1].x,e[1].y),i.moveTo(e[2].x,e[2].y);for(var n=3;n<6;n++)i.lineTo(e[n].x,e[n].y);i.closePath(),i.moveTo(e[6].x,e[6].y),i.lineTo(e[7].x,e[7].y)}})}});class rl extends H{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}constructor(t){super(t),y(this,ui)}init(){super.init(),this.initEvent()}createShapePointsCfg(t){var e=super.createShapePointsCfg(t);return e.size=this.getNormalizedSize(t),e}clearInner(){super.clearInner(),this.set("defaultSize",null)}}H.Schema=rl;var De,Kr;function ci(){if(Kr)return De;Kr=1;var r={}.toString,t=function(a,i){return r.call(a)==="[object "+i+"]"};return De=t,De}var Ie,Jr;function ye(){if(Jr)return Ie;Jr=1;var r=ci(),t=Array.isArray?Array.isArray:function(e){return r(e,"Array")};return Ie=t,Ie}var Ae,Qr;function al(){if(Qr)return Ae;Qr=1;var r=function(e){return e==null};return Ae=r,Ae}var Ee,ta;function il(){if(ta)return Ee;ta=1;function r(n,s){n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.__proto__=s}var t=ye(),e=al(),a=pe(),i=function(n){r(s,n);function s(){return n.apply(this,arguments)||this}var o=s.prototype;return o._initDefaultCfg=function(){this.xField=null,this.yField=null},o.processAdjust=function(h){this.processStack(h)},o.processStack=function(h){var u=this,f=u.xField,c=u.yField,g=h.length,v={positive:{},negative:{}};u.reverseOrder&&(h=h.slice(0).reverse());for(var d=0;d<g;d++)for(var p=h[d],m=0,x=p.length;m<x;m++){var C=p[m],_=C[f]||0,M=C[c],w=_.toString();if(M=t(M)?M[1]:M,!e(M)){var E=M>=0?"positive":"negative";v[E][w]||(v[E][w]=0),C[c]=[v[E][w],M+v[E][w]],v[E][w]+=M}}},s}(a);return a.Stack=i,Ee=i,Ee}il();var ke,ea;function nl(){if(ea)return ke;ea=1;var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(a){var i=typeof a>"u"?"undefined":r(a);return a!==null&&i==="object"||i==="function"};return ke=t,ke}var Ne,ra;function sr(){if(ra)return Ne;ra=1;var r=nl(),t=ye(),e=function(i,n){if(i){var s=void 0;if(t(i))for(var o=0,l=i.length;o<l&&(s=n(i[o],o),s!==!1);o++);else if(r(i)){for(var h in i)if(i.hasOwnProperty(h)&&(s=n(i[h],h),s===!1))break}}};return Ne=e,Ne}var Oe,aa;function sl(){if(aa)return Oe;aa=1;function r(s,o){s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.__proto__=o}var t=pe(),e=sr(),a=1/2,i=1/2,n=function(s){r(o,s);function o(){return s.apply(this,arguments)||this}var l=o.prototype;return l._initDefaultCfg=function(){this.marginRatio=a,this.dodgeRatio=i,this.adjustNames=["x","y"]},l.getDodgeOffset=function(u,f,c){var g=this,v=u.pre,d=u.next,p=d-v,m=p*g.dodgeRatio/c,x=g.marginRatio*m,C=1/2*(p-c*m-(c-1)*x)+((f+1)*m+f*x)-1/2*m-1/2*p;return(v+d)/2+C},l.processAdjust=function(u){var f=this,c=u.length,g=f.xField;e(u,function(v,d){for(var p=0,m=v.length;p<m;p++){var x=v[p],C=x[g],_={pre:m===1?C-1:C-.5,next:m===1?C+1:C+.5},M=f.getDodgeOffset(_,d,c);x[g]=M}})},o}(t);return t.Dodge=n,Oe=n,Oe}sl();var Ye,ia;function ol(){if(ia)return Ye;ia=1;var r=ci(),t=function(a){return r(a,"Function")};return Ye=t,Ye}var Fe,na;function ll(){if(na)return Fe;na=1;var r=ye(),t=ol(),e=sr(),a=function(n,s){if(r(n)){var o=n[0],l=void 0;t(s)?l=s(n[0]):l=n[0][s];var h=void 0;return e(n,function(u){t(s)?h=s(u):h=u[s],h>l&&(o=u,l=h)}),o}};return Fe=a,Fe}var Le,sa;function hl(){if(sa)return Le;sa=1;var r=function(e){for(var a=[],i=0;i<e.length;i++)a=a.concat(e[i]);return a};return Le=r,Le}var Re,oa;function ul(){if(oa)return Re;oa=1;function r(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var t=sr(),e=ll(),a=ye(),i={merge:hl()},n=pe(),s=function(o){r(l,o);function l(){return o.apply(this,arguments)||this}var h=l.prototype;return h._initDefaultCfg=function(){this.xField=null,this.yField=null,this.cacheMax=null,this.adjustNames=["y"],this.groupFields=null},h._getMax=function(f){var c=this,g=c.mergeData,v=e(g,function(m){var x=m[f];return a(x)?Math.max.apply(null,x):x}),d=v[f],p=a(d)?Math.max.apply(null,d):d;return p},h._getXValuesMax=function(){var f=this,c=f.yField,g=f.xField,v={},d=f.mergeData;return t(d,function(p){var m=p[g],x=p[c],C=a(x)?Math.max.apply(null,x):x;v[m]=v[m]||0,v[m]<C&&(v[m]=C)}),v},h.processAdjust=function(f){var c=this,g=i.merge(f);c.mergeData=g,c._processSymmetric(f),c.mergeData=null},h._processSymmetric=function(f){var c=this,g=c.xField,v=c.yField,d=c._getMax(v),p=f[0][0],m;p&&a(p[v])&&(m=c._getXValuesMax()),t(f,function(x){t(x,function(C){var _=C[v],M;if(a(_)){var w=C[g],E=m[w];M=(d-E)/2;var b=[];t(_,function(F){b.push(M+F)}),C[v]=b}else M=(d-_)/2,C[v]=[M,_+M]})})},l}(n);return n.Symmetric=s,Re=s,Re}ul();class fl extends At{_initDefaultCfg(){this.type="polar",this.startAngle=-Math.PI/2,this.endAngle=Math.PI*3/2,this.inner=0,this.innerRadius=0,this.isPolar=!0,this.transposed=!1,this.center=null,this.radius=null}init(t,e){super.init(t,e);var a=this,i=a.inner||a.innerRadius,n=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y),o,l;a.startAngle===-Math.PI&&a.endAngle===0?(o=Math.min(n/2,s),l={x:(t.x+e.x)/2,y:t.y}):(o=Math.min(n,s)/2,l={x:(t.x+e.x)/2,y:(t.y+e.y)/2});var h=a.radius;h>0&&h<=1&&(o=o*h),this.x={start:a.startAngle,end:a.endAngle},this.y={start:o*i,end:o},this.center=l,this.circleRadius=o}_convertPoint(t){var e=this,a=e.center,i=e.transposed,n=i?"y":"x",s=i?"x":"y",o=e.x,l=e.y,h=o.start+(o.end-o.start)*t[n],u=l.start+(l.end-l.start)*t[s];return{x:a.x+Math.cos(h)*u,y:a.y+Math.sin(h)*u}}_invertPoint(t){var e=this,{center:a,transposed:i,x:n,y:s}=e,o=i?"y":"x",l=i?"x":"y",h=[1,0,0,1,0,0];B.rotate(h,h,n.start);var u=[1,0];D.transformMat2d(u,u,h),u=[u[0],u[1]];var f=[t.x-a.x,t.y-a.y];if(D.zero(f))return{x:0,y:0};var c=D.angleTo(u,f,n.end<n.start);Math.abs(c-Math.PI*2)<.001&&(c=0);var g=D.length(f),v=c/(n.end-n.start);v=n.end-n.start>0?v:-v;var d=(g-s.start)/(s.end-s.start),p={};return p[o]=v,p[l]=d,p}}At.Polar=fl;class cl extends qt{_initDefaultCfg(){super._initDefaultCfg(),this.startAngle=-Math.PI/2,this.endAngle=Math.PI*3/2,this.radius=null,this.center=null}getOffsetPoint(t){var{startAngle:e,endAngle:a}=this,i=e+(a-e)*t;return this._getCirclePoint(i)}_getCirclePoint(t,e){var a=this,i=a.center;return e=e||a.radius,{x:i.x+Math.cos(t)*e,y:i.y+Math.sin(t)*e}}getTextAlignInfo(t,e){var a=this,i=a.getOffsetVector(t,e),n,s="middle";return i[0]>0?n="left":i[0]<0?n="right":(n="center",i[1]>0?s="top":i[1]<0&&(s="bottom")),{textAlign:n,textBaseline:s}}getAxisVector(t){var e=this.center,a=this.offsetFactor;return[(t.y-e.y)*a,(t.x-e.x)*-1*a]}drawLine(t){var{center:e,radius:a,startAngle:i,endAngle:n}=this,s=this.getContainer(t.top);s.addShape("arc",{className:"axis-line",attrs:y({x:e.x,y:e.y,r:a,startAngle:i,endAngle:n},t)})}}qt.Circle=cl;var la={min:0,median:.5,max:1};class G{_initDefaultCfg(){}constructor(t){this._initDefaultCfg(),L(this,t)}_getNormalizedValue(t,e){var a;return P(la[t])?a=e.scale(t):a=la[t],a}parsePercentPoint(t,e){var a=parseFloat(e[0])/100,i=parseFloat(e[1])/100,n=t.start,s=t.end,o=Math.abs(n.x-s.x),l=Math.abs(n.y-s.y),h=o*a+Math.min(n.x,s.x),u=l*i+Math.min(n.y,s.y);return{x:h,y:u}}parsePoint(t,e){var a=this,i=a.xScale,n=a.yScales;if(O(e)&&(e=e(i,n)),R(e[0])&&e[0].indexOf("%")!==-1&&!isNaN(e[0].slice(0,-1)))return this.parsePercentPoint(t,e);var s=a._getNormalizedValue(e[0],i),o=a._getNormalizedValue(e[1],n[0]),l=t.convertPoint({x:s,y:o});return a.limitInPlot?s>=0&&s<=1&&o>=0&&o<=1?l:null:l}render(){}repaint(){this.remove();var{coord:t,container:e,canvas:a}=this;e&&!e.isDestroyed()&&(this.render(t,e),a.draw())}remove(){var{element:t}=this;t&&t.remove(!0)}changeVisible(t){var e=this;e.visible=t;var a=e.element;a&&(a.set?a.set("visible",t):a.style.display=t?"":"none")}}class vl extends G{_initDefaultCfg(){this.type="arc",this.start=[],this.end=[],this.style={stroke:"#999",lineWidth:1}}render(t,e){var a=this,i=a.parsePoint(t,a.start),n=a.parsePoint(t,a.end);if(!(!i||!n)){var s=t.center,o=Math.sqrt((i.x-s.x)*(i.x-s.x)+(i.y-s.y)*(i.y-s.y)),l=Math.atan2(i.y-s.y,i.x-s.x),h=Math.atan2(n.y-s.y,n.x-s.x),u=e.addShape("arc",{className:"guide-arc",attrs:y({x:s.x,y:s.y,r:o,startAngle:l,endAngle:h},a.style)});return a.element=u,u}}}G.Arc=vl;function gl(r,t,e,a){var i=[];return r==="left"&&t==="top"?(i[0]=0,i[1]=0):r==="right"&&t==="top"?(i[0]=-e,i[1]=0):r==="left"&&t==="bottom"?(i[0]=0,i[1]=Math.floor(-a)):r==="right"&&t==="bottom"?(i[0]=Math.floor(-e),i[1]=Math.floor(-a)):r==="right"&&t==="middle"?(i[0]=Math.floor(-e),i[1]=Math.floor(-a/2)):r==="left"&&t==="middle"?(i[0]=0,i[1]=Math.floor(-a/2)):r==="center"&&t==="bottom"?(i[0]=Math.floor(-e/2),i[1]=Math.floor(-a)):r==="center"&&t==="top"?(i[0]=Math.floor(-e/2),i[1]=0):(i[0]=Math.floor(-e/2),i[1]=Math.floor(-a/2)),i}function Be(r,t){for(var e in t)t.hasOwnProperty(e)&&(r.style[e]=t[e]);return r}function ha(r){var t=document.createElement("div");return r=r.replace(/(^\s*)|(\s*$)/g,""),t.innerHTML=""+r,t.childNodes[0]}class dl extends G{_initDefaultCfg(){this.type="html",this.position=null,this.alignX="center",this.alignY="middle",this.offsetX=null,this.offsetY=null,this.html=null}render(t,e){var a=this,i=a.parsePoint(t,a.position);if(i){var n=ha(a.html);n=Be(n,{position:"absolute",top:Math.floor(i.y)+"px",left:Math.floor(i.x)+"px",visibility:"hidden"});var s=e.get("canvas").get("el"),o=s.parentNode;o=Be(o,{position:"relative"});var l=ha('<div class="guideWapper" style="position: absolute;top: 0; left: 0;"></div>');o.appendChild(l),l.appendChild(n);var h=s.offsetTop,u=s.offsetLeft,{alignX:f,alignY:c,offsetX:g,offsetY:v}=a,d=Da(n),p=Ia(n),m=gl(f,c,d,p);i.x=i.x+m[0]+u,i.y=i.y+m[1]+h,g&&(i.x+=g),v&&(i.y+=v),Be(n,{top:Math.floor(i.y)+"px",left:Math.floor(i.x)+"px",visibility:"visible"}),a.element=l}}remove(){var t=this.element;t&&t.parentNode&&t.parentNode.removeChild(t)}}G.Html=dl;class pl extends G{_initDefaultCfg(){this.type="line",this.start=[],this.end=[],this.style={stroke:"#000",lineWidth:1}}render(t,e){var a=[];if(a[0]=this.parsePoint(t,this.start),a[1]=this.parsePoint(t,this.end),!(!a[0]||!a[1])){var i=e.addShape("Line",{className:"guide-line",attrs:y({x1:a[0].x,y1:a[0].y,x2:a[1].x,y2:a[1].y},this.style)});return this.element=i,i}}}G.Line=pl;class ml extends G{_initDefaultCfg(){this.type="rect",this.start=[],this.end=[],this.style={fill:"#CCD7EB",opacity:.4}}render(t,e){var a=this.parsePoint(t,this.start),i=this.parsePoint(t,this.end);if(!(!a||!i)){var n=e.addShape("rect",{className:"guide-rect",attrs:y({x:Math.min(a.x,i.x),y:Math.min(a.y,i.y),width:Math.abs(i.x-a.x),height:Math.abs(a.y-i.y)},this.style)});return this.element=n,n}}}G.Rect=ml;class yl extends G{_initDefaultCfg(){this.type="text",this.position=null,this.content=null,this.style={fill:"#000"},this.offsetX=0,this.offsetY=0}render(t,e){var a=this.position,i=this.parsePoint(t,a);if(i){var{content:n,style:s,offsetX:o,offsetY:l}=this;o&&(i.x+=o),l&&(i.y+=l);var h=e.addShape("text",{className:"guide-text",attrs:y({x:i.x,y:i.y,text:n},s)});return this.element=h,h}}}G.Text=yl;class xl extends G{_initDefaultCfg(){this.type="tag",this.position=null,this.content=null,this.direct="tl",this.autoAdjust=!0,this.offsetX=0,this.offsetY=0,this.side=4,this.background={padding:5,radius:2,fill:"#1890FF"},this.textStyle={fontSize:12,fill:"#fff",textAlign:"center",textBaseline:"middle"},this.withPoint=!0,this.pointStyle={fill:"#1890FF",r:3,lineWidth:1,stroke:"#fff"}}_getDirect(t,e,a,i){var n=this.direct,s=this.side,o=t.get("canvas"),l=o.get("width"),h=o.get("height"),{x:u,y:f}=e,c=n[0],g=n[1];c==="t"&&f-s-i<0?c="b":c==="b"&&f+s+i>h&&(c="t");var v=c==="c"?s:0;return g==="l"&&u-v-a<0?g="r":g==="r"&&u+v+a>l?g="l":g==="c"&&(a/2+u+v>l?g="l":u-a/2-v<0&&(g="r")),n=c+g,n}render(t,e){var a=this.parsePoint(t,this.position);if(a&&!(isNaN(a.x)||isNaN(a.y))){var{content:i,background:n,textStyle:s}=this,o=[],l=e.addGroup({className:"guide-tag"});if(this.withPoint){var h=l.addShape("Circle",{className:"guide-tag-point",attrs:y({x:a.x,y:a.y},this.pointStyle)});o.push(h)}var u=l.addGroup(),f=u.addShape("text",{className:"guide-tag-text",zIndex:1,attrs:y({x:0,y:0,text:i},s)});o.push(f);var c=f.getBBox(),g=W(n.padding),v=c.width+g[1]+g[3],d=c.height+g[0]+g[2],p=c.minY-g[0],m=c.minX-g[3],x=u.addShape("rect",{className:"guide-tag-bg",zIndex:-1,attrs:y({x:m,y:p,width:v,height:d},n)});o.push(x);var C=this.autoAdjust?this._getDirect(e,a,v,d):this.direct,_=this.side,M=a.x+this.offsetX,w=a.y+this.offsetY,E,b=W(n.radius);C==="tl"?(E=[{x:v+m-_-1,y:d+p-1},{x:v+m,y:d+p-1},{x:v+m,y:d+_+p}],b[2]=0,M=M-v,w=w-_-d):C==="cl"?(E=[{x:v+m-1,y:(d-_)/2+p-1},{x:v+m-1,y:(d+_)/2+p+1},{x:v+_+m,y:d/2+p}],M=M-v-_,w=w-d/2):C==="bl"?(E=[{x:v+m,y:-_+p},{x:v+m-_-1,y:p+1},{x:v+m,y:p+1}],b[1]=0,M=M-v,w=w+_):C==="bc"?(E=[{x:v/2+m,y:-_+p},{x:(v-_)/2+m-1,y:p+1},{x:(v+_)/2+m+1,y:p+1}],M=M-v/2,w=w+_):C==="br"?(E=[{x:m,y:p-_},{x:m,y:p+1},{x:m+_+1,y:p+1}],b[0]=0,w=w+_):C==="cr"?(E=[{x:m-_,y:d/2+p},{x:m+1,y:(d-_)/2+p-1},{x:m+1,y:(d+_)/2+p+1}],M=M+_,w=w-d/2):C==="tr"?(E=[{x:m,y:d+_+p},{x:m,y:d+p-1},{x:_+m+1,y:d+p-1}],b[3]=0,w=w-d-_):C==="tc"&&(E=[{x:(v-_)/2+m-1,y:d+p-1},{x:(v+_)/2+m+1,y:d+p-1},{x:v/2+m,y:d+_+p}],M=M-v/2,w=w-d-_);var F=u.addShape("Polygon",{className:"guide-tag-side",zIndex:0,attrs:{points:E,fill:n.fill}});return o.push(F),x.attr("radius",b),u.moveTo(M-m,w-p),u.sort(),this.element=l,o}}}G.Tag=xl;class _l extends G{_initDefaultCfg(){this.type="point",this.position=null,this.offsetX=0,this.offsetY=0,this.style={fill:"#1890FF",r:3,lineWidth:1,stroke:"#fff"}}render(t,e){var a=this.parsePoint(t,this.position);if(!a)return null;var i=e.addShape("Circle",{className:"guide-point",attrs:y({x:a.x+this.offsetX,y:a.y+this.offsetY},this.style)});return this.element=i,i}}G.Point=_l;var Sl=3;class Ze{getDefaultCfg(){return{showTitle:!1,title:null,items:null,titleGap:12,itemGap:10,itemMarginBottom:12,itemFormatter:null,itemWidth:null,wordSpace:6,x:0,y:0,layout:"horizontal",joinString:": "}}constructor(t){L(this,this.getDefaultCfg(),t),this._init(),this._renderTitle(),this._renderItems()}_init(){var t=this.parent;if(t){var e=t.addGroup({zIndex:this.zIndex||0});this.container=e;var a=e.addGroup();this.wrapper=a;var i=a.addGroup({className:"itemsGroup"});this.itemsGroup=i}}_renderTitle(t){t=t||this.title;var e=this.titleShape,a=0;if(this.showTitle&&t){if(e&&!e.get("destroyed"))e.attr("text",t);else{var{wrapper:i,titleStyle:n}=this;e=i.addShape("text",{className:"title",attrs:y({x:0,y:0,text:t},n)}),this.titleShape=e}a=e.getBBox().height+this.titleGap}this._titleHeight=a}_renderItems(t){var e=this;t=t||e.items,t&&(e.reversed&&t.reverse(),S(t,function(a,i){e._addItem(a,i)}),t.length>1&&this._adjustItems(),this._renderBackground())}_renderBackground(){var t=this.background;if(t){var e=this.container,a=this.wrapper,{minX:i,minY:n,width:s,height:o}=a.getBBox(),l=t.padding||[0,0,0,0];l=W(l);var h=y({x:i-l[3],y:n-l[0],width:s+l[1]+l[3],height:o+l[0]+l[2]},t),u=this.backShape;u?u.attr(h):u=e.addShape("Rect",{zIndex:-1,attrs:h}),this.backShape=u,e.sort()}}_addItem(t){var e=this.itemsGroup,a=e.addGroup({name:t.name,value:t.value,dataValue:t.dataValue,checked:t.checked}),{unCheckStyle:i,unCheckColor:n,nameStyle:s,valueStyle:o,wordSpace:l}=this,{marker:h,value:u}=t,f=0;if(n&&(i.fill=n),h){var c=h.radius||Sl,g=y({x:c,y:this._titleHeight},h);t.checked===!1&&y(g,i);var v=a.addShape("marker",{className:"item-marker",attrs:g});f+=v.getBBox().width+l}var d,p=t.name;if(p){var m=this.joinString||"";p=u?p+m:p,d=a.addShape("text",{className:"name",attrs:y({x:f,y:this._titleHeight,text:this._formatItemValue(p)},s,t.checked===!1?i:null)})}if(u){var x=f;d&&(x+=d.getBBox().width),a.addShape("text",{className:"value",attrs:y({x,y:this._titleHeight,text:u},o,t.checked===!1?i:null)})}return a}_formatItemValue(t){var e=this.itemFormatter;return e&&(t=e.call(this,t)),t}_getMaxItemWidth(){var t,e=this.itemWidth;if(z(e)||P(e))return e;if(e==="auto"){for(var a=this.itemsGroup,i=a.get("children"),n=i.length,s=0,o=0;o<n;o++){var{width:l}=i[o].getBBox();s=Math.max(s,l)}var h=this.maxLength,u=this.itemGap,f=(h-u)/2,c=(h-u*2)/3;return n===2?t=Math.max(s,f):s<=c?t=c:s<=f?t=f:t=s,t}}_adjustHorizontal(){for(var{maxLength:t,itemsGroup:e}=this,a=e.get("children"),{itemGap:i,itemMarginBottom:n}=this,s=this._titleHeight,o=0,l=0,h,u,f=this._getMaxItemWidth(),c=[],g=0,v=a.length;g<v;g++){var d=a[g],p=d.getBBox(),m=p.height,x=p.width;h=f||x,u=m+n,h-(t-l)>1e-4&&(o++,l=0),d.moveTo(l,o*u),c.push({x:l,y:o*u+s-m/2,width:x*1.375,height:m*1.375}),l+=h+i}this.legendHitBoxes=c}_adjustVertical(){for(var{maxLength:t,itemsGroup:e}=this,{itemGap:a,itemMarginBottom:i,itemWidth:n}=this,s=this._titleHeight,o=e.get("children"),l=0,h,u,f=0,c=0,g=[],v=0,d=o.length;v<d;v++){var p=o[v],m=p.getBBox();h=m.width,u=m.height,z(n)?f=n+a:h>f&&(f=h+a),t-l<u?(l=0,c+=f,p.moveTo(c,0),g.push({x:c,y:s-u/2,width:h*1.375,height:u*1.375})):(p.moveTo(c,l),g.push({x:c,y:l-u/2+s,width:h*1.375,height:u*1.375})),l+=u+i}this.legendHitBoxes=g}_adjustItems(){var t=this.layout;t==="horizontal"?this._adjustHorizontal():this._adjustVertical()}moveTo(t,e){this.x=t,this.y=e;var a=this.container;return a&&a.moveTo(t,e),this}setItems(t){this.clearItems(),this._renderItems(t)}setTitle(t){this._renderTitle(t)}clearItems(){var t=this.itemsGroup;t.clear()}getWidth(){var t=this.container,e=t.getBBox();return e.width}getHeight(){var t=this.container,e=t.getBBox();return e.height}show(){var t=this.container;t.show()}hide(){var t=this.container;t.hide()}clear(){var t=this.container;t.clear(),t.remove(!0)}}class ua{getDefaultCfg(){return{x:0,y:0,content:"",textStyle:{fontSize:12,fill:"#fff",textAlign:"center",textBaseline:"middle",fontFamily:"Arial"},background:{radius:1,fill:"rgba(0, 0, 0, 0.65)",padding:[3,5]},width:0,height:0,className:""}}constructor(t){L(this,this.getDefaultCfg(),t),this._init();var{content:e,x:a,y:i}=this;P(e)||this.updateContent(e),this.updatePosition(a,i)}_init(){var{content:t,textStyle:e,background:a,className:i,visible:n,context:s}=this,o=new Vt({context:s,className:i,zIndex:0,visible:n}),l=o.addShape("Text",{className:i+"-text",zIndex:1,attrs:y({text:t,x:0,y:0},e)}),h=o.addShape("Rect",{className:i+"-bg",zIndex:-1,attrs:y({x:0,y:0,width:0,height:0},a)});o.sort(),this.container=o,this.textShape=l,this.backgroundShape=h}_getBBox(){var t=this.textShape,e=this.background,a=t.getBBox(),i=W(e.padding),n=a.width+i[1]+i[3],s=a.height+i[0]+i[2],o=a.minX-i[3],l=a.minY-i[0];return{x:o,y:l,width:n,height:s}}updateContent(t){var{textShape:e,backgroundShape:a}=this;if(!P(t)){V(t)||(t={text:t}),e.attr(t);var{x:i,y:n,width:s,height:o}=this._getBBox(),l=this.width||s,h=this.height||o;a.attr({x:i,y:n,width:l,height:h}),this._width=l,this._height=h,this.content=t.text}}updatePosition(t,e){var a=this.container,{x:i,y:n}=this._getBBox();a.moveTo(t-i,e-n),this.x=t-i,this.y=e-n}getWidth(){return this._width}getHeight(){return this._height}show(){this.container.show()}hide(){this.container.hide()}clear(){var t=this.container;t.clear(),t.remove(!0),this.container=null,this.textShape=null,this.backgroundShape=null}}var Tt=4;let Cl=class{getDefaultCfg(){return{showCrosshairs:!1,crosshairsStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1},crosshairsType:"y",showXTip:!1,showYTip:!1,xTip:null,xTipBackground:{radius:1,fill:"rgba(0, 0, 0, 0.65)",padding:[3,5]},xTipTextStyle:{fontSize:12,fill:"#fff",textAlign:"center",textBaseline:"middle"},yTip:null,yTipBackground:{radius:1,fill:"rgba(0, 0, 0, 0.65)",padding:[3,5]},yTipTextStyle:{fontSize:12,fill:"#fff",textAlign:"center",textBaseline:"middle"},background:null,layout:"horizontal",offsetX:0,offsetY:0}}constructor(t){L(this,this.getDefaultCfg(),t);var{frontPlot:e,custom:a}=this;if(!a){var i=new Ze(y({parent:e,zIndex:3},t));this.container=i;var{fixed:n,background:s}=this;n||(this.tooltipArrow=e.addShape("Polygon",{className:"tooltip-arrow",visible:!1,zIndex:2,attrs:y({points:[]},s)}))}if(this.showXTip){var{xTipBackground:o,xTipTextStyle:l}=this,h=new ua({context:e.get("context"),className:"xTip",background:o,textStyle:l,visible:!1});e.add(h.container),this.xTipBox=h}if(this.showYTip){var{yTipBackground:u,yTipTextStyle:f}=this,c=new ua({context:e.get("context"),className:"yTip",background:u,textStyle:f,visible:!1});e.add(c.container),this.yTipBox=c}this.showCrosshairs&&this._renderCrosshairs(),e.sort()}setContent(t,e){if(this.title=t,this.items=e,!this.custom){var a=this.container;a.setTitle(t),a.setItems(e)}}setYTipContent(t){var e=this.yTip;O(e)?t=e(t):t=y({text:t},e),this.yTipBox&&this.yTipBox.updateContent(t)}setYTipPosition(t){var e=this.plotRange,a=this.crosshairsShapeX;if(this.showYTip){var i=this.yTipBox,n=i.getHeight(),s=i.getWidth(),o=e.tl.x-s,l=t-n/2;l<=e.tl.y&&(l=e.tl.y),l+n>=e.br.y&&(l=e.br.y-n),o<0&&(o=e.tl.x,a&&a.attr("x1",e.tl.x+s)),i.updatePosition(o,l)}}setXTipContent(t){var e=this.xTip;O(e)?t=e(t):t=y({text:t},e),this.xTipBox&&this.xTipBox.updateContent(t)}setXTipPosition(t){var{showXTip:e,canvas:a,plotRange:i,xTipBox:n,crosshairsShapeY:s}=this;if(e){var o=a.get("height"),l=n.getWidth(),h=n.getHeight(),u=t-l/2,f=i.br.y;u<=i.tl.x&&(u=i.tl.x),u+l>=i.tr.x&&(u=i.tr.x-l),o-f<h&&(f-=h),n.updatePosition(u,f),s&&s.attr("y1",f)}}setXCrosshairPosition(t){this.crosshairsShapeX&&this.crosshairsShapeX.moveTo(0,t)}setYCrosshairPosition(t){this.crosshairsShapeY&&this.crosshairsShapeY.moveTo(t,0)}setPosition(t){var{container:e,plotRange:a,offsetX:i,offsetY:n,fixed:s,tooltipArrow:o}=this;if(e){var l=e.container.getBBox(),{minX:h,minY:u,width:f,height:c}=l,{tl:g,tr:v}=a,d=0,p=g.y-c-Tt+n;if(p<0&&(p=0),s){var m=(g.x+v.x)/2;d=m-f/2+i}else{var x;if(t.length>1?x=(t[0].x+t[t.length-1].x)/2:x=t[0].x,d=x-f/2+i,d<g.x&&(d=g.x),d+f>v.x&&(d=v.x-f),o){var C=p+c;o.attr("points",[{x:x-3,y:C},{x:x+3,y:C},{x,y:C+Tt}]);var _=e.backShape,M=W(_.attr("radius"));x===g.x?(M[3]=0,o.attr("points",[{x:g.x,y:C},{x:g.x+Tt,y:C},{x:g.x,y:C+Tt}])):x===v.x&&(M[2]=0,o.attr("points",[{x:v.x-Tt,y:C},{x:v.x,y:C},{x:v.x,y:C+Tt}])),_.attr("radius",M)}}e.moveTo(d-h,p-u)}}setMarkers(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=this,{items:a,style:i,type:n}=t,s=e._getMarkerGroup(n);if(n==="circle")for(var o=0,l=a.length;o<l;o++){var h=a[o];s.addShape("marker",{className:"tooltip-circle-marker",attrs:y({x:h.x,y:h.y,stroke:h.color},i)})}else s.addShape("rect",{className:"tooltip-rect-marker",attrs:i})}clearMarkers(){var t=this.markerGroup;t&&t.clear()}show(){var t=this.crosshairsShapeX,e=this.crosshairsShapeY,a=this.markerGroup,i=this.container,n=this.tooltipArrow,s=this.xTipBox,o=this.yTipBox,l=this.canvas;t&&t.show(),e&&e.show(),a&&a.show(),i&&i.show(),n&&n.show(),s&&s.show(),o&&o.show(),l.draw()}hide(){var t=this.crosshairsShapeX,e=this.crosshairsShapeY,a=this.markerGroup,i=this.container,n=this.tooltipArrow,s=this.xTipBox,o=this.yTipBox;t&&t.hide(),e&&e.hide(),a&&a.hide(),i&&i.hide(),n&&n.hide(),s&&s.hide(),o&&o.hide()}destroy(){var t=this.crosshairsShapeX,e=this.crosshairsShapeY,a=this.markerGroup,i=this.container,n=this.tooltipArrow,s=this.xTipBox,o=this.yTipBox;t&&t.remove(!0),e&&e.remove(!0),a&&a.remove(!0),n&&n.remove(!0),i&&i.clear(),s&&s.clear(),o&&o.clear(),this.destroyed=!0}_getMarkerGroup(t){var e=this.markerGroup;return e?e.clear():(t==="circle"?(e=this.frontPlot.addGroup({zIndex:1}),this.frontPlot.sort()):e=this.backPlot.addGroup(),this.markerGroup=e),e}_renderCrosshairs(){var{crosshairsType:t,crosshairsStyle:e,frontPlot:a,plotRange:i}=this,{tl:n,br:s}=i;Xe(t,"x")&&(this.crosshairsShapeX=a.addShape("Line",{className:"tooltip-crosshairs-x",zIndex:0,visible:!1,attrs:y({x1:n.x,y1:0,x2:s.x,y2:0},e)})),Xe(t,"y")&&(this.crosshairsShapeY=a.addShape("Line",{className:"tooltip-crosshairs-y",zIndex:0,visible:!1,attrs:y({x1:0,y1:s.y,x2:0,y2:n.y},e)}))}};function fa(r,t,e){return t=Ml(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Ml(r){var t=Pl(r,"string");return typeof t=="symbol"?t:String(t)}function Pl(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var a=e.call(r,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}T.tooltip=L({triggerOn:"press",triggerOff:"pressend",alwaysShow:!1,showTitle:!1,showCrosshairs:!1,crosshairsStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1},showTooltipMarker:!0,background:{radius:1,fill:"rgba(0, 0, 0, 0.65)",padding:[3,5]},titleStyle:{fontSize:12,fill:"#fff",textAlign:"start",textBaseline:"top"},nameStyle:{fontSize:12,fill:"rgba(255, 255, 255, 0.65)",textAlign:"start",textBaseline:"middle"},valueStyle:{fontSize:12,fill:"#fff",textAlign:"start",textBaseline:"middle"},showItemMarker:!0,itemMarkerStyle:{radius:3,symbol:"circle",lineWidth:1,stroke:"#fff"},layout:"horizontal",snap:!1},T.tooltip||{});function vi(r){var t=r.getAttr("color");if(t){var e=t.getScale(t.type);if(e.isLinear)return e}var a=r.getXScale(),i=r.getYScale();return i||a}function wl(r,t){var e,a,i=r._getGroupScales();if(i.length&&S(i,function(o){return a=o,!1}),a){var n=a.field;e=a.getText(t[n])}else{var s=vi(r);e=s.alias||s.field}return e}function bl(r,t){var e=vi(r);return e.getText(t[e.field])}function Tl(r,t){var e=r.getAttr("position"),a=e.getFields()[0],i=r.get("scales")[a];return i.getText(t[i.field])}function Dl(r,t){var e=-1;return S(r,function(a,i){if(a.title===t.title&&a.name===t.name&&a.value===t.value&&a.color===t.color)return e=i,!1}),e}function Il(r){var t=[];return S(r,function(e){var a=Dl(t,e);a===-1?t.push(e):t[a]=e}),t}function Al(r,t){return JSON.stringify(r)===JSON.stringify(t)}class El{constructor(t){var e=this;fa(this,"handleShowEvent",function(n){var s=e.chart;if(e.enable){var o=s.get("plotRange"),l=Aa(n,s);if(!qr(l,o)&&!e._tooltipCfg.alwaysShow){e.hideTooltip();return}var h=e.timeStamp,u=+new Date;u-h>16&&(e.showTooltip(l),e.timeStamp=u)}}),fa(this,"handleHideEvent",function(){e.enable&&e.hideTooltip()}),this.enable=!0,this.cfg={},this.tooltip=null,this.chart=null,this.timeStamp=0,y(this,t);var a=this.chart,i=a.get("canvas");this.canvas=i,this.canvasDom=i.get("el")}_setCrosshairsCfg(){var t=this,e=t.chart,a=y({},T.tooltip),i=e.get("geoms"),n=[];S(i,function(o){var l=o.get("type");n.indexOf(l)===-1&&n.push(l)});var s=e.get("coord").type;return i.length&&(s==="cartesian"||s==="rect")&&n.length===1&&["line","area","path","point"].indexOf(n[0])!==-1&&y(a,{showCrosshairs:!0}),a}_getMaxLength(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{layout:e,plotRange:a}=t;return e==="horizontal"?a.br.x-a.bl.x:a.bl.y-a.tr.y}render(){var t=this;if(!t.tooltip){var e=t.chart,a=e.get("canvas"),i=e.get("frontPlot").addGroup({className:"tooltipContainer",zIndex:10}),n=e.get("backPlot").addGroup({className:"tooltipContainer"}),s=e.get("plotRange"),o=e.get("coord"),l=t._setCrosshairsCfg(),h=t.cfg,u=L({plotRange:s,frontPlot:i,backPlot:n,canvas:a,fixed:o.transposed||o.isPolar},l,h);u.maxLength=t._getMaxLength(u),this._tooltipCfg=u;var f=new Cl(u);t.tooltip=f,u.alwaysShow&&t.prePoint&&this.showTooltip(t.prePoint),t.bindEvents()}}clear(){var t=this.tooltip;t&&(t.destroy(),this.unBindEvents()),this.tooltip=null,this._lastActive=null}_getTooltipMarkerStyle(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{type:e,items:a}=t,i=this._tooltipCfg;if(e==="rect"){var n,s,o,l,h=this.chart,{tl:u,br:f}=h.get("plotRange"),c=h.get("coord"),g=a[0],v=a[a.length-1],d=g.width;c.transposed?(n=u.x,s=v.y-d*.75,o=f.x-u.x,l=g.y-v.y+1.5*d):(n=g.x-d*.75,s=u.y,o=v.x-g.x+1.5*d,l=f.y-u.y),t.style=y({x:n,y:s,width:o,height:l,fill:"#CCD6EC",opacity:.3},i.tooltipMarkerStyle)}else t.style=y({radius:4,fill:"#fff",lineWidth:2},i.tooltipMarkerStyle);return t}_setTooltip(t,e){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.prePoint=t;var i=this._lastActive,n=this.tooltip,s=this._tooltipCfg;e=Il(e);var o=this.chart,l=o.get("coord"),h=o.getYScales()[0],u=s.snap;if(u===!1&&h.isLinear){var f=l.invertPoint(t),c=o.get("plotRange"),g,v;qr(t,c)&&(l.transposed?(g=h.invert(f.x),v=t.x,n.setXTipContent(g),n.setXTipPosition(v),n.setYCrosshairPosition(v)):(g=h.invert(f.y),v=t.y,n.setYTipContent(g),n.setYTipPosition(v),n.setXCrosshairPosition(v)))}if(s.onShow&&s.onShow({x:t.x,y:t.y,tooltip:n,items:e,tooltipMarkerCfg:a}),Al(i,e)){if(u===!1&&(Xe(s.crosshairsType,"y")||s.showYTip)){var d=this.chart.get("canvas");d.draw()}return}this._lastActive=e;var p=s.onChange;p&&p({x:t.x,y:t.y,tooltip:n,items:e,tooltipMarkerCfg:a});var m=e[0],x=m.title||m.name,C=m.x;if(e.length>1&&(C=(e[0].x+e[e.length-1].x)/2),n.setContent(x,e,l.transposed),n.setPosition(e,t),l.transposed){var _=m.y;e.length>1&&(_=(e[0].y+e[e.length-1].y)/2),n.setYTipContent(x),n.setYTipPosition(_),n.setXCrosshairPosition(_),u&&(n.setXTipContent(m.value),n.setXTipPosition(C),n.setYCrosshairPosition(C))}else n.setXTipContent(x),n.setXTipPosition(C),n.setYCrosshairPosition(C),u&&(n.setYTipContent(m.value),n.setYTipPosition(m.y),n.setXCrosshairPosition(m.y));var M=a.items;s.showTooltipMarker&&M.length?(a=this._getTooltipMarkerStyle(a),n.setMarkers(a)):n.clearMarkers(),n.show()}showTooltip(t){var e=this,a=e.chart,i,n=[],s=[],o=e._tooltipCfg,{showItemMarker:l,itemMarkerStyle:h,alwaysShow:u}=o,f;l&&(f=h);var c=a.get("geoms"),g=a.get("coord");if(S(c,function(d){if(d.get("visible")){var p=d.get("type"),m=d.getSnapRecords(t),x=d.get("adjust");if(p==="interval"&&x&&x.type==="symmetric")return;S(m,function(C){var{x:_,y:M,_origin:w,color:E}=C;if((_||!isNaN(_))&&(M||!isNaN(M))){var b={x:_,y:I(M)?M[1]:M,color:E||T.defaultColor,origin:w,name:wl(d,w),value:bl(d,w),title:Tl(d,w)};f&&(b.marker=y({fill:E||T.defaultColor},f)),s.push(b),["line","area","path"].indexOf(p)!==-1?(i="circle",n.push(b)):p==="interval"&&(g.type==="cartesian"||g.type==="rect")&&(i="rect",b.width=d.getSize(C._origin),n.push(b))}})}}),s.length){var v={items:n,type:i};e._setTooltip(t,s,v);return}u||e.hideTooltip()}hideTooltip(){var t=this._tooltipCfg;this._lastActive=null;var e=this.tooltip;if(e){e.hide(),t.onHide&&t.onHide({tooltip:e});var a=this.chart.get("canvas");a.draw()}}_handleEvent(t,e,a){var i=this.canvas;S([].concat(t),function(n){a==="bind"?i.on(n,e):i.off(n,e)})}bindEvents(){var t=this._tooltipCfg,{triggerOn:e,triggerOff:a,alwaysShow:i}=t;e&&this._handleEvent(e,this.handleShowEvent,"bind"),i||this._handleEvent(a,this.handleHideEvent,"bind")}unBindEvents(){var t=this._tooltipCfg,{triggerOn:e,triggerOff:a,alwaysShow:i}=t;e&&this._handleEvent(e,this.handleShowEvent,"unBind"),i||this._handleEvent(a,this.handleHideEvent,"unBind")}}function gi(r){var t=new El({chart:r});r.set("tooltipController",t),r.tooltip=function(e,a){return V(e)&&(a=e,e=!0),t.enable=e,a&&(t.cfg=a),this}}function di(r){var t=r.get("tooltipController");t.render(),r.showTooltip=function(e){return t.showTooltip(e),this},r.hideTooltip=function(){return t.hideTooltip(),this}}function pi(r){var t=r.get("tooltipController");t.clear()}const kl={init:gi,afterGeomDraw:di,clearInner:pi},Nl=Object.freeze(Object.defineProperty({__proto__:null,afterGeomDraw:di,clearInner:pi,default:kl,init:gi},Symbol.toStringTag,{value:"Module"}));T.guide=L({line:{style:{stroke:"#a3a3a3",lineWidth:1},top:!0},text:{style:{fill:"#787878",textAlign:"center",textBaseline:"middle"},offsetX:0,offsetY:0,top:!0},rect:{style:{fill:"#fafafa"},top:!1},arc:{style:{stroke:"#a3a3a3"},top:!0},html:{offsetX:0,offsetY:0,alignX:"center",alignY:"middle"},tag:{top:!0,offsetX:0,offsetY:0,side:4,background:{padding:5,radius:2,fill:"#1890FF"},textStyle:{fontSize:12,fill:"#fff",textAlign:"center",textBaseline:"middle"}},point:{top:!0,offsetX:0,offsetY:0,style:{fill:"#fff",r:3,lineWidth:2,stroke:"#1890ff"}}},T.guide||{});class Ol{constructor(t){this.guides=[],this.xScale=null,this.yScales=null,this.guideShapes=[],y(this,t)}_toString(t){return O(t)&&(t=t(this.xScale,this.yScales)),t=t.toString(),t}_getId(t,e){var a=e.id;if(!a){var i=e.type;i==="arc"||i==="line"||i==="rect"?a=this._toString(e.start)+"-"+this._toString(e.end):a=this._toString(e.position)}return a}paint(t){var e=this,{chart:a,guides:i,xScale:n,yScales:s}=e,o=[];S(i,function(l,h){l.xScale=n,l.yScales=s;var u;l.type==="regionFilter"?l.chart=a:u=l.top?e.frontPlot:e.backPlot,l.coord=t,l.container=u,l.canvas=a.get("canvas");var f=l.render(t,u);if(f){var c=e._getId(f,l);[].concat(f).forEach(function(g){g._id=g.get("className")+"-"+c,g.set("index",h),o.push(g)})}}),e.guideShapes=o}clear(){return this.reset(),this.guides=[],this}reset(){var t=this.guides;S(t,function(e){e.remove()})}_createGuide(t,e){var a=gt(t),i=new G[a](L({},T.guide[t],e));return this.guides.push(i),i}line(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("line",t)}text(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("text",t)}arc(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("arc",t)}html(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("html",t)}rect(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("rect",t)}tag(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("tag",t)}point(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("point",t)}regionFilter(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("regionFilter",t)}}function mi(r){var t=new Ol({frontPlot:r.get("frontPlot").addGroup({zIndex:20,className:"guideContainer"}),backPlot:r.get("backPlot").addGroup({className:"guideContainer"})});r.set("guideController",t),r.guide=function(){return t}}function yi(r){var t=r.get("guideController");if(t.guides.length){var e=r.getXScale(),a=r.getYScales(),i=r.get("coord");t.xScale=e,t.yScales=a,t.chart=r,t.paint(i)}}function xi(r){r.get("guideController").clear()}function _i(r){r.get("guideController").reset()}const Yl={init:mi,afterGeomDraw:yi,clear:xi,repaint:_i},Fl=Object.freeze(Object.defineProperty({__proto__:null,afterGeomDraw:yi,clear:xi,default:Yl,init:mi,repaint:_i},Symbol.toStringTag,{value:"Module"}));function Ll(r,t,e){return t=Rl(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Rl(r){var t=Bl(r,"string");return typeof t=="symbol"?t:String(t)}function Bl(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var a=e.call(r,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var ca=12,va=3,Lt={itemMarginBottom:12,itemGap:10,showTitle:!1,titleStyle:{fontSize:12,fill:"#808080",textAlign:"start",textBaseline:"top"},nameStyle:{fill:"#808080",fontSize:12,textAlign:"start",textBaseline:"middle"},valueStyle:{fill:"#000000",fontSize:12,textAlign:"start",textBaseline:"middle"},unCheckStyle:{fill:"#bfbfbf"},itemWidth:"auto",wordSpace:6,selectedMode:"multiple"};T.legend=L({common:Lt,right:y({position:"right",layout:"vertical"},Lt),left:y({position:"left",layout:"vertical"},Lt),top:y({position:"top",layout:"horizontal"},Lt),bottom:y({position:"bottom",layout:"horizontal"},Lt)},T.legend||{});function zl(r,t){var e=0;switch(t=W(t),r){case"top":e=t[0];break;case"right":e=t[1];break;case"bottom":e=t[2];break;case"left":e=t[3];break}return e}class Gl{constructor(t){var e=this;Ll(this,"handleEvent",function(i){var n=e;function s(C,_){var M=null,w=n.legends;return S(w,function(E){S(E,function(b){var{itemsGroup:F,legendHitBoxes:j}=b,lt=F.get("children");if(lt.length){var U=b.x,Z=b.y;S(j,function(K,wt){if(C>=K.x+U&&C<=K.x+K.width+U&&_>=K.y+Z&&_<=K.height+K.y+Z)return M={clickedItem:lt[wt],clickedLegend:b},!1})}})}),M}var o=n.chart,{x:l,y:h}=Aa(i,o),u=s(l,h);if(u&&u.clickedLegend.clickable!==!1){var{clickedItem:f,clickedLegend:c}=u;if(c.onClick)i.clickedItem=f,c.onClick(i);else if(!c.custom){var g=f.get("checked"),v=f.get("dataValue"),{filteredVals:d,field:p,selectedMode:m}=c,x=m==="single";x?o.filter(p,function(C){return C===v}):(g?d.push(v):Qe(d,v),o.filter(p,function(C){return d.indexOf(C)===-1})),o.repaint()}}}),this.legendCfg={},this.enable=!0,this.position="top",y(this,t);var a=this.chart;this.canvasDom=a.get("canvas").get("el"),this.clear()}addLegend(t,e,a){var i=this,n=i.legendCfg,s=t.field,o=n[s];if(o===!1)return null;if(o&&o.custom)i.addCustomLegend(s);else{var l=n.position||i.position;o&&o.position&&(l=o.position),t.isCategory&&i._addCategoryLegend(t,e,l,a)}}addCustomLegend(t){var e=this,a=e.legendCfg;t&&a[t]&&(a=a[t]);var i=a.position||e.position,n=e.legends;n[i]=n[i]||[];var s=a.items;if(!s)return null;var o=e.container;S(s,function(h){se(h.marker)?h.marker.radius=h.marker.radius||va:h.marker={symbol:h.marker||"circle",fill:h.fill,radius:va},h.checked=P(h.checked)?!0:h.checked,h.name=h.name||h.value});var l=new Ze(L({},T.legend[i],a,{maxLength:e._getMaxLength(i),items:s,parent:o}));n[i].push(l)}clear(){var t=this.legends;S(t,function(e){S(e,function(a){a.clear()})}),this.legends={},this.unBindEvents()}_isFiltered(t,e,a){var i=!1;return S(e,function(n){if(i=i||t.getText(n)===t.getText(a),i)return!1}),i}_getMaxLength(t){var e=this.chart,a=W(e.get("appendPadding"));return t==="right"||t==="left"?e.get("height")-(a[0]+a[2]):e.get("width")-(a[1]+a[3])}_addCategoryLegend(t,e,a,i){var n=this,{legendCfg:s,legends:o,container:l,chart:h}=n,u=t.field;o[a]=o[a]||[];var f="circle";s[u]&&s[u].marker?f=s[u].marker:s.marker&&(f=s.marker),S(e,function(d){se(f)?y(d.marker,f):d.marker.symbol=f,i&&(d.checked=!n._isFiltered(t,i,d.dataValue))});var c=h.get("legendItems");c[u]=e;var g=L({},T.legend[a],s[u]||s,{maxLength:n._getMaxLength(a),items:e,field:u,filteredVals:i,parent:l});g.showTitle&&L(g,{title:t.alias||t.field});var v=new Ze(g);return o[a].push(v),v}_alignLegend(t,e,a){var i=this,{tl:n,bl:s}=i.plotRange,o=i.chart,l=t.offsetX||0,h=t.offsetY||0,u=o.get("width"),f=o.get("height"),c=W(o.get("appendPadding")),g=t.getHeight(),v=t.getWidth(),d=0,p=0;if(a==="left"||a==="right"){var m=t.verticalAlign||"middle",x=Math.abs(n.y-s.y);d=a==="left"?c[3]:u-v-c[1],p=(x-g)/2+n.y,m==="top"?p=n.y:m==="bottom"&&(p=s.y-g),e&&(p=e.get("y")-g-ca)}else{var C=t.align||"left";if(d=c[3],C==="center"?d=u/2-v/2:C==="right"&&(d=u-(v+c[1])),p=a==="top"?c[0]+Math.abs(t.container.getBBox().minY):f-g,e){var _=e.getWidth();d=e.x+_+ca}}a==="bottom"&&h>0&&(h=0),a==="right"&&l>0&&(l=0),t.moveTo(d+l,p+h)}alignLegends(){var t=this,e=t.legends;return S(e,function(a,i){S(a,function(n,s){var o=a[s-1];t._alignLegend(n,o,i)})}),t}bindEvents(){var t=this.legendCfg,e=t.triggerOn||"touchstart";dn(this.canvasDom,e,this.handleEvent)}unBindEvents(){var t=this.legendCfg,e=t.triggerOn||"touchstart";pn(this.canvasDom,e,this.handleEvent)}}function Si(r){var t=new Gl({container:r.get("backPlot").addGroup(),plotRange:r.get("plotRange"),chart:r});r.set("legendController",t),r.legend=function(e,a){var i=t.legendCfg;return t.enable=!0,Ji(e)?(t.enable=e,i=a||{}):V(e)?i=e:i[e]=a,t.legendCfg=i,this}}function Ci(r){var t=r.get("legendController");if(!t.enable)return null;var{legendCfg:e,container:a}=t;if(e&&e.custom)t.addCustomLegend();else{var i=r.getLegendItems(),n=r.get("scales"),s=r.get("filters");S(i,function(h,u){var f=n[u],c=f.values,g;s&&s[u]?g=c.filter(function(v){return!s[u](v)}):g=[],t.addLegend(f,h,g)})}e&&e.clickable!==!1&&t.bindEvents();var o=t.legends,l={top:0,right:0,bottom:0,left:0};S(o,function(h,u){var f=0;S(h,function(c){var g=c.getWidth(),v=c.getHeight();u==="top"||u==="bottom"?(f=Math.max(f,v),c.offsetY>0&&(f+=c.offsetY)):(f=Math.max(f,g),c.offsetX>0&&(f+=c.offsetX))}),l[u]=f+zl(u,r.get("appendPadding"))}),r.set("legendRange",l),Object.keys(o).length?a.set("ariaLabel",it.legend.prefix):a.set("ariaLabel",null)}function Mi(r){var t=r.get("legendController");t.alignLegends()}function Pi(r){var t=r.get("legendController");t.clear(),r.set("legendRange",null)}const Xl={init:Si,beforeGeomDraw:Ci,afterGeomDraw:Mi,clearInner:Pi},Hl=Object.freeze(Object.defineProperty({__proto__:null,afterGeomDraw:Mi,beforeGeomDraw:Ci,clearInner:Pi,default:Xl,init:Si},Symbol.toStringTag,{value:"Module"}));var ze=typeof performance=="object"&&performance.now?performance:Date;class jl{constructor(){this.anims=[],this.time=null,this.playing=!1,this.canvas=[]}play(){var t=this;t.time=ze.now(),t.playing=!0;function e(){t.playing&&(Ue(e),t.update())}Ue(e)}stop(){this.playing=!1,this.time=null,this.canvas=[]}pushAnim(t){this.playing||this.play();var{delay:e,duration:a}=t,i=this.time+e,n=i+a;t.startTime=i,t.endTime=n,this.anims.push(t)}update(){var t=ze.now();if(this.canvas=[],!this.anims.length){this.stop();return}for(var e=0;e<this.anims.length;e++){var a=this.anims[e];if(!(t<a.startTime||a.hasEnded)){var i=a.shape;if(i.get("destroyed")){this.anims.splice(e,1),e--;continue}var{startState:n,endState:s,interpolate:o,duration:l}=a;t>=a.startTime&&!a.hasStarted&&(a.hasStarted=!0,a.onStart&&a.onStart());var h=(t-a.startTime)/l;if(h=Math.max(0,Math.min(h,1)),h=a.easing(h),a.onFrame)a.onFrame(h);else for(var u in o){var f=o[u],c=f(h),g=void 0;if(u==="points"){g=[];for(var v=Math.max(n.points.length,s.points.length),d=0;d<v;d+=2)g.push({x:c[d],y:c[d+1]})}else g=c;i._attrs.attrs[u]=g,i._attrs.bbox=null}var p=i.get("canvas");this.canvas.indexOf(p)===-1&&this.canvas.push(p),a.onUpdate&&a.onUpdate(h),t>=a.endTime&&!a.hasEnded&&(a.hasEnded=!0,a.onEnd&&a.onEnd()),h===1&&(this.anims.splice(e,1),e--)}}this.canvas.map(function(m){return m.draw(),m}),this.time=ze.now()}}function wi(r){return r}function Vl(r){return r*r}function ql(r){return r*(2-r)}function $l(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)}function Wl(r){return r*r*r}function Ul(r){return--r*r*r+1}function Zl(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)}function Kl(r){var t,e=.1,a=.4;return r===0?0:r===1?1:(!e||e<1?(e=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/e),-(e*Math.pow(2,10*(r-=1))*Math.sin((r-t)*(2*Math.PI)/a)))}function Jl(r){var t,e=.1,a=.4;return r===0?0:r===1?1:(!e||e<1?(e=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/e),e*Math.pow(2,-10*r)*Math.sin((r-t)*(2*Math.PI)/a)+1)}function Ql(r){var t,e=.1,a=.4;return r===0?0:r===1?1:(!e||e<1?(e=1,t=a/4):t=a/(2*Math.PI)*Math.asin(1/e),(r*=2)<1?-.5*(e*Math.pow(2,10*(r-=1))*Math.sin((r-t)*(2*Math.PI)/a)):e*Math.pow(2,-10*(r-=1))*Math.sin((r-t)*(2*Math.PI)/a)*.5+1)}function th(r){var t=1.70158;return r*r*((t+1)*r-t)}function eh(r){var t=1.70158;return(r=r-1)*r*((t+1)*r+t)+1}function rh(r){var t=2.5949095;return(r*=2)<1?.5*(r*r*((t+1)*r-t)):.5*((r-=2)*r*((t+1)*r+t)+2)}function bi(r){return 1-or(1-r)}function or(r){return(r/=1)<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375}function ah(r){return r<.5?bi(r*2)*.5:or(r*2-1)*.5+.5}const ih=Object.freeze(Object.defineProperty({__proto__:null,backIn:th,backInOut:rh,backOut:eh,bounceIn:bi,bounceInOut:ah,bounceOut:or,cubicIn:Wl,cubicInOut:Zl,cubicOut:Ul,elasticIn:Kl,elasticInOut:Ql,elasticOut:Jl,linear:wi,quadraticIn:Vl,quadraticInOut:$l,quadraticOut:ql},Symbol.toStringTag,{value:"Module"}));function ga(r){for(var t=[],e=0,a=r.length;e<a;e++)r[e]&&(t.push(r[e].x),t.push(r[e].y));return t}function Ti(r,t){return r=+r,t-=r,function(e){return r+t*e}}function da(r,t){var e=t?t.length:0,a=r?Math.min(e,r.length):0,i=new Array(a),n=new Array(e),s;for(s=0;s<a;++s)i[s]=Ti(r[s],t[s]);for(;s<e;++s)n[s]=t[s];return function(o){for(s=0;s<a;++s)n[s]=i[s](o);return n}}class nh{constructor(t,e,a){this.hasStarted=!1,this.hasEnded=!1,this.shape=t,this.source=e,this.timeline=a,this.animate=null}to(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.delay||0,a=t.attrs||{},i=t.duration||1e3,n;typeof t.easing=="function"?n=t.easing:n=ih[t.easing]||wi;var s={shape:this.shape,delay:e,duration:i,easing:n},o={};for(var l in a){var h=this.source[l],u=a[l];l==="points"?(h=ga(h),u=ga(u),o.points=da(h,u),this.source.points=h,a.points=u):l==="matrix"?o.matrix=da(h,u):o[l]=Ti(h,u)}return s.interpolate=o,s.startState=this.source,s.endState=a,this.timeline.pushAnim(s),this.animate=s,this}onFrame(t){return this.animate&&(this.animate.onFrame=function(e){t(e)}),this}onStart(t){return this.animate&&(this.animate.onStart=function(){t()}),this}onUpdate(t){return this.animate&&(this.animate.onUpdate=function(e){t(e)}),this}onEnd(t){return this.animate&&(this.animate.onEnd=function(){t()}),this}}function pa(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);t&&(a=a.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),e.push.apply(e,a)}return e}function ma(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?pa(Object(e),!0).forEach(function(a){sh(r,a,e[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):pa(Object(e)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(e,a))})}return r}function sh(r,t,e){return t=oh(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function oh(r){var t=lh(r,"string");return typeof t=="symbol"?t:String(t)}function lh(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var a=e.call(r,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}var hh={appear:{duration:450,easing:"quadraticOut"},update:{duration:300,easing:"quadraticOut"},enter:{duration:300,easing:"quadraticOut"},leave:{duration:350,easing:"quadraticIn"}},It={defaultCfg:{},Action:{},getAnimation(r,t,e){var a=this.defaultCfg[r];if(a){var i=a[e];if(O(i))return i(t)}return!1},getAnimateCfg(r,t){var e=hh[t],a=this.defaultCfg[r];return a&&a.cfg&&a.cfg[t]?L({},e,a.cfg[t]):e},registerAnimation(r,t){this.Action||(this.Action={}),this.Action=ma(ma({},this.Action),{},{[r]:t})}};function uh(r){var t=r.start,e=r.end;return{start:t,end:e,width:e.x-t.x,height:Math.abs(e.y-t.y)}}function Di(r,t,e){var a;r.apply(t);var i=t[0],n=t[1];if(e==="x"){r.transform([["t",i,n],["s",.01,1],["t",-i,-n]]);var s=r.getMatrix();a=B.transform(s,[["t",i,n],["s",100,1],["t",-i,-n]])}else if(e==="y"){r.transform([["t",i,n],["s",1,.01],["t",-i,-n]]);var o=r.getMatrix();a=B.transform(o,[["t",i,n],["s",1,100],["t",-i,-n]])}else if(e==="xy"){r.transform([["t",i,n],["s",.01,.01],["t",-i,-n]]);var l=r.getMatrix();a=B.transform(l,[["t",i,n],["s",100,100],["t",-i,-n]])}return a}function fh(r,t,e){var a={};return r.delay&&(a.delay=O(r.delay)?r.delay(t,e):r.delay),a.easing=r.easing,a.duration=r.duration,a.delay=r.delay,a}function xe(r,t,e,a){var i=r._id,n=r.get("index"),{easing:s,delay:o,duration:l}=fh(e,n,i),h=r.animate().to({attrs:t,duration:l,delay:o,easing:s});a&&h.onEnd(function(){a()})}function Bt(r,t){var e=P(r.attr("fillOpacity"))?1:r.attr("fillOpacity"),a=P(r.attr("strokeOpacity"))?1:r.attr("strokeOpacity");r.attr("fillOpacity",0),r.attr("strokeOpacity",0);var i={fillOpacity:e,strokeOpacity:a};xe(r,i,t)}const ch=Object.freeze(Object.defineProperty({__proto__:null,fadeIn:Bt},Symbol.toStringTag,{value:"Module"}));function lr(r,t,e,a,i){var{start:n,end:s,width:o,height:l}=uh(e),h,u,f=new N.Rect({attrs:{x:n.x,y:s.y,width:o,height:l}});i==="y"?(h=n.x+o/2,u=a.y<n.y?a.y:n.y):i==="x"?(h=a.x>n.x?a.x:n.x,u=n.y+l/2):i==="xy"&&(e.isPolar?(h=e.center.x,u=e.center.y):(h=(n.x+s.x)/2,u=(n.y+s.y)/2));var c=Di(f,[h,u],i);f.isClip=!0,f.endState={matrix:c},f.set("canvas",r.get("canvas")),r.attr("clip",f);var g=function(){r.attr("clip",null),f.remove(!0)};xe(f,f.endState,t,g)}function hr(r,t,e){for(var a=r.get("children"),i,n,s,o=0,l=a.length;o<l;o++){var h=a[o],u=h.getBBox();i=(u.minX+u.maxX)/2,n=(u.minY+u.maxY)/2,s=Di(h,[i,n],e),xe(h,{matrix:s},t)}}function Ii(r,t,e,a){lr(r,t,e,a,"x")}function Ai(r,t,e,a){lr(r,t,e,a,"y")}function zt(r,t,e,a){lr(r,t,e,a,"xy")}function vh(r,t){hr(r,t,"x")}function gh(r,t){hr(r,t,"y")}function Ei(r,t){hr(r,t,"xy")}function Dt(r,t,e){var a=si(e);a.set("canvas",r.get("canvas")),r.attr("clip",a);var i=function(){r.attr("clip",null),a.remove(!0)},n={};if(e.isPolar){var{startAngle:s,endAngle:o}=e;n.endAngle=o,a.attr("endAngle",s)}else{var{start:l,end:h}=e,u=Math.abs(l.x-h.x),f=Math.abs(l.y-h.y);e.isTransposed?(a.attr("height",0),n.height=f):(a.attr("width",0),n.width=u)}xe(a,n,t,i)}const dh=Object.freeze(Object.defineProperty({__proto__:null,groupScaleInX:Ii,groupScaleInXY:zt,groupScaleInY:Ai,groupWaveIn:Dt,shapesScaleInX:vh,shapesScaleInXY:Ei,shapesScaleInY:gh},Symbol.toStringTag,{value:"Module"}));var ge;ai.prototype.animate=function(){var r=y({},this.get("attrs"));return new nh(this,r,ge)};k.prototype.animate=function(r){return this.set("animate",r),this};It.Action=ch;It.defaultCfg={interval:{enter(r){return r.isPolar&&r.transposed?function(t){t.set("zIndex",-1);var e=t.get("parent");e.sort()}:Bt}},area:{enter(r){return r.isPolar?null:Bt}},line:{enter(r){return r.isPolar?null:Bt}},path:{enter(r){return r.isPolar?null:Bt}}};var ya={line(r){return r.isPolar?zt:Dt},area(r){return r.isPolar?zt:Dt},path(r){return r.isPolar?zt:Dt},point(){return Ei},interval(r){var t;return r.isPolar?(t=zt,r.transposed&&(t=Dt)):t=r.transposed?Ii:Ai,t},schema(){return Dt}};function ph(r,t){var e={};for(var a in t)(z(r[a])&&r[a]!==t[a]||I(r[a])&&JSON.stringify(r[a])!==JSON.stringify(t[a]))&&(e[a]=t[a]);return e}function mh(r,t,e){var a=r.get("type"),i="geom"+e+"-"+a,n=r.getXScale(),s=r.getYScale(),o=n.field||"x",l=s.field||"y",h=t[l],u;n.isIdentity?u=n.value:u=t[o],a==="interval"||a==="schema"?i+="-"+u:a==="line"||a==="area"||a==="path"?i+="-"+a:i+=n.isCategory?"-"+u:"-"+u+"-"+h;var f=r._getGroupScales();return S(f,function(c){var g=c.field;c.type!=="identity"&&(i+="-"+t[g])}),i}function yh(r,t,e){var a=[];return S(r,function(i,n){var s=i.get("container"),o=s.get("children"),l=i.get("type"),h=P(i.get("animateCfg"))?Ke(l,t):i.get("animateCfg");h!==!1&&S(o,function(u,f){u.get("className")===l&&(u._id=mh(i,u.get("origin")._origin,n),u.set("coord",e),u.set("animateCfg",h),u.set("index",f),a.push(u))}),i.set("shapes",o)}),a}function xh(r){for(var t={},e=0,a=r.length;e<a;e++){var i=r[e];if(!(!i._id||i.isClip)){var n=i._id;t[n]={_id:n,type:i.get("type"),attrs:y({},i._attrs.attrs),className:i.get("className"),geomType:i.get("className"),index:i.get("index"),coord:i.get("coord"),animateCfg:i.get("animateCfg")}}}return t}function jt(r,t,e,a){var i;return O(a)?i=a:R(a)?i=It.Action[a]:i=It.getAnimation(r,t,e),i}function ne(r,t,e){if(e===!1||V(e)&&e[t]===!1)return!1;var a=It.getAnimateCfg(r,t);return e&&e[t]?L({},a,e[t]):a}function _h(r,t,e){var a,i,n=[],s=[];S(t,function(o){var l=r[o._id];l?(o.set("cacheShape",l),n.push(o),delete r[o._id]):s.push(o)}),S(r,function(o){var{className:l,coord:h,_id:u,attrs:f,index:c,type:g}=o;if(i=ne(l,"leave",o.animateCfg),i===!1)return!0;if(a=jt(l,h,"leave",i.animation),O(a)){var v=e.addShape(g,{attrs:f,index:c,canvas:e,className:l});v._id=u,a(v,i,h)}}),S(n,function(o){var l=o.get("className");if(i=ne(l,"update",o.get("animateCfg")),i===!1)return!0;var h=o.get("coord"),u=o.get("cacheShape").attrs,f=ph(u,o._attrs.attrs);if(Object.keys(f).length)if(a=jt(l,h,"update",i.animation),O(a))a(o,i,h);else{var c={};S(f,function(g,v){c[v]=u[v]}),o.attr(c),o.animate().to({attrs:f,duration:i.duration,easing:i.easing,delay:i.delay}).onEnd(function(){o.set("cacheShape",null)})}}),S(s,function(o){var l=o.get("className"),h=o.get("coord");if(i=ne(l,"enter",o.get("animateCfg")),i===!1)return!0;if(a=jt(l,h,"enter",i.animation),O(a))if(l==="interval"&&h.isPolar&&h.transposed){var u=o.get("index"),f=n[u-1];a(o,i,f)}else a(o,i,h)})}function Ke(r,t){if(!r)return null;var e=t.get("animate");return r.indexOf("guide-tag")>-1&&(r="guide-tag"),V(e)?e[r]:e===!1?!1:null}function ki(){ge=new jl,ge.play()}function Ni(r){if(r.get("animate")!==!1){var t=r.get("isUpdate"),e=r.get("canvas"),a=r.get("coord"),i=r.get("geoms"),n=e.get("caches")||[];n.length===0&&(t=!1);var s=yh(i,r,a),{frontPlot:o,backPlot:l}=r.get("axisController"),h=o.get("children").concat(l.get("children")),u=[];r.get("guideController")&&(u=r.get("guideController").guideShapes);var f=[];if(h.concat(u).forEach(function(v){var d=v.get("className"),p=Ke(d,r);v.set("coord",a),v.set("animateCfg",p),f.push(v),s.push(v)}),e.set("caches",xh(s)),t)_h(n,s,e);else{var c,g;S(i,function(v){var d=v.get("type"),p=P(v.get("animateCfg"))?Ke(d,r):v.get("animateCfg");if(p!==!1){if(c=ne(d,"appear",p),g=jt(d,a,"appear",c.animation),O(g)){var m=v.get("shapes");S(m,function(M){g(M,c,a)})}else if(ya[d]){g=dh[c.animation]||ya[d](a);var x=v.getYScale(),C=a.convertPoint({x:0,y:x.scale(v.getYMinValue())}),_=v.get("container");g&&g(_,c,a,C)}}}),S(f,function(v){var d=v.get("animateCfg"),p=v.get("className");if(d&&d.appear){var m=It.getAnimateCfg(p,"appear"),x=L({},m,d.appear),C=jt(p,a,"appear",x.animation);O(C)&&C(v,x,a)}})}}}function Oi(){ge.stop()}const Sh={afterCanvasInit:ki,beforeCanvasDraw:Ni,afterCanvasDestroyed:Oi},Ch=Object.freeze(Object.defineProperty({__proto__:null,afterCanvasDestroyed:Oi,afterCanvasInit:ki,beforeCanvasDraw:Ni,default:Sh},Symbol.toStringTag,{value:"Module"}));k._Interactions={};k.registerInteraction=function(r,t){k._Interactions[r]=t};k.getInteraction=function(r){return k._Interactions[r]};k.prototype.interaction=function(r,t){var e=this._interactions||{};e[r]&&e[r].destroy();var a=k.getInteraction(r),i=new a(t,this);return e[r]=i,this._interactions=e,this};k.prototype.clearInteraction=function(r){var t=this._interactions;if(t)return r?(t[r]&&t[r].destroy(),delete t[r]):S(t,function(e,a){e.destroy(),delete t[a]}),this};function yt(r,t,e){return t=Mh(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Mh(r){var t=Ph(r,"string");return typeof t=="symbol"?t:String(t)}function Ph(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var a=e.call(r,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function wh(r,t){if(r.length!==t.length)return!1;var e=r.length-1;return r[0]===t[0]&&r[e]===t[e]}var Ge=[0,1];class bh{constructor(t){var e=this;yt(this,"chart",null),yt(this,"values",null),yt(this,"range",Ge),yt(this,"startRange",Ge),yt(this,"minCount",10),yt(this,"_afterinit",function(){var a=e.getPinchScale(),i=[].concat(a.values);e.values=i,e.minScale||(e.minScale=e.minCount/i.length),e.range!==Ge&&(e.updateRange(e.range),e.updateTicks())}),yt(this,"_afterdatachange",function(){e.updateRange(e.range)}),this.chart=t,this._initEvent(t)}_initEvent(t){t.on(He,this._afterinit),t.on(Gt,this._afterdatachange)}getPinchScale(){var{chart:t}=this,e=t.getXScale();return e}getFollowScale(){var{chart:t}=this,e=t.getYScales()||[];return e[0]}start(){var{range:t}=this,e=this.getPinchScale(),[a,i]=t;this.startRange=[a,i],this.lastTickCount=e.tickCount}doZoom(t,e,a){var{startRange:i,minScale:n}=this,[s,o]=i,l=1-a,h=o-s,u=h*l,f=u*t,c=u*e,g=Math.max(0,s-f),v=Math.min(1,o+c),d=[g,v];v-g<n||this.updateRange(d)}doMove(t){if(t){var{startRange:e}=this,[a,i]=e,n=i-a,s=n*t,o=a-s,l=i-s,h;o<0?h=[0,n]:l>1?h=[1-n,1]:h=[o,l],this.updateRange(h)}}updateRange(t){var{values:e}=this,[a,i]=t;a=Math.max(0,a),i=Math.min(1,i),this.range=[a,i];var n=e.length,s=a*n,o=i*n,l=e.slice(s,o);this.repaint(l)}repaint(t){var{chart:e}=this,a=this.getPinchScale(),{values:i,ticks:n}=a;wh(i,t)||(this.updateScale(a,{ticks:n,values:t}),this.updateFollowScale(a,t),e.repaint())}updateFollowScale(t,e){var{chart:a}=this,i=this.getFollowScale(),{field:n,type:s}=t,{field:o}=i,l=[],h={};e.forEach(function(g){h[g]=!0});var u=a.get("data");u.forEach(function(g){if(s==="timeCat"){var v=re(g[n]);h[v]&&l.push(g[o])}});var{min:f,max:c}=ba(l);this.updateScale(i,{min:f,max:c,nice:!0})}updateScale(t,e){t&&t.change(e)}updateTicks(){var{chart:t,values:e}=this,a=this.getPinchScale(),{values:i,tickCount:n}=a,s=Math.round(n*e.length/i.length),o=Ya("cat"),l=o({tickCount:s,values:e});this.updateScale(a,{ticks:l,values:i}),t.repaint()}destroy(){var{chart:t}=this;t.off(He,this._afterinit),t.off(Gt,this._afterdatachange)}}function at(r,t,e){return t=Th(t),t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Th(r){var t=Dh(r,"string");return typeof t=="symbol"?t:String(t)}function Dh(r,t){if(typeof r!="object"||r===null)return r;var e=r[Symbol.toPrimitive];if(e!==void 0){var a=e.call(r,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}class Yi{getDefaultCfg(){return{}}getInteractionContext(t){var e=t.get("interactionContext");return e||(e=new bh(t),t.set("interactionContext",e),e)}constructor(t,e){var a=this;at(this,"type",""),at(this,"startEvent","touchstart"),at(this,"processEvent","touchmove"),at(this,"endEvent","touchend"),at(this,"resetEvent",null),at(this,"context",null),at(this,"_start",function(n){a.preStart&&a.preStart(n),a.start(n),a.onStart&&a.onStart(n)}),at(this,"_process",function(n){a.preProcess&&a.preProcess(n),a.process(n),a.onProcess&&a.onProcess(n)}),at(this,"_end",function(n){a.preEnd&&a.preEnd(n),a.end(n),a.onEnd&&a.onEnd(n)}),at(this,"_reset",function(n){a.preReset&&a.preReset(n),a.reset(n),a.onReset&&a.onReset(n)}),y(this,this.getDefaultCfg(),t),this.context=this.getInteractionContext(e),this.chart=e;var{range:i}=this;i&&(this.context.range=i),this._bindEvents(e)}_bindEvents(t){var{startEvent:e,processEvent:a,endEvent:i,resetEvent:n}=this,s=t.get("canvas");s.on(e,this._start),s.on(a,this._process),s.on(i,this._end),s.on(n,this._reset)}_clearEvents(){var{chart:t,startEvent:e,processEvent:a,endEvent:i,resetEvent:n}=this,s=t.get("canvas");s.off(e,this._start),s.off(a,this._process),s.off(i,this._end),s.off(n,this._start)}start(){}process(){}end(){}reset(){}destroy(){this.context.destroy(),this._clearEvents()}}class Ih extends Yi{getDefaultCfg(){return{type:"pan",startEvent:"panstart",processEvent:"pan",endEvent:"panend"}}start(){var{context:t}=this;t.start()}process(t){var{direction:e,deltaX:a}=t;if(!(e==="up"||e==="down")){t.preventDefault&&t.preventDefault();var{context:i}=this,n=i.chart,s=n.get("coord"),{start:o,end:l}=s,h=l.x-o.x,u=a/h;i.doMove(u)}}}class Ah extends Yi{getDefaultCfg(){return{type:"pinch",startEvent:"pinchstart",processEvent:"pinch",endEvent:"pinchend"}}constructor(t,e){super(t,e);var{context:a}=this;y(a,t)}start(){var{context:t}=this;t.start()}process(t){t.preventDefault&&t.preventDefault();var{zoom:e,center:a}=t,{context:i}=this,{chart:n}=i,s=n.get("coord"),{start:o,end:l}=s,h=l.x-o.x,u=Math.abs(a.x-o.x),f=Math.abs(l.x-a.x),c=u/h,g=f/h;i.doZoom(c,g,e)}end(){var{context:t}=this;t.updateTicks()}}k.registerInteraction("pan",Ih);k.registerInteraction("pinch",Ah);N.Marker;k.plugins.register([Nl,Hl,Fl,Ch]);const Fi={Chart:k},Eh=()=>{const{recordList:r}=_a(),t=Q.useMemo(()=>{const o=r.sort((f,c)=>new Date(f.date).getTime()-new Date(c.date).getTime()),l=o[o.length-1],h=(l==null?void 0:l.kilometerOfDisplay)??0;return{...r.reduce((f,c)=>(c.type==="refueling"?(f.refuelingCost+=Number(c.cost),f.equalOilCount+=Number(c.oil)):(f.chargingCost+=Number(c.cost),f.equalElecCount+=Number(c.electric)),f),{refuelingCost:0,chargingCost:0,equalOilCount:0,equalElecCount:0}),totalKilometers:h}},[r]),e=Q.useMemo(()=>t.totalKilometers<=0?0:(t.refuelingCost+t.chargingCost)/t.totalKilometers*100,[t]),{refuelingCost:a,chargingCost:i,equalOilCount:n,equalElecCount:s}=t;return A.jsxs("div",{className:"statistics-card",children:[A.jsx("h3",{className:"statistics-title",children:"能源消耗统计"}),A.jsxs("div",{className:"statistics-content",children:[A.jsxs("div",{className:"statistics-item",children:[A.jsx("span",{className:"label",children:"每百公里平均花费"}),A.jsxs("span",{className:"value",children:[e.toFixed(2)," 元"]})]}),A.jsxs("div",{className:"statistics-details",children:[A.jsxs("div",{className:"statistics-item",children:[A.jsx("span",{className:"label",children:"补能总量："}),A.jsxs("span",{className:"value",children:[A.jsx("span",{className:"oil",children:n.toFixed(2)})," L +",A.jsx("span",{className:"charge",children:s.toFixed(2)})," kWh"]})]}),A.jsxs("div",{className:"statistics-item",children:[A.jsx("span",{className:"label",children:"等效："}),A.jsxs("div",{className:"value",children:[A.jsx("span",{className:"oil",children:(n+s/3.5).toFixed(2)})," L /",A.jsx("span",{className:"charge",children:(s+n*3.5).toFixed(2)})," kWh"]})]})]}),A.jsxs("div",{className:"statistics-details",children:[A.jsxs("div",{className:"statistics-item",children:[A.jsx("span",{className:"label",children:"总花费："}),A.jsxs("div",{className:"mid-label",children:[A.jsx("span",{className:"oil",children:a.toFixed(2)})," 元 +",A.jsx("span",{className:"charge",children:i.toFixed(2)})," 元"]}),A.jsxs("span",{className:"value",children:[(a+i).toFixed(2),"元"]})]}),A.jsxs("div",{className:"statistics-item",children:[A.jsx("span",{className:"label",children:"总里程"}),A.jsxs("span",{className:"value",children:[t.totalKilometers," km"]})]})]})]})]})},kh=({recordList:r,width:t})=>{const e=Q.useRef(String(Date.now())),[a,i]=Q.useState(!1),n=Q.useMemo(()=>{const o=[];return r.filter(l=>l.type==="charging").forEach(l=>{const h=zi(l.date).format("MM/DD");o.push({date:h,value:Number(l.cost),type:"费用"},{date:h,value:Number((l.cost/l.electric*10).toFixed(2)),type:"价格*10"},{date:h,value:l.electric,type:"电量"})}),o},[r]),s=()=>{const o=new Fi.Chart({id:e.current,pixelRatio:window.devicePixelRatio});o.source(n,{cost:{tickCount:5,min:0}}),o.tooltip({custom:!0,onChange:function(h){const u=o.get("legendController").legends.top[0],f=h.items,c=u.items,g=new Map;c.forEach(function(v){g.set(v.name,{...v})}),f.forEach(function(v){const d=v.name,p=v.value;g.get(d)&&g.set(d,{...v,value:p})}),u.setItems(Array.from(g.values()))},onHide:function(){o.get("legendController").legends.top[0].setItems(o.getLegendItems().type??[])}}),o.line().position("date*value").color("type"),o.render()};return Q.useEffect(()=>{t&&s()},[t]),A.jsx("div",{className:"basic-chart chart-container",children:A.jsx("canvas",{id:e.current,width:t||100,height:"260"})})},Nh=({recordList:r,width:t})=>{const e="per-cost-chart",a=Q.useMemo(()=>{const n=[];let s=0;return r.forEach(({kilometerOfDisplay:o,cost:l})=>{if(s+=Number(l),o>=n.length*100){const h=Number((s/o*100).toFixed(2)),u=Math.floor((o-n.length*100)/100);for(let f=0;f<u;f++)n.push({range:n.length*100,value:h})}}),n.filter(o=>o.value<100)},[r]),i=()=>{const n=new Fi.Chart({id:e,pixelRatio:window.devicePixelRatio});n.source(a,{range:{tickCount:5},value:{alias:"平均花费"}}),n.line().position("range*value").shape("smooth"),n.render()};return Q.useEffect(()=>{t&&i()},[t]),A.jsx("div",{className:"per-cost-chart chart-container",children:A.jsx("canvas",{id:e,width:t||100,height:"260"})})},Zh=()=>{const{recordList:r}=_a(),t=Q.useRef(null),[e,a]=Q.useState(0);Q.useEffect(()=>{const n=()=>{const s=t.current.getBoundingClientRect();a(s.width-32)};return t.current&&n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[t]);const i=r.length?r:Gi;return A.jsxs("div",{className:"chart-page",children:[!r.length&&A.jsx("div",{className:"demo-data-tip",children:"DEMO MODE"}),A.jsx(Eh,{}),A.jsxs("div",{className:"content",ref:t,children:[A.jsx(kh,{recordList:i,width:e}),A.jsx("p",{className:"chart-legend",children:"充电记录"}),A.jsx(Nh,{recordList:i,width:e}),A.jsx("p",{className:"chart-legend",children:"每百公里平均费用"})]})]})};export{Zh as default};
